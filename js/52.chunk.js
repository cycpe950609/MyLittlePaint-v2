(self.webpackChunkmylittlepaint2=self.webpackChunkmylittlepaint2||[]).push([[52],{3796:(t,e)=>{var r,n,i,o;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}o=function(){var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window};var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.getWindow=function(e){return(0,t.default)(e)?e:(e.ownerDocument||e).defaultView||n.window},e.init=i,e.window=e.realWindow=void 0;var r=void 0;e.realWindow=r;var n=void 0;function i(t){e.realWindow=r=t;var i=t.document.createTextNode("");i.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(i)===i&&(t=t.wrap(t)),e.window=n=t}e.window=n,"undefined"!=typeof window&&window&&i(window);var o={};function s(t){return s="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},s(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(t){return!!t&&"object"===s(t)},u=function(t){return"function"==typeof t},c={window:function(r){return r===e.window||(0,t.default)(r)},docFrag:function(t){return l(t)&&11===t.nodeType},object:l,func:u,number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!==s(t))return!1;var r=e.getWindow(t)||e.window;return/object|function/.test("undefined"==typeof Element?"undefined":s(Element))?t instanceof Element||t instanceof r.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:function(t){return l(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},array:function(t){return l(t)&&void 0!==t.length&&u(t.splice)}};o.default=c;var f={};function h(t){var e=t.interaction;if("drag"===e.prepared.name){var r=e.prepared.axis;"x"===r?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===r&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function d(t){var e=t.iEvent,r=t.interaction;if("drag"===r.prepared.name){var n=r.prepared.axis;if("x"===n||"y"===n){var i="x"===n?"y":"x";e.page[i]=r.coords.start.page[i],e.client[i]=r.coords.start.client[i],e.delta[i]=0}}}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var p={id:"actions/drag",install:function(t){var e=t.actions,r=t.Interactable,n=t.defaults;r.prototype.draggable=p.draggable,e.map.drag=p,e.methodDict.drag="draggable",n.actions.drag=p.defaults},listeners:{"interactions:before-action-move":h,"interactions:action-resume":h,"interactions:action-move":d,"auto-start:check":function(t){var e=t.interaction,r=t.interactable,n=t.buttons,i=r.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(n&r.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(t){return o.default.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):o.default.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:h,move:d,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},v=p;f.default=v;var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var g={init:function(t){var e=t;g.document=e.document,g.DocumentFragment=e.DocumentFragment||m,g.SVGElement=e.SVGElement||m,g.SVGSVGElement=e.SVGSVGElement||m,g.SVGElementInstance=e.SVGElementInstance||m,g.Element=e.Element||m,g.HTMLElement=e.HTMLElement||g.Element,g.Event=e.Event,g.Touch=e.Touch||m,g.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function m(){}var b=g;y.default=b;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var w={init:function(t){var e=y.default.Element,r=t.navigator||{};w.supportsTouch="ontouchstart"in t||o.default.func(t.DocumentTouch)&&y.default.document instanceof t.DocumentTouch,w.supportsPointerEvent=!1!==r.pointerEnabled&&!!y.default.PointerEvent,w.isIOS=/iP(hone|od|ad)/.test(r.platform),w.isIOS7=/iP(hone|od|ad)/.test(r.platform)&&/OS 7[^\d]/.test(r.appVersion),w.isIe9=/MSIE 9/.test(r.userAgent),w.isOperaMobile="Opera"===r.appName&&w.supportsTouch&&/Presto/.test(r.userAgent),w.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",w.pEventTypes=w.supportsPointerEvent?y.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,w.wheelEvent=y.default.document&&"onmousewheel"in y.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},S=w;_.default=S;var x={};function P(t){var e=t.parentNode;if(o.default.docFrag(e)){for(;(e=e.host)&&o.default.docFrag(e););return e}return e}function k(t,r){return e.window!==e.realWindow&&(r=r.replace(/\/deep\//g," ")),t[_.default.prefixedMatchesSelector](r)}Object.defineProperty(x,"__esModule",{value:!0}),x.closest=function(t,e){for(;o.default.element(t);){if(k(t,e))return t;t=P(t)}return null},x.getActualElement=function(t){return t.correspondingUseElement||t},x.getElementClientRect=E,x.getElementRect=function(t){var r=E(t);if(!_.default.isIOS7&&r){var n=T(e.getWindow(t));r.left+=n.x,r.right+=n.x,r.top+=n.y,r.bottom+=n.y}return r},x.getPath=function(t){for(var e=[];t;)e.push(t),t=P(t);return e},x.getScrollXY=T,x.indexOfDeepestElement=function(t){for(var r,n=[],i=0;i<t.length;i++){var o=t[i],a=t[r];if(o&&i!==r)if(a){var s=O(o),l=O(a);if(s!==o.ownerDocument)if(l!==o.ownerDocument)if(s!==l){n=n.length?n:C(a);var u=void 0;if(a instanceof y.default.HTMLElement&&o instanceof y.default.SVGElement&&!(o instanceof y.default.SVGSVGElement)){if(o===l)continue;u=o.ownerSVGElement}else u=o;for(var c=C(u,a.ownerDocument),f=0;c[f]&&c[f]===n[f];)f++;var h=[c[f-1],c[f],n[f]];if(h[0])for(var d=h[0].lastChild;d;){if(d===h[1]){r=i,n=c;break}if(d===h[2])break;d=d.previousSibling}}else p=o,v=a,(parseInt(e.getWindow(p).getComputedStyle(p).zIndex,10)||0)>=(parseInt(e.getWindow(v).getComputedStyle(v).zIndex,10)||0)&&(r=i);else r=i}else r=i}var p,v;return r},x.matchesSelector=k,x.matchesUpTo=function(t,e,r){for(;o.default.element(t);){if(k(t,e))return!0;if((t=P(t))===r)return k(t,e)}return!1},x.nodeContains=function(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1},x.parentNode=P,x.trySelector=function(t){return!!o.default.string(t)&&(y.default.document.querySelector(t),!0)};var O=function(t){return t.parentNode||t.host};function C(t,e){for(var r,n=[],i=t;(r=O(i))&&i!==e&&r!==i.ownerDocument;)n.unshift(i),i=r;return n}function T(t){return{x:(t=t||e.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function E(t){var e=t instanceof y.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=function(t,e){for(var r in e)t[r]=e[r];return t};var M={};function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e,r){return"parent"===t?(0,x.parentNode)(r):"self"===t?e.getRect(r):(0,x.closest)(r,t)}Object.defineProperty(M,"__esModule",{value:!0}),M.addEdges=function(t,e,r){t.left&&(e.left+=r.x),t.right&&(e.right+=r.x),t.top&&(e.top+=r.y),t.bottom&&(e.bottom+=r.y),e.width=e.right-e.left,e.height=e.bottom-e.top},M.getStringOptionResult=A,M.rectToXY=function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},M.resolveRectLike=function(t,e,r,n){var i,a=t;return o.default.string(a)?a=A(a,e,r):o.default.func(a)&&(a=a.apply(void 0,function(t){if(Array.isArray(t))return R(t)}(i=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),o.default.element(a)&&(a=(0,x.getElementRect)(a)),a},M.tlbrToXywh=function(t){return!t||"x"in t&&"y"in t||((t=(0,j.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t},M.xywhToTlbr=function(t){return!t||"left"in t&&"top"in t||((t=(0,j.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t};var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(t,e,r){var n=t.options[r],i=n&&n.origin||t.options.origin,o=(0,M.resolveRectLike)(i,t,e,[t&&e]);return(0,M.rectToXY)(o)||{x:0,y:0}};var F={};function I(t){return t.trim().split(/ +/)}Object.defineProperty(F,"__esModule",{value:!0}),F.default=function t(e,r,n){if(n=n||{},o.default.string(e)&&-1!==e.search(" ")&&(e=I(e)),o.default.array(e))return e.reduce((function(e,i){return(0,j.default)(e,t(i,r,n))}),n);if(o.default.object(e)&&(r=e,e=""),o.default.func(r))n[e]=n[e]||[],n[e].push(r);else if(o.default.array(r))for(var i=0;i<r.length;i++){var a;a=r[i],t(e,a,n)}else if(o.default.object(r))for(var s in r){var l=I(s).map((function(t){return"".concat(e).concat(t)}));t(l,r[s],n)}return n};var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0,G.default=function(t,e){return Math.sqrt(t*t+e*e)};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(t,e){t.__set||(t.__set={});var r=function(r){"function"!=typeof t[r]&&"__set"!==r&&Object.defineProperty(t,r,{get:function(){return r in t.__set?t.__set[r]:t.__set[r]=e[r]},set:function(e){t.__set[r]=e},configurable:!0})};for(var n in e)r(n);return t};var L={};function U(t){return t instanceof y.default.Event||t instanceof y.default.Touch}function B(t,e,r){return t=t||"page",(r=r||{}).x=e[t+"X"],r.y=e[t+"Y"],r}function z(t,e){return e=e||{x:0,y:0},_.default.isOperaMobile&&U(t)?(B("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):B("page",t,e),e}function V(t,e){return e=e||{},_.default.isOperaMobile&&U(t)?B("screen",t,e):B("client",t,e),e}function W(t){var e=[];return o.default.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function H(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},r=0;r<t.length;r++){var n=t[r];for(var i in e)e[i]+=n[i]}for(var o in e)e[o]/=t.length;return e}Object.defineProperty(L,"__esModule",{value:!0}),L.coordsToEvent=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},L.copyCoords=function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},L.getClientXY=V,L.getEventTargets=function(t){var e=o.default.func(t.composedPath)?t.composedPath():t.path;return[x.getActualElement(e?e[0]:t.target),x.getActualElement(t.currentTarget)]},L.getPageXY=z,L.getPointerId=function(t){return o.default.number(t.pointerId)?t.pointerId:t.identifier},L.getPointerType=function(t){return o.default.string(t.pointerType)?t.pointerType:o.default.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof y.default.Touch?"touch":"mouse"},L.getTouchPair=W,L.getXY=B,L.isNativePointer=U,L.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},L.pointerAverage=H,Object.defineProperty(L,"pointerExtend",{enumerable:!0,get:function(){return N.default}}),L.setCoordDeltas=function(t,e,r){t.page.x=r.page.x-e.page.x,t.page.y=r.page.y-e.page.y,t.client.x=r.client.x-e.client.x,t.client.y=r.client.y-e.client.y,t.timeStamp=r.timeStamp-e.timeStamp},L.setCoordVelocity=function(t,e){var r=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/r,t.page.y=e.page.y/r,t.client.x=e.client.x/r,t.client.y=e.client.y/r,t.timeStamp=r},L.setCoords=function(t,e,r){var n=e.length>1?H(e):e[0];z(n,t.page),V(n,t.client),t.timeStamp=r},L.setZeroCoords=function(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0},L.touchAngle=function(t,e){var r=e+"X",n=e+"Y",i=W(t),o=i[1][r]-i[0][r],a=i[1][n]-i[0][n];return 180*Math.atan2(a,o)/Math.PI},L.touchBBox=function(t){if(!t.length)return null;var e=W(t),r=Math.min(e[0].pageX,e[1].pageX),n=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),o=Math.max(e[0].pageY,e[1].pageY);return{x:r,y:n,left:r,top:n,right:i,bottom:o,width:i-r,height:o-n}},L.touchDistance=function(t,e){var r=e+"X",n=e+"Y",i=W(t),o=i[0][r]-i[1][r],a=i[0][n]-i[1][n];return(0,G.default)(o,a)};var Y={};function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Y,"__esModule",{value:!0}),Y.BaseEvent=void 0;var K=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,"immediatePropagationStopped",!1),X(this,"propagationStopped",!1),this._interaction=e}var e,r;return e=t,(r=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Y.BaseEvent=K,Object.defineProperty(K.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.remove=q.merge=q.from=q.findIndex=q.find=q.contains=void 0,q.contains=function(t,e){return-1!==t.indexOf(e)},q.remove=function(t,e){return t.splice(t.indexOf(e),1)};var $=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.push(n)}return t};q.merge=$,q.from=function(t){return $([],t)};var Q=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r,t))return r;return-1};q.findIndex=Q,q.find=function(t,e){return t[Q(t,e)]};var J={};function Z(t){return Z="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},Z(t)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(J,"__esModule",{value:!0}),J.DropEvent=void 0;var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(a,t);var e,r,n,i,o=(n=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rt(n);if(i){var r=rt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return et(t)}(this,t)});function a(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),nt(et(n=o.call(this,e._interaction)),"dropzone",void 0),nt(et(n),"dragEvent",void 0),nt(et(n),"relatedTarget",void 0),nt(et(n),"draggable",void 0),nt(et(n),"propagationStopped",!1),nt(et(n),"immediatePropagationStopped",!1);var i="dragleave"===r?t.prev:t.cur,s=i.element,l=i.dropzone;return n.type=r,n.target=s,n.currentTarget=s,n.dropzone=l,n.dragEvent=e,n.relatedTarget=e.target,n.draggable=e.interactable,n.timeStamp=e.timeStamp,n}return e=a,(r=[{key:"reject",value:function(){var t=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=e.activeDrops,n=q.findIndex(r,(function(e){var r=e.dropzone,n=e.element;return r===t.dropzone&&n===t.target}));e.activeDrops.splice(n,1);var i=new a(e,this.dragEvent,"dropdeactivate");i.dropzone=this.dropzone,i.target=this.target,this.dropzone.fire(i)}else this.dropzone.fire(new a(e,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Y.BaseEvent);J.DropEvent=it;var ot={};function at(t,e){for(var r=0;r<t.slice().length;r++){var n=t.slice()[r],i=n.dropzone,o=n.element;e.dropzone=i,e.target=o,i.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function st(t,e){for(var r=function(t,e){for(var r=t.interactables,n=[],i=0;i<r.list.length;i++){var a=r.list[i];if(a.options.drop.enabled){var s=a.options.drop.accept;if(!(o.default.element(s)&&s!==e||o.default.string(s)&&!x.matchesSelector(e,s)||o.default.func(s)&&!s({dropzone:a,draggableElement:e})))for(var l=o.default.string(a.target)?a._context.querySelectorAll(a.target):o.default.array(a.target)?a.target:[a.target],u=0;u<l.length;u++){var c=l[u];c!==e&&n.push({dropzone:a,element:c,rect:a.getRect(c)})}}}return n}(t,e),n=0;n<r.length;n++){var i=r[n];i.rect=i.dropzone.getRect(i.element)}return r}function lt(t,e,r){for(var n=t.dropState,i=t.interactable,o=t.element,a=[],s=0;s<n.activeDrops.length;s++){var l=n.activeDrops[s],u=l.dropzone,c=l.element,f=l.rect;a.push(u.dropCheck(e,r,i,o,c,f)?c:null)}var h=x.indexOfDeepestElement(a);return n.activeDrops[h]||null}function ut(t,e,r){var n=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===r.type&&(i.activate=new J.DropEvent(n,r,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===r.type&&(i.deactivate=new J.DropEvent(n,r,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),n.rejected||(n.cur.element!==n.prev.element&&(n.prev.dropzone&&(i.leave=new J.DropEvent(n,r,"dragleave"),r.dragLeave=i.leave.target=n.prev.element,r.prevDropzone=i.leave.dropzone=n.prev.dropzone),n.cur.dropzone&&(i.enter=new J.DropEvent(n,r,"dragenter"),r.dragEnter=n.cur.element,r.dropzone=n.cur.dropzone)),"dragend"===r.type&&n.cur.dropzone&&(i.drop=new J.DropEvent(n,r,"drop"),r.dropzone=n.cur.dropzone,r.relatedTarget=n.cur.element),"dragmove"===r.type&&n.cur.dropzone&&(i.move=new J.DropEvent(n,r,"dropmove"),i.move.dragmove=r,r.dropzone=n.cur.dropzone)),i}function ct(t,e){var r=t.dropState,n=r.activeDrops,i=r.cur,o=r.prev;e.leave&&o.dropzone.fire(e.leave),e.enter&&i.dropzone.fire(e.enter),e.move&&i.dropzone.fire(e.move),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&at(n,e.deactivate),r.prev.dropzone=i.dropzone,r.prev.element=i.element}function ft(t,e){var r=t.interaction,n=t.iEvent,i=t.event;if("dragmove"===n.type||"dragend"===n.type){var o=r.dropState;e.dynamicDrop&&(o.activeDrops=st(e,r.element));var a=n,s=lt(r,a,i);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=ut(r,0,a)}}Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0;var ht={id:"actions/drop",install:function(t){var e=t.actions,r=t.interactStatic,n=t.Interactable,i=t.defaults;t.usePlugin(f.default),n.prototype.dropzone=function(t){return function(t,e){if(o.default.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var r=(0,F.default)(e.listeners),n=Object.keys(r).reduce((function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=r[e],t}),{});t.off(t.options.drop.listeners),t.on(n),t.options.drop.listeners=n}return o.default.func(e.ondrop)&&t.on("drop",e.ondrop),o.default.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),o.default.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),o.default.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),o.default.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),o.default.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:o.default.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return o.default.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},n.prototype.dropCheck=function(t,e,r,n,i,a){return function(t,e,r,n,i,a,s){var l=!1;if(!(s=s||t.getRect(a)))return!!t.options.drop.checker&&t.options.drop.checker(e,r,l,t,a,n,i);var u=t.options.drop.overlap;if("pointer"===u){var c=(0,D.default)(n,i,"drag"),f=L.getPageXY(e);f.x+=c.x,f.y+=c.y;var h=f.x>s.left&&f.x<s.right,d=f.y>s.top&&f.y<s.bottom;l=h&&d}var p=n.getRect(i);if(p&&"center"===u){var v=p.left+p.width/2,y=p.top+p.height/2;l=v>=s.left&&v<=s.right&&y>=s.top&&y<=s.bottom}return p&&o.default.number(u)&&(l=Math.max(0,Math.min(s.right,p.right)-Math.max(s.left,p.left))*Math.max(0,Math.min(s.bottom,p.bottom)-Math.max(s.top,p.top))/(p.width*p.height)>=u),t.options.drop.checker&&(l=t.options.drop.checker(e,r,l,t,a,n,i)),l}(this,t,e,r,n,i,a)},r.dynamicDrop=function(e){return o.default.bool(e)?(t.dynamicDrop=e,r):t.dynamicDrop},(0,j.default)(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=ht.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var r=t.interaction,n=(t.event,t.iEvent);if("drag"===r.prepared.name){var i=r.dropState;i.activeDrops=null,i.events=null,i.activeDrops=st(e,r.element),i.events=ut(r,0,n),i.events.activate&&(at(i.activeDrops,i.events.activate),e.fire("actions/drop:start",{interaction:r,dragEvent:n}))}},"interactions:action-move":ft,"interactions:after-action-move":function(t,e){var r=t.interaction,n=t.iEvent;"drag"===r.prepared.name&&(ct(r,r.dropState.events),e.fire("actions/drop:move",{interaction:r,dragEvent:n}),r.dropState.events={})},"interactions:action-end":function(t,e){if("drag"===t.interaction.prepared.name){var r=t.interaction,n=t.iEvent;ft(t,e),ct(r,r.dropState.events),e.fire("actions/drop:end",{interaction:r,dragEvent:n})}},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var r=e.dropState;r&&(r.activeDrops=null,r.events=null,r.cur.dropzone=null,r.cur.element=null,r.prev.dropzone=null,r.prev.element=null,r.rejected=!1)}}},getActiveDrops:st,getDrop:lt,getDropEvents:ut,fireDropEvents:ct,defaults:{enabled:!1,accept:null,overlap:"pointer"}},dt=ht;ot.default=dt;var pt={};function vt(t){var e=t.interaction,r=t.iEvent,n=t.phase;if("gesture"===e.prepared.name){var i=e.pointers.map((function(t){return t.pointer})),a="start"===n,s="end"===n,l=e.interactable.options.deltaSource;if(r.touches=[i[0],i[1]],a)r.distance=L.touchDistance(i,l),r.box=L.touchBBox(i),r.scale=1,r.ds=0,r.angle=L.touchAngle(i,l),r.da=0,e.gesture.startDistance=r.distance,e.gesture.startAngle=r.angle;else if(s){var u=e.prevEvent;r.distance=u.distance,r.box=u.box,r.scale=u.scale,r.ds=0,r.angle=u.angle,r.da=0}else r.distance=L.touchDistance(i,l),r.box=L.touchBBox(i),r.scale=r.distance/e.gesture.startDistance,r.angle=L.touchAngle(i,l),r.ds=r.scale-e.gesture.scale,r.da=r.angle-e.gesture.angle;e.gesture.distance=r.distance,e.gesture.angle=r.angle,o.default.number(r.scale)&&r.scale!==1/0&&!isNaN(r.scale)&&(e.gesture.scale=r.scale)}}Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0;var yt={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,r=t.Interactable,n=t.defaults;r.prototype.gesturable=function(t){return o.default.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):o.default.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=yt,e.methodDict.gesture="gesturable",n.actions.gesture=yt.defaults},listeners:{"interactions:action-start":vt,"interactions:action-move":vt,"interactions:action-end":vt,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return t.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},gt=yt;pt.default=gt;var mt={};function bt(t,e,r,n,i,a,s){if(!e)return!1;if(!0===e){var l=o.default.number(a.width)?a.width:a.right-a.left,u=o.default.number(a.height)?a.height:a.bottom-a.top;if(s=Math.min(s,Math.abs(("left"===t||"right"===t?l:u)/2)),l<0&&("left"===t?t="right":"right"===t&&(t="left")),u<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){var c=l>=0?a.left:a.right;return r.x<c+s}if("top"===t){var f=u>=0?a.top:a.bottom;return r.y<f+s}if("right"===t)return r.x>(l>=0?a.right:a.left)-s;if("bottom"===t)return r.y>(u>=0?a.bottom:a.top)-s}return!!o.default.element(n)&&(o.default.element(e)?e===n:x.matchesUpTo(n,e,i))}function _t(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.resizeAxes){var n=e;r.interactable.options.resize.square?("y"===r.resizeAxes?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=r.resizeAxes,"x"===r.resizeAxes?n.delta.y=0:"y"===r.resizeAxes&&(n.delta.x=0))}}Object.defineProperty(mt,"__esModule",{value:!0}),mt.default=void 0;var wt={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,r=t.browser,n=t.Interactable,i=t.defaults;wt.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(r),wt.defaultMargin=r.supportsTouch||r.supportsPointerEvent?20:10,n.prototype.resizable=function(e){return function(t,e,r){return o.default.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),o.default.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=r.defaults.actions.resize.axis),o.default.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:o.default.bool(e.square)&&(t.options.resize.square=e.square),t):o.default.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=wt,e.methodDict.resize="resizable",i.actions.resize=wt.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e,i=r.rect;r._rects={start:(0,j.default)({},i),corrected:(0,j.default)({},i),previous:(0,j.default)({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},n.edges=r.prepared.edges,n.rect=r._rects.corrected,n.deltaRect=r._rects.delta}}(t),_t(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e,i=r.interactable.options.resize.invert,o="reposition"===i||"negate"===i,a=r.rect,s=r._rects,l=s.start,u=s.corrected,c=s.delta,f=s.previous;if((0,j.default)(f,u),o){if((0,j.default)(u,a),"reposition"===i){if(u.top>u.bottom){var h=u.top;u.top=u.bottom,u.bottom=h}if(u.left>u.right){var d=u.left;u.left=u.right,u.right=d}}}else u.top=Math.min(a.top,l.bottom),u.bottom=Math.max(a.bottom,l.top),u.left=Math.min(a.left,l.right),u.right=Math.max(a.right,l.left);for(var p in u.width=u.right-u.left,u.height=u.bottom-u.top,u)c[p]=u[p]-f[p];n.edges=r.prepared.edges,n.rect=u,n.deltaRect=c}}(t),_t(t)},"interactions:action-end":function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e;n.edges=r.prepared.edges,n.rect=r._rects.corrected,n.deltaRect=r._rects.delta}},"auto-start:check":function(t){var e=t.interaction,r=t.interactable,n=t.element,i=t.rect,a=t.buttons;if(i){var s=(0,j.default)({},e.coords.cur.page),l=r.options.resize;if(l&&l.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(a&l.mouseButtons))){if(o.default.object(l.edges)){var u={left:!1,right:!1,top:!1,bottom:!1};for(var c in u)u[c]=bt(c,l.edges[c],s,e._latestPointer.eventTarget,n,i,l.margin||wt.defaultMargin);u.left=u.left&&!u.right,u.top=u.top&&!u.bottom,(u.left||u.right||u.top||u.bottom)&&(t.action={name:"resize",edges:u})}else{var f="y"!==l.axis&&s.x>i.right-wt.defaultMargin,h="x"!==l.axis&&s.y>i.bottom-wt.defaultMargin;(f||h)&&(t.action={name:"resize",axes:(f?"x":"")+(h?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,r=t.axis,n=t.name,i=wt.cursors,o=null;if(r)o=i[n+r];else if(e){for(var a="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var u=s[l];e[u]&&(a+=u)}o=i[a]}return o},defaultMargin:null},St=wt;mt.default=St;var xt={};Object.defineProperty(xt,"__esModule",{value:!0}),xt.default=void 0;var Pt={id:"actions",install:function(t){t.usePlugin(pt.default),t.usePlugin(mt.default),t.usePlugin(f.default),t.usePlugin(ot.default)}};xt.default=Pt;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.default=void 0;var Ot,Ct,Tt=0,Et={request:function(t){return Ot(t)},cancel:function(t){return Ct(t)},init:function(t){if(Ot=t.requestAnimationFrame,Ct=t.cancelAnimationFrame,!Ot)for(var e=["ms","moz","webkit","o"],r=0;r<e.length;r++){var n=e[r];Ot=t["".concat(n,"RequestAnimationFrame")],Ct=t["".concat(n,"CancelAnimationFrame")]||t["".concat(n,"CancelRequestAnimationFrame")]}Ot=Ot&&Ot.bind(t),Ct=Ct&&Ct.bind(t),Ot||(Ot=function(e){var r=Date.now(),n=Math.max(0,16-(r-Tt)),i=t.setTimeout((function(){e(r+n)}),n);return Tt=r+n,i},Ct=function(t){return clearTimeout(t)})}};kt.default=Et;var jt={};Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=void 0,jt.getContainer=Rt,jt.getScroll=At,jt.getScrollSize=function(t){return o.default.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},jt.getScrollSizeDelta=function(t,e){var r=t.interaction,n=t.element,i=r&&r.interactable.options[r.prepared.name].autoScroll;if(!i||!i.enabled)return e(),{x:0,y:0};var o=Rt(i.container,r.interactable,n),a=At(o);e();var s=At(o);return{x:s.x-a.x,y:s.y-a.y}};var Mt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){Mt.isScrolling=!0,kt.default.cancel(Mt.i),t.autoScroll=Mt,Mt.interaction=t,Mt.prevTime=Mt.now(),Mt.i=kt.default.request(Mt.scroll)},stop:function(){Mt.isScrolling=!1,Mt.interaction&&(Mt.interaction.autoScroll=null),kt.default.cancel(Mt.i)},scroll:function(){var t=Mt.interaction,e=t.interactable,r=t.element,n=t.prepared.name,i=e.options[n].autoScroll,a=Rt(i.container,e,r),s=Mt.now(),l=(s-Mt.prevTime)/1e3,u=i.speed*l;if(u>=1){var c={x:Mt.x*u,y:Mt.y*u};if(c.x||c.y){var f=At(a);o.default.window(a)?a.scrollBy(c.x,c.y):a&&(a.scrollLeft+=c.x,a.scrollTop+=c.y);var h=At(a),d={x:h.x-f.x,y:h.y-f.y};(d.x||d.y)&&e.fire({type:"autoscroll",target:r,interactable:e,delta:d,interaction:t,container:a})}Mt.prevTime=s}Mt.isScrolling&&(kt.default.cancel(Mt.i),Mt.i=kt.default.request(Mt.scroll))},check:function(t,e){var r;return null==(r=t.options[e].autoScroll)?void 0:r.enabled},onInteractionMove:function(t){var e=t.interaction,r=t.pointer;if(e.interacting()&&Mt.check(e.interactable,e.prepared.name))if(e.simulation)Mt.x=Mt.y=0;else{var n,i,a,s,l=e.interactable,u=e.element,c=e.prepared.name,f=l.options[c].autoScroll,h=Rt(f.container,l,u);if(o.default.window(h))s=r.clientX<Mt.margin,n=r.clientY<Mt.margin,i=r.clientX>h.innerWidth-Mt.margin,a=r.clientY>h.innerHeight-Mt.margin;else{var d=x.getElementClientRect(h);s=r.clientX<d.left+Mt.margin,n=r.clientY<d.top+Mt.margin,i=r.clientX>d.right-Mt.margin,a=r.clientY>d.bottom-Mt.margin}Mt.x=i?1:s?-1:0,Mt.y=a?1:n?-1:0,Mt.isScrolling||(Mt.margin=f.margin,Mt.speed=f.speed,Mt.start(e))}}};function Rt(t,r,n){return(o.default.string(t)?(0,M.getStringOptionResult)(t,r,n):t)||(0,e.getWindow)(n)}function At(t){return o.default.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var Dt={id:"auto-scroll",install:function(t){var e=t.defaults,r=t.actions;t.autoScroll=Mt,Mt.now=function(){return t.now()},r.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=Mt.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,Mt.stop(),Mt.interaction&&(Mt.interaction=null)},"interactions:stop":Mt.stop,"interactions:action-move":function(t){return Mt.onInteractionMove(t)}}},Ft=Dt;jt.default=Ft;var It={};Object.defineProperty(It,"__esModule",{value:!0}),It.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},It.sign=void 0,It.warnOnce=function(t,r){var n=!1;return function(){return n||(e.window.console.warn(r),n=!0),t.apply(this,arguments)}},It.sign=function(t){return t>=0?1:-1};var Gt={};function Nt(t){return o.default.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function Lt(t){return o.default.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var Ut={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,r,n,i){var o=function(t,e,r,n,i){var o=t.getRect(n),a={action:null,interactable:t,interaction:r,element:n,rect:o,buttons:e.buttons||{0:1,1:4,3:8,4:16}[e.button]};return i.fire("auto-start:check",a),a.action}(this,r,n,i,t);return this.options.actionChecker?this.options.actionChecker(e,r,o,this,i,n):o},e.prototype.ignoreFrom=(0,It.warnOnce)((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,It.warnOnce)((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Lt,e.prototype.styleCursor=Nt}};Gt.default=Ut;var Bt={};function zt(t,e,r,n,i){return e.testIgnoreAllow(e.options[t.name],r,n)&&e.options[t.name].enabled&&Yt(e,r,t,i)?t:null}function Vt(t,e,r,n,i,o,a){for(var s=0,l=n.length;s<l;s++){var u=n[s],c=i[s],f=u.getAction(e,r,t,c);if(f){var h=zt(f,u,c,o,a);if(h)return{action:h,interactable:u,element:c}}}return{action:null,interactable:null,element:null}}function Wt(t,e,r,n,i){var a=[],s=[],l=n;function u(t){a.push(t),s.push(l)}for(;o.default.element(l);){a=[],s=[],i.interactables.forEachMatch(l,u);var c=Vt(t,e,r,a,s,n,i);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;l=x.parentNode(l)}return{action:null,interactable:null,element:null}}function Ht(t,e,r){var n=e.action,i=e.interactable,o=e.element;n=n||{name:null},t.interactable=i,t.element=o,(0,It.copyAction)(t.prepared,n),t.rect=i&&n.name?i.getRect(o):null,qt(t,r),r.fire("autoStart:prepared",{interaction:t})}function Yt(t,e,r,n){var i=t.options,o=i[r.name].max,a=i[r.name].maxPerElement,s=n.autoStart.maxInteractions,l=0,u=0,c=0;if(!(o&&a&&s))return!1;for(var f=0;f<n.interactions.list.length;f++){var h=n.interactions.list[f],d=h.prepared.name;if(h.interacting()){if(++l>=s)return!1;if(h.interactable===t){if((u+=d===r.name?1:0)>=o)return!1;if(h.element===e&&(c++,d===r.name&&c>=a))return!1}}}return s>0}function Xt(t,e){return o.default.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function Kt(t,e,r){var n=r.autoStart.cursorElement;n&&n!==t&&(n.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,r.autoStart.cursorElement=e?t:null}function qt(t,e){var r=t.interactable,n=t.element,i=t.prepared;if("mouse"===t.pointerType&&r&&r.options.styleCursor){var a="";if(i.name){var s=r.options[i.name].cursorChecker;a=o.default.func(s)?s(i,r,n,t._interacting):e.actions.map[i.name].getCursor(i)}Kt(t.element,a||"",e)}else e.autoStart.cursorElement&&Kt(e.autoStart.cursorElement,"",e)}Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.default=void 0;var $t={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,r=t.defaults;t.usePlugin(Gt.default),r.base.actionChecker=null,r.base.styleCursor=!0,(0,j.default)(r.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return Xt(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:Yt,cursorElement:null}},listeners:{"interactions:down":function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;r.interacting()||Ht(r,Wt(r,n,i,o,e),e)},"interactions:move":function(t,e){!function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;"mouse"!==r.pointerType||r.pointerIsDown||r.interacting()||Ht(r,Wt(r,n,i,o,e),e)}(t,e),function(t,e){var r=t.interaction;if(r.pointerIsDown&&!r.interacting()&&r.pointerWasMoved&&r.prepared.name){e.fire("autoStart:before-start",t);var n=r.interactable,i=r.prepared.name;i&&n&&(n.options[i].manualStart||!Yt(n,r.element,r.prepared,e)?r.stop():(r.start(r.prepared,n,r.element),qt(r,e)))}}(t,e)},"interactions:stop":function(t,e){var r=t.interaction,n=r.interactable;n&&n.options.styleCursor&&Kt(r.element,"",e)}},maxInteractions:Xt,withinInteractionLimit:Yt,validateAction:zt},Qt=$t;Bt.default=Qt;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=void 0;var Zt={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var r=t.interaction,n=t.eventTarget,i=t.dx,a=t.dy;if("drag"===r.prepared.name){var s=Math.abs(i),l=Math.abs(a),u=r.interactable.options.drag,c=u.startAxis,f=s>l?"x":s<l?"y":"xy";if(r.prepared.axis="start"===u.lockAxis?f[0]:u.lockAxis,"xy"!==f&&"xy"!==c&&c!==f){r.prepared.name=null;for(var h=n,d=function(t){if(t!==r.interactable){var i=r.interactable.options.drag;if(!i.manualStart&&t.testIgnoreAllow(i,h,n)){var o=t.getAction(r.downPointer,r.downEvent,r,h);if(o&&"drag"===o.name&&function(t,e){if(!e)return!1;var r=e.options.drag.startAxis;return"xy"===t||"xy"===r||r===t}(f,t)&&Bt.default.validateAction(o,t,h,n,e))return t}}};o.default.element(h);){var p=e.interactables.forEachMatch(h,d);if(p){r.prepared.name="drag",r.interactable=p,r.element=h;break}h=(0,x.parentNode)(h)}}}}}};Jt.default=Zt;var te={};function ee(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var r=t.interactable.options;return r[e].hold||r[e].delay}Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var re={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(Bt.default),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,r=ee(e);r>0&&(e.autoStartHoldTimer=setTimeout((function(){e.start(e.prepared,e.interactable,e.element)}),r))},"interactions:move":function(t){var e=t.interaction,r=t.duplicate;e.autoStartHoldTimer&&e.pointerWasMoved&&!r&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":function(t){var e=t.interaction;ee(e)>0&&(e.prepared.name=null)}},getHoldDuration:ee},ne=re;te.default=ne;var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0;var oe={id:"auto-start",install:function(t){t.usePlugin(Bt.default),t.usePlugin(te.default),t.usePlugin(Jt.default)}};ie.default=oe;var ae={};function se(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):o.default.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function le(t){var e=t.interaction,r=t.event;e.interactable&&e.interactable.checkAndPreventDefault(r)}function ue(t){var r=t.Interactable;r.prototype.preventDefault=se,r.prototype.checkAndPreventDefault=function(r){return function(t,r,n){var i=t.options.preventDefault;if("never"!==i)if("always"!==i){if(r.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var a=(0,e.getWindow)(n.target).document,s=r.getDocOptions(a);if(!s||!s.events||!1!==s.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||o.default.element(n.target)&&(0,x.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,r)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var r=0;r<t.interactions.list.length;r++){var n=t.interactions.list[r];if(n.element&&(n.element===e.target||(0,x.nodeContains)(n.element,e.target)))return void n.interactable.checkAndPreventDefault(e)}}})}Object.defineProperty(ae,"__esModule",{value:!0}),ae.default=void 0,ae.install=ue;var ce={id:"core/interactablePreventDefault",install:ue,listeners:["down","move","up","cancel"].reduce((function(t,e){return t["interactions:".concat(e)]=le,t}),{})};ae.default=ce;var fe={};Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0,fe.default={};var he,de={};Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0,function(t){t.touchAction="touchAction",t.boxSizing="boxSizing",t.noListeners="noListeners"}(he||(he={})),he.touchAction,he.boxSizing,he.noListeners,de.default={id:"dev-tools",install:function(){}};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=function t(e){var r={};for(var n in e){var i=e[n];o.default.plainObject(i)?r[n]=t(i):o.default.array(i)?r[n]=q.from(i):r[n]=i}return r};var ve={};function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ge(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function me(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0,ve.getRectOffset=we;var be=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,"states",[]),me(this,"startOffset",{left:0,right:0,top:0,bottom:0}),me(this,"startDelta",void 0),me(this,"result",void 0),me(this,"endResult",void 0),me(this,"edges",void 0),me(this,"interaction",void 0),this.interaction=e,this.result=_e()}var e,r;return e=t,(r=[{key:"start",value:function(t,e){var r=t.phase,n=this.interaction,i=function(t){var e=t.interactable.options[t.prepared.name],r=e.modifiers;return r&&r.length?r:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(t){var r=e[t];return r&&r.enabled&&{options:r,methods:r._methods}})).filter((function(t){return!!t}))}(n);this.prepareStates(i),this.edges=(0,j.default)({},n.edges),this.startOffset=we(n.rect,e),this.startDelta={x:0,y:0};var o=this.fillArg({phase:r,pageCoords:e,preEnd:!1});return this.result=_e(),this.startAll(o),this.result=this.setAll(o)}},{key:"fillArg",value:function(t){var e=this.interaction;return t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect=t.rect||e.rect,t.edges=this.edges,t.startOffset=this.startOffset,t}},{key:"startAll",value:function(t){for(var e=0;e<this.states.length;e++){var r=this.states[e];r.methods.start&&(t.state=r,r.methods.start(t))}}},{key:"setAll",value:function(t){var e=t.phase,r=t.preEnd,n=t.skipModifiers,i=t.rect;t.coords=(0,j.default)({},t.pageCoords),t.rect=(0,j.default)({},i);for(var o=n?this.states.slice(n):this.states,a=_e(t.coords,t.rect),s=0;s<o.length;s++){var l,u=o[s],c=u.options,f=(0,j.default)({},t.coords),h=null;null!=(l=u.methods)&&l.set&&this.shouldDo(c,r,e)&&(t.state=u,h=u.methods.set(t),M.addEdges(this.interaction.edges,t.rect,{x:t.coords.x-f.x,y:t.coords.y-f.y})),a.eventProps.push(h)}a.delta.x=t.coords.x-t.pageCoords.x,a.delta.y=t.coords.y-t.pageCoords.y,a.rectDelta.left=t.rect.left-i.left,a.rectDelta.right=t.rect.right-i.right,a.rectDelta.top=t.rect.top-i.top,a.rectDelta.bottom=t.rect.bottom-i.bottom;var d=this.result.coords,p=this.result.rect;if(d&&p){var v=a.rect.left!==p.left||a.rect.right!==p.right||a.rect.top!==p.top||a.rect.bottom!==p.bottom;a.changed=v||d.x!==a.coords.x||d.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(t){var e=this.interaction,r=t.phase,n=e.coords.cur,i=e.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===r&&(0,j.default)(this.startDelta,o.delta);for(var l=0;l<2;l++){var u=ye([[i,a],[n,s]][l],2),c=u[0],f=u[1];c.page.x+=f.x,c.page.y+=f.y,c.client.x+=f.x,c.client.y+=f.y}var h=this.result.rectDelta,d=t.rect||e.rect;d.left+=h.left,d.right+=h.right,d.top+=h.top,d.bottom+=h.bottom,d.width=d.right-d.left,d.height=d.bottom-d.top}},{key:"setAndApply",value:function(t){var e=this.interaction,r=t.phase,n=t.preEnd,i=t.skipModifiers,o=this.setAll(this.fillArg({preEnd:n,phase:r,pageCoords:t.modifiedCoords||e.coords.cur.page}));if(this.result=o,!o.changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var a=e.coords.cur.page,s={x:t.modifiedCoords.x-a.x,y:t.modifiedCoords.y-a.y};o.coords.x+=s.x,o.coords.y+=s.y,o.delta.x+=s.x,o.delta.y+=s.y}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,r=t.event,n=this.states;if(n&&n.length){for(var i=!1,o=0;o<n.length;o++){var a=n[o];t.state=a;var s=a.options,l=a.methods,u=l.beforeEnd&&l.beforeEnd(t);if(u)return this.endResult=u,!1;i=i||!i&&this.shouldDo(s,!0,t.phase,!0)}i&&e.move({event:r,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var r=(0,j.default)({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(r);for(var n=0;n<this.states.length;n++){var i=this.states[n];r.state=i,i.methods.stop&&i.methods.stop(r)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var r=t[e],n=r.options,i=r.methods,o=r.name;this.states.push({options:n,methods:i,index:e,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,r=e.coords,n=e.rect,i=e.modification;if(i.result){for(var o=i.startDelta,a=i.result,s=a.delta,l=a.rectDelta,u=[[r.start,o],[r.cur,s]],c=0;c<u.length;c++){var f=ye(u[c],2),h=f[0],d=f[1];h.page.x-=d.x,h.page.y-=d.y,h.client.x-=d.x,h.client.y-=d.y}n.left-=l.left,n.right-=l.right,n.top-=l.top,n.bottom-=l.bottom}}},{key:"shouldDo",value:function(t,e,r,n){return!(!t||!1===t.enabled||n&&!t.endOnly||t.endOnly&&!e||"start"===r&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.edges=t.edges,this.states=t.states.map((function(t){return(0,pe.default)(t)})),this.result=_e((0,j.default)({},t.result.coords),(0,j.default)({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _e(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function we(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}ve.default=be;var Se={};function xe(t){var e=t.iEvent,r=t.interaction.modification.result;r&&(e.modifiers=r.eventProps)}Object.defineProperty(Se,"__esModule",{value:!0}),Se.addEventModifiers=xe,Se.default=void 0,Se.makeModifier=function(t,e){var r=t.defaults,n={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=function(t){var i=t||{};for(var o in i.enabled=!1!==i.enabled,r)o in i||(i[o]=r[o]);var a={options:i,methods:n,name:e,enable:function(){return i.enabled=!0,a},disable:function(){return i.enabled=!1,a}};return a};return e&&"string"==typeof e&&(i._defaults=r,i._methods=n),i};var Pe={id:"modifiers/base",before:["actions"],install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new ve.default(e)},"interactions:before-action-start":function(t){var e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":function(t){return t.interaction.modification.setAndApply(t)},"interactions:before-action-end":function(t){return t.interaction.modification.beforeEnd(t)},"interactions:action-start":xe,"interactions:action-move":xe,"interactions:action-end":xe,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}}},ke=Pe;Se.default=ke;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.defaults=void 0,Oe.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var Ce={};function Te(t){return Te="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},Te(t)}function Ee(t,e){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ee(t,e)}function je(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function Re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.InteractEvent=void 0;var Ae=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ee(t,e)}(a,t);var e,r,n,i,o=(n=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Me(n);if(i){var r=Me(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return je(t)}(this,t)});function a(t,e,r,n,i,s,l){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Re(je(u=o.call(this,t)),"relatedTarget",null),Re(je(u),"screenX",void 0),Re(je(u),"screenY",void 0),Re(je(u),"button",void 0),Re(je(u),"buttons",void 0),Re(je(u),"ctrlKey",void 0),Re(je(u),"shiftKey",void 0),Re(je(u),"altKey",void 0),Re(je(u),"metaKey",void 0),Re(je(u),"page",void 0),Re(je(u),"client",void 0),Re(je(u),"delta",void 0),Re(je(u),"rect",void 0),Re(je(u),"x0",void 0),Re(je(u),"y0",void 0),Re(je(u),"t0",void 0),Re(je(u),"dt",void 0),Re(je(u),"duration",void 0),Re(je(u),"clientX0",void 0),Re(je(u),"clientY0",void 0),Re(je(u),"velocity",void 0),Re(je(u),"speed",void 0),Re(je(u),"swipe",void 0),Re(je(u),"axes",void 0),Re(je(u),"preEnd",void 0),i=i||t.element;var c=t.interactable,f=(c&&c.options||Oe.defaults).deltaSource,h=(0,D.default)(c,i,r),d="start"===n,p="end"===n,v=d?je(u):t.prevEvent,y=d?t.coords.start:p?{page:v.page,client:v.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return u.page=(0,j.default)({},y.page),u.client=(0,j.default)({},y.client),u.rect=(0,j.default)({},t.rect),u.timeStamp=y.timeStamp,p||(u.page.x-=h.x,u.page.y-=h.y,u.client.x-=h.x,u.client.y-=h.y),u.ctrlKey=e.ctrlKey,u.altKey=e.altKey,u.shiftKey=e.shiftKey,u.metaKey=e.metaKey,u.button=e.button,u.buttons=e.buttons,u.target=i,u.currentTarget=i,u.preEnd=s,u.type=l||r+(n||""),u.interactable=c,u.t0=d?t.pointers[t.pointers.length-1].downTime:v.t0,u.x0=t.coords.start.page.x-h.x,u.y0=t.coords.start.page.y-h.y,u.clientX0=t.coords.start.client.x-h.x,u.clientY0=t.coords.start.client.y-h.y,u.delta=d||p?{x:0,y:0}:{x:u[f].x-v[f].x,y:u[f].y-v[f].y},u.dt=t.coords.delta.timeStamp,u.duration=u.timeStamp-u.t0,u.velocity=(0,j.default)({},t.coords.velocity[f]),u.speed=(0,G.default)(u.velocity.x,u.velocity.y),u.swipe=p||"inertiastart"===n?u.getSwipe():null,u}return e=a,(r=[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var r=112.5<=e&&e<247.5,n=202.5<=e&&e<337.5;return{up:n,down:!n&&22.5<=e&&e<157.5,left:r,right:!r&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Y.BaseEvent);Ce.InteractEvent=Ae,Object.defineProperties(Ae.prototype,{pageX:{get:function(){return this.page.x},set:function(t){this.page.x=t}},pageY:{get:function(){return this.page.y},set:function(t){this.page.y=t}},clientX:{get:function(){return this.client.x},set:function(t){this.client.x=t}},clientY:{get:function(){return this.client.y},set:function(t){this.client.y=t}},dx:{get:function(){return this.delta.x},set:function(t){this.delta.x=t}},dy:{get:function(){return this.delta.y},set:function(t){this.delta.y=t}},velocityX:{get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},velocityY:{get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}});var De={};function Fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(De,"__esModule",{value:!0}),De.PointerInfo=void 0;var Ie=function(t,e,r){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Fe(this,"id",void 0),Fe(this,"pointer",void 0),Fe(this,"event",void 0),Fe(this,"downTime",void 0),Fe(this,"downTarget",void 0),this.id=e,this.pointer=r,this.event=n,this.downTime=i,this.downTarget=o}));De.PointerInfo=Ie;var Ge,Ne,Le={};function Ue(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Le,"__esModule",{value:!0}),Le.Interaction=void 0,Object.defineProperty(Le,"PointerInfo",{enumerable:!0,get:function(){return De.PointerInfo}}),Le.default=Le._ProxyValues=Le._ProxyMethods=void 0,Le._ProxyValues=Ge,function(t){t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy=""}(Ge||(Le._ProxyValues=Ge={})),Le._ProxyMethods=Ne,function(t){t.start="",t.move="",t.end="",t.stop="",t.interacting=""}(Ne||(Le._ProxyMethods=Ne={}));var Be=0,ze=function(){function t(e){var r=this,n=e.pointerType,i=e.scopeFire;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ue(this,"interactable",null),Ue(this,"element",null),Ue(this,"rect",null),Ue(this,"_rects",void 0),Ue(this,"edges",null),Ue(this,"_scopeFire",void 0),Ue(this,"prepared",{name:null,axis:null,edges:null}),Ue(this,"pointerType",void 0),Ue(this,"pointers",[]),Ue(this,"downEvent",null),Ue(this,"downPointer",{}),Ue(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Ue(this,"prevEvent",null),Ue(this,"pointerIsDown",!1),Ue(this,"pointerWasMoved",!1),Ue(this,"_interacting",!1),Ue(this,"_ending",!1),Ue(this,"_stopped",!0),Ue(this,"_proxy",null),Ue(this,"simulation",null),Ue(this,"doMove",(0,It.warnOnce)((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()")),Ue(this,"coords",{start:L.newCoords(),prev:L.newCoords(),cur:L.newCoords(),delta:L.newCoords(),velocity:L.newCoords()}),Ue(this,"_id",Be++),this._scopeFire=i,this.pointerType=n;var o=this;this._proxy={};var a=function(t){Object.defineProperty(r._proxy,t,{get:function(){return o[t]}})};for(var s in Ge)a(s);var l=function(t){Object.defineProperty(r._proxy,t,{value:function(){return o[t].apply(o,arguments)}})};for(var u in Ne)l(u);this._scopeFire("interactions:new",{interaction:this})}var e,r;return e=t,r=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(t,e,r){var n=this.updatePointer(t,e,r,!0),i=this.pointers[n];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:r,pointerIndex:n,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(t,e,r){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&((0,It.copyAction)(this.prepared,t),this.interactable=e,this.element=r,this.rect=e.getRect(r),this.edges=this.prepared.edges?(0,j.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,r){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,r,!1);var n,i,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(n=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,G.default)(n,i)>this.pointerMoveTolerance);var a=this.getPointerIndex(t),s={pointer:t,pointerIndex:a,pointerInfo:this.pointers[a],event:e,type:"move",eventTarget:r,dx:n,dy:i,duplicate:o,interaction:this};o||L.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),o||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&L.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||L.setZeroCoords(this.coords.delta),(t=(0,j.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,r,n){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,r,!1));var o=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:r,type:o,curEventTarget:n,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=L.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:q.findIndex(this.pointers,(function(t){return t.id===e}))}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,r,n){var i=L.getPointerId(t),o=this.getPointerIndex(t),a=this.pointers[o];return n=!1!==n&&(n||/(down|start)$/i.test(e.type)),a?a.pointer=t:(a=new De.PointerInfo(i,t,e,null,null),o=this.pointers.length,this.pointers.push(a)),L.setCoords(this.coords.cur,this.pointers.map((function(t){return t.pointer})),this._now()),L.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),n&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=r,L.pointerExtend(this.downPointer,t),this.interacting()||(L.copyCoords(this.coords.start,this.coords.cur),L.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,r),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:r,down:n,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(t,e){var r=this.getPointerIndex(t);if(-1!==r){var n=this.pointers[r];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:r,pointerInfo:n,interaction:this}),this.pointers.splice(r,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(t,e,r){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=r}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,r,n){return new Ce.InteractEvent(this,t,this.prepared.name,e,this.element,r,n)}},{key:"_fireEvent",value:function(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,r=t.phase,n=t.preEnd,i=t.type,o=this.rect;if(o&&"move"===r&&(M.addEdges(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(r),t))return!1;var a=t.iEvent=this._createPreparedEvent(e,r,n,i);return this._scopeFire("interactions:action-".concat(r),t),"start"===r&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(r),t),!0}},{key:"_now",value:function(){return Date.now()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Le.Interaction=ze;var Ve=ze;Le.default=Ve;var We={};function He(t){t.pointerIsDown&&(qe(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}function Ye(t){Xe(t.interaction)}function Xe(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;var e=t.offset.pending;return qe(t.coords.cur,e),qe(t.coords.delta,e),M.addEdges(t.edges,t.rect,e),e.x=0,e.y=0,!0}function Ke(t){var e=t.x,r=t.y;this.offset.pending.x+=e,this.offset.pending.y+=r,this.offset.total.x+=e,this.offset.total.y+=r}function qe(t,e){var r=t.page,n=t.client,i=e.x,o=e.y;r.x+=i,r.y+=o,n.x+=i,n.y+=o}Object.defineProperty(We,"__esModule",{value:!0}),We.addTotal=He,We.applyPending=Xe,We.default=void 0,Le._ProxyMethods.offsetBy="";var $e={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(t){t.Interaction.prototype.offsetBy=Ke},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return He(t.interaction)},"interactions:before-action-start":Ye,"interactions:before-action-move":Ye,"interactions:before-action-end":function(t){var e=t.interaction;if(Xe(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}},Qe=$e;We.default=Qe;var Je={};function Ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=Je.InertiaState=void 0;var tr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ze(this,"active",!1),Ze(this,"isModified",!1),Ze(this,"smoothEnd",!1),Ze(this,"allowResume",!1),Ze(this,"modification",void 0),Ze(this,"modifierCount",0),Ze(this,"modifierArg",void 0),Ze(this,"startCoords",void 0),Ze(this,"t0",0),Ze(this,"v0",0),Ze(this,"te",0),Ze(this,"targetOffset",void 0),Ze(this,"modifiedOffset",void 0),Ze(this,"currentOffset",void 0),Ze(this,"lambda_v0",0),Ze(this,"one_ve_v0",0),Ze(this,"timeout",void 0),Ze(this,"interaction",void 0),this.interaction=e}var e,r;return e=t,(r=[{key:"start",value:function(t){var e=this.interaction,r=er(e);if(!r||!r.enabled)return!1;var n=e.coords.velocity.client,i=(0,G.default)(n.x,n.y),o=this.modification||(this.modification=new ve.default(e));if(o.copyFrom(e.modification),this.t0=e._now(),this.allowResume=r.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg=o.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-e.coords.cur.timeStamp<50&&i>r.minSpeed&&i>r.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,r=er(this.interaction),n=r.resistance,i=-Math.log(r.endSpeed/this.v0)/n;this.targetOffset={x:(e.x-i)/n,y:(e.y-i)/n},this.te=i,this.lambda_v0=n/this.v0,this.one_ve_v0=1-r.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.onNextFrame((function(){return t.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return t.smoothEndTick()}))}},{key:"onNextFrame",value:function(t){var e=this;this.timeout=kt.default.request((function(){e.active&&t()}))}},{key:"inertiaTick",value:function(){var t,e,r,n,i,o=this,a=this.interaction,s=er(a).resistance,l=(a._now()-this.t0)/1e3;if(l<this.te){var u,c=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(t=this.targetOffset.x,e=this.targetOffset.y,r=this.modifiedOffset.x,n=this.modifiedOffset.y,u={x:nr(i=c,0,t,r),y:nr(i,0,e,n)}):u={x:this.targetOffset.x*c,y:this.targetOffset.y*c};var f={x:u.x-this.currentOffset.x,y:u.y-this.currentOffset.y};this.currentOffset.x+=f.x,this.currentOffset.y+=f.y,a.offsetBy(f),a.move(),this.onNextFrame((function(){return o.inertiaTick()}))}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,r=e._now()-this.t0,n=er(e).smoothEndDuration;if(r<n){var i={x:ir(r,0,this.targetOffset.x,n),y:ir(r,0,this.targetOffset.y,n)},o={x:i.x-this.currentOffset.x,y:i.y-this.currentOffset.y};this.currentOffset.x+=o.x,this.currentOffset.y+=o.y,e.offsetBy(o),e.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return t.smoothEndTick()}))}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,r=t.event,n=t.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(e,r,n,!0),i._doPhase({interaction:i,event:r,phase:"resume"}),(0,L.copyCoords)(i.coords.prev,i.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,kt.default.cancel(this.timeout)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function er(t){var e=t.interactable,r=t.prepared;return e&&e.options&&r.name&&e.options[r.name].inertia}Je.InertiaState=tr;var rr={id:"inertia",before:["modifiers","actions"],install:function(t){var e=t.defaults;t.usePlugin(We.default),t.usePlugin(Se.default),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new tr(e)},"interactions:before-action-end":function(t){var e=t.interaction,r=t.event;return(!e._interacting||e.simulation||!e.inertia.start(r))&&null},"interactions:down":function(t){var e=t.interaction,r=t.eventTarget,n=e.inertia;if(n.active)for(var i=r;o.default.element(i);){if(i===e.element){n.resume(t);break}i=x.parentNode(i)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":Se.addEventModifiers,"interactions:action-inertiastart":Se.addEventModifiers,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};function nr(t,e,r,n){var i=1-t;return i*i*e+2*i*t*r+t*t*n}function ir(t,e,r,n){return-r*(t/=n)*(t-2)+e}var or=rr;Je.default=or;var ar={};function sr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(t.immediatePropagationStopped)break;n(t)}}Object.defineProperty(ar,"__esModule",{value:!0}),ar.Eventable=void 0;var ur=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),sr(this,"options",void 0),sr(this,"types",{}),sr(this,"propagationStopped",!1),sr(this,"immediatePropagationStopped",!1),sr(this,"global",void 0),this.options=(0,j.default)({},e||{})}var e,r;return e=t,(r=[{key:"fire",value:function(t){var e,r=this.global;(e=this.types[t.type])&&lr(t,e),!t.propagationStopped&&r&&(e=r[t.type])&&lr(t,e)}},{key:"on",value:function(t,e){var r=(0,F.default)(t,e);for(t in r)this.types[t]=q.merge(this.types[t]||[],r[t])}},{key:"off",value:function(t,e){var r=(0,F.default)(t,e);for(t in r){var n=this.types[t];if(n&&n.length)for(var i=0;i<r[t].length;i++){var o=r[t][i],a=n.indexOf(o);-1!==a&&n.splice(a,1)}}}},{key:"getRect",value:function(t){return null}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();ar.Eventable=ur;var cr={};Object.defineProperty(cr,"__esModule",{value:!0}),cr.default=function(t,e){if(e.phaselessTypes[t])return!0;for(var r in e.map)if(0===t.indexOf(r)&&t.substr(r.length)in e.phases)return!0;return!1};var fr={};Object.defineProperty(fr,"__esModule",{value:!0}),fr.createInteractStatic=function(t){var e=function e(r,n){var i=t.interactables.get(r,n);return i||((i=t.interactables.new(r,n)).events.global=e.globalEvents),i};return e.getPointerAverage=L.pointerAverage,e.getTouchBBox=L.touchBBox,e.getTouchDistance=L.touchDistance,e.getTouchAngle=L.touchAngle,e.getElementRect=x.getElementRect,e.getElementClientRect=x.getElementClientRect,e.matchesSelector=x.matchesSelector,e.closest=x.closest,e.globalEvents={},e.version="1.10.17",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=(0,It.warnOnce)((function(t,e,r){if(o.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o.default.array(t)){for(var n=0;n<t.length;n++){var i=t[n];this.on(i,e,r)}return this}if(o.default.object(t)){for(var a in t)this.on(a,t[a],e);return this}return(0,cr.default)(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:r}),this}),"The interact.on() method is being deprecated"),e.off=(0,It.warnOnce)((function(t,e,r){if(o.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o.default.array(t)){for(var n=0;n<t.length;n++){var i=t[n];this.off(i,e,r)}return this}if(o.default.object(t)){for(var a in t)this.off(a,t[a],e);return this}var s;return(0,cr.default)(t,this.scope.actions)?t in this.globalEvents&&-1!==(s=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(s,1):this.scope.events.remove(this.scope.document,t,e,r),this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return _.default.supportsTouch},e.supportsPointerEvent=function(){return _.default.supportsPointerEvent},e.stop=function(){for(var t=0;t<this.scope.interactions.list.length;t++)this.scope.interactions.list[t].stop();return this},e.pointerMoveTolerance=function(t){return o.default.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e};var hr={};function dr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(hr,"__esModule",{value:!0}),hr.Interactable=void 0;var pr=function(){function t(r,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dr(this,"options",void 0),dr(this,"_actions",void 0),dr(this,"target",void 0),dr(this,"events",new ar.Eventable),dr(this,"_context",void 0),dr(this,"_win",void 0),dr(this,"_doc",void 0),dr(this,"_scopeEvents",void 0),dr(this,"_rectChecker",void 0),this._actions=n.actions,this.target=r,this._context=n.context||i,this._win=(0,e.getWindow)((0,x.trySelector)(r)?this._context:r),this._doc=this._win.document,this._scopeEvents=o,this.set(n)}var r,n;return r=t,(n=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(t,e){return o.default.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),o.default.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),o.default.func(e.onend)&&this.on("".concat(t,"end"),e.onend),o.default.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,r){(o.default.array(e)||o.default.object(e))&&this.off(t,e),(o.default.array(r)||o.default.object(r))&&this.on(t,r)}},{key:"setPerAction",value:function(t,e){var r=this._defaults;for(var n in e){var i=n,a=this.options[t],s=e[i];"listeners"===i&&this.updatePerActionListeners(t,a.listeners,s),o.default.array(s)?a[i]=q.from(s):o.default.plainObject(s)?(a[i]=(0,j.default)(a[i]||{},(0,pe.default)(s)),o.default.object(r.perAction[i])&&"enabled"in r.perAction[i]&&(a[i].enabled=!1!==s.enabled)):o.default.bool(s)&&o.default.object(r.perAction[i])?a[i].enabled=s:a[i]=s}}},{key:"getRect",value:function(t){return t=t||(o.default.element(this.target)?this.target:null),o.default.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,x.getElementRect)(t)}},{key:"rectChecker",value:function(t){var e=this;return o.default.func(t)?(this._rectChecker=t,this.getRect=function(t){var r=(0,j.default)({},e._rectChecker(t));return"width"in r||(r.width=r.right-r.left,r.height=r.bottom-r.top),r},this):null===t?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if((0,x.trySelector)(e)||o.default.object(e)){for(var r in this.options[t]=e,this._actions.map)this.options[r][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||(0,x.nodeContains)(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,r){return!this.testIgnore(t.ignoreFrom,e,r)&&this.testAllow(t.allowFrom,e,r)}},{key:"testAllow",value:function(t,e,r){return!t||!!o.default.element(r)&&(o.default.string(t)?(0,x.matchesUpTo)(r,t,e):!!o.default.element(t)&&(0,x.nodeContains)(t,r))}},{key:"testIgnore",value:function(t,e,r){return!(!t||!o.default.element(r))&&(o.default.string(t)?(0,x.matchesUpTo)(r,t,e):!!o.default.element(t)&&(0,x.nodeContains)(t,r))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,r,n){o.default.object(e)&&!o.default.array(e)&&(n=r,r=null);var i="on"===t?"add":"remove",a=(0,F.default)(e,r);for(var s in a){"wheel"===s&&(s=_.default.wheelEvent);for(var l=0;l<a[s].length;l++){var u=a[s][l];(0,cr.default)(s,this._actions)?this.events[t](s,u):o.default.string(this.target)?this._scopeEvents["".concat(i,"Delegate")](this.target,this._context,s,u,n):this._scopeEvents[i](this.target,s,u,n)}}return this}},{key:"on",value:function(t,e,r){return this._onOff("on",t,e,r)}},{key:"off",value:function(t,e,r){return this._onOff("off",t,e,r)}},{key:"set",value:function(t){var e=this._defaults;for(var r in o.default.object(t)||(t={}),this.options=(0,pe.default)(e.base),this._actions.methodDict){var n=r,i=this._actions.methodDict[n];this.options[n]={},this.setPerAction(n,(0,j.default)((0,j.default)({},e.perAction),e.actions[n])),this[i](t[n])}for(var a in t)o.default.func(this[a])&&this[a](t[a]);return this}},{key:"unset",value:function(){if(o.default.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],r=e.length-1;r>=0;r--){var n=e[r],i=n.selector,a=n.context,s=n.listeners;i===this.target&&a===this._context&&e.splice(r,1);for(var l=s.length-1;l>=0;l--)this._scopeEvents.removeDelegate(this.target,this._context,t,s[l][0],s[l][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();hr.Interactable=pr;var vr={};function yr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(vr,"__esModule",{value:!0}),vr.InteractableSet=void 0;var gr=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),yr(this,"list",[]),yr(this,"selectorMap",{}),yr(this,"scope",void 0),this.scope=e,e.addListeners({"interactable:unset":function(t){var e=t.interactable,n=e.target,i=e._context,a=o.default.string(n)?r.selectorMap[n]:n[r.scope.id],s=q.findIndex(a,(function(t){return t.context===i}));a[s]&&(a[s].context=null,a[s].interactable=null),a.splice(s,1)}})}var e,r;return e=t,(r=[{key:"new",value:function(t,e){e=(0,j.default)(e||{},{actions:this.scope.actions});var r=new this.scope.Interactable(t,e,this.scope.document,this.scope.events),n={context:r._context,interactable:r};return this.scope.addDocument(r._doc),this.list.push(r),o.default.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(r.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:r,win:this.scope._win}),r}},{key:"get",value:function(t,e){var r=e&&e.context||this.scope.document,n=o.default.string(t),i=n?this.selectorMap[t]:t[this.scope.id];if(!i)return null;var a=q.find(i,(function(e){return e.context===r&&(n||e.interactable.inContext(t))}));return a&&a.interactable}},{key:"forEachMatch",value:function(t,e){for(var r=0;r<this.list.length;r++){var n=this.list[r],i=void 0;if((o.default.string(n.target)?o.default.element(t)&&x.matchesSelector(t,n.target):t===n.target)&&n.inContext(t)&&(i=e(n)),void 0!==i)return i}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();vr.InteractableSet=gr;var mr={};function br(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(mr,"__esModule",{value:!0}),mr.default=void 0;var Sr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),br(this,"currentTarget",void 0),br(this,"originalEvent",void 0),br(this,"type",void 0),this.originalEvent=e,(0,N.default)(this,e)}var e,r;return e=t,(r=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xr(t){if(!o.default.object(t))return{capture:!!t,passive:!1};var e=(0,j.default)({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}var Pr={id:"events",install:function(t){var e,r=[],n={},i=[],a={add:s,remove:l,addDelegate:function(t,e,r,o,a){var l=xr(a);if(!n[r]){n[r]=[];for(var f=0;f<i.length;f++){var h=i[f];s(h,r,u),s(h,r,c,!0)}}var d=n[r],p=q.find(d,(function(r){return r.selector===t&&r.context===e}));p||(p={selector:t,context:e,listeners:[]},d.push(p)),p.listeners.push([o,l])},removeDelegate:function(t,e,r,i,o){var a,s=xr(o),f=n[r],h=!1;if(f)for(a=f.length-1;a>=0;a--){var d=f[a];if(d.selector===t&&d.context===e){for(var p=d.listeners,v=p.length-1;v>=0;v--){var y=_r(p[v],2),g=y[0],m=y[1],b=m.capture,_=m.passive;if(g===i&&b===s.capture&&_===s.passive){p.splice(v,1),p.length||(f.splice(a,1),l(e,r,u),l(e,r,c,!0)),h=!0;break}}if(h)break}}},delegateListener:u,delegateUseCapture:c,delegatedEvents:n,documents:i,targets:r,supportsOptions:!1,supportsPassive:!1};function s(t,e,n,i){var o=xr(i),s=q.find(r,(function(e){return e.eventTarget===t}));s||(s={eventTarget:t,events:{}},r.push(s)),s.events[e]||(s.events[e]=[]),t.addEventListener&&!q.contains(s.events[e],n)&&(t.addEventListener(e,n,a.supportsOptions?o:o.capture),s.events[e].push(n))}function l(t,e,n,i){var o=xr(i),s=q.findIndex(r,(function(e){return e.eventTarget===t})),u=r[s];if(u&&u.events)if("all"!==e){var c=!1,f=u.events[e];if(f){if("all"===n){for(var h=f.length-1;h>=0;h--)l(t,e,f[h],o);return}for(var d=0;d<f.length;d++)if(f[d]===n){t.removeEventListener(e,n,a.supportsOptions?o:o.capture),f.splice(d,1),0===f.length&&(delete u.events[e],c=!0);break}}c&&!Object.keys(u.events).length&&r.splice(s,1)}else for(e in u.events)u.events.hasOwnProperty(e)&&l(t,e,"all")}function u(t,e){for(var r=xr(e),i=new Sr(t),a=n[t.type],s=_r(L.getEventTargets(t),1)[0],l=s;o.default.element(l);){for(var u=0;u<a.length;u++){var c=a[u],f=c.selector,h=c.context;if(x.matchesSelector(l,f)&&x.nodeContains(h,s)&&x.nodeContains(h,l)){var d=c.listeners;i.currentTarget=l;for(var p=0;p<d.length;p++){var v=_r(d[p],2),y=v[0],g=v[1],m=g.capture,b=g.passive;m===r.capture&&b===r.passive&&y(i)}}}l=x.parentNode(l)}}function c(t){return u(t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),t.events=a,a}};mr.default=Pr;var kr={};Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=void 0;var Or={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<Or.methodOrder.length;e++){var r;r=Or.methodOrder[e];var n=Or[r](t);if(n)return n}return null},simulationResume:function(t){var e=t.pointerType,r=t.eventType,n=t.eventTarget,i=t.scope;if(!/down|start/i.test(r))return null;for(var o=0;o<i.interactions.list.length;o++){var a=i.interactions.list[o],s=n;if(a.simulation&&a.simulation.allowResume&&a.pointerType===e)for(;s;){if(s===a.element)return a;s=x.parentNode(s)}}return null},mouseOrPen:function(t){var e,r=t.pointerId,n=t.pointerType,i=t.eventType,o=t.scope;if("mouse"!==n&&"pen"!==n)return null;for(var a=0;a<o.interactions.list.length;a++){var s=o.interactions.list[a];if(s.pointerType===n){if(s.simulation&&!Cr(s,r))continue;if(s.interacting())return s;e||(e=s)}}if(e)return e;for(var l=0;l<o.interactions.list.length;l++){var u=o.interactions.list[l];if(!(u.pointerType!==n||/down/i.test(i)&&u.simulation))return u}return null},hasPointer:function(t){for(var e=t.pointerId,r=t.scope,n=0;n<r.interactions.list.length;n++){var i=r.interactions.list[n];if(Cr(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,r=t.scope,n=0;n<r.interactions.list.length;n++){var i=r.interactions.list[n];if(1===i.pointers.length){var o=i.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function Cr(t,e){return t.pointers.some((function(t){return t.id===e}))}var Tr=Or;kr.default=Tr;var Er={};function jr(t){return jr="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},jr(t)}function Mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Rr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Ar(t,e){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ar(t,e)}function Dr(t){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dr(t)}Object.defineProperty(Er,"__esModule",{value:!0}),Er.default=void 0;var Fr=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Ir(t,e){return function(r){var n=e.interactions.list,i=L.getPointerType(r),o=Mr(L.getEventTargets(r),2),a=o[0],s=o[1],l=[];if(/^touch/.test(r.type)){e.prevTouchTime=e.now();for(var u=0;u<r.changedTouches.length;u++){var c=r.changedTouches[u],f={pointer:c,pointerId:L.getPointerId(c),pointerType:i,eventType:r.type,eventTarget:a,curEventTarget:s,scope:e},h=Gr(f);l.push([f.pointer,f.eventTarget,f.curEventTarget,h])}}else{var d=!1;if(!_.default.supportsPointerEvent&&/mouse/.test(r.type)){for(var p=0;p<n.length&&!d;p++)d="mouse"!==n[p].pointerType&&n[p].pointerIsDown;d=d||e.now()-e.prevTouchTime<500||0===r.timeStamp}if(!d){var v={pointer:r,pointerId:L.getPointerId(r),pointerType:i,eventType:r.type,curEventTarget:s,eventTarget:a,scope:e},y=Gr(v);l.push([v.pointer,v.eventTarget,v.curEventTarget,y])}}for(var g=0;g<l.length;g++){var m=Mr(l[g],4),b=m[0],w=m[1],S=m[2];m[3][t](b,r,w,S)}}}function Gr(t){var e=t.pointerType,r=t.scope,n={interaction:kr.default.search(t),searchDetails:t};return r.fire("interactions:find",n),n.interaction||r.interactions.new({pointerType:e})}function Nr(t,e){var r=t.doc,n=t.scope,i=t.options,o=n.interactions.docEvents,a=n.events,s=a[e];for(var l in n.browser.isIOS&&!i.events&&(i.events={passive:!1}),a.delegatedEvents)s(r,l,a.delegateListener),s(r,l,a.delegateUseCapture,!0);for(var u=i&&i.events,c=0;c<o.length;c++){var f=o[c];s(r,f.type,f.listener,u)}}var Lr={id:"core/interactions",install:function(t){for(var e={},r=0;r<Fr.length;r++){var n=Fr[r];e[n]=Ir(n,t)}var i,o=_.default.pEventTypes;function a(){for(var e=0;e<t.interactions.list.length;e++){var r=t.interactions.list[e];if(r.pointerIsDown&&"touch"===r.pointerType&&!r._interacting)for(var n=function(){var e=r.pointers[i];t.documents.some((function(t){var r=t.doc;return(0,x.nodeContains)(r,e.downTarget)}))||r.removePointer(e.pointer,e.event)},i=0;i<r.pointers.length;i++)n()}}(i=y.default.PointerEvent?[{type:o.down,listener:a},{type:o.down,listener:e.pointerDown},{type:o.move,listener:e.pointerMove},{type:o.up,listener:e.pointerUp},{type:o.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:a},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var r=0;r<t.interactions.list.length;r++)t.interactions.list[r].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ar(t,e)}(s,e);var r,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Dr(i);if(o){var r=Dr(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return r=s,(n=[{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}},{key:"_now",value:function(){return t.now()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Le.default),t.interactions={list:[],new:function(e){e.scopeFire=function(e,r){return t.fire(e,r)};var r=new t.Interaction(e);return t.interactions.list.push(r),r},listeners:e,docEvents:i,pointerMoveTolerance:1},t.usePlugin(ae.default)},listeners:{"scope:add-document":function(t){return Nr(t,"add")},"scope:remove-document":function(t){return Nr(t,"remove")},"interactable:unset":function(t,e){for(var r=t.interactable,n=e.interactions.list.length-1;n>=0;n--){var i=e.interactions.list[n];i.interactable===r&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(n,1))}}},onDocSignal:Nr,doOnInteractions:Ir,methodNames:Fr},Ur=Lr;Er.default=Ur;var Br={};function zr(t){return zr="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},zr(t)}function Vr(){return Vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hr(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Vr.apply(this,arguments)}function Wr(t,e){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wr(t,e)}function Hr(t){return Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hr(t)}function Yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kr(t,e,r){return e&&Xr(t.prototype,e),r&&Xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Br,"__esModule",{value:!0}),Br.Scope=void 0,Br.initScope=Qr;var $r=function(){function t(){var e=this;Yr(this,t),qr(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),qr(this,"isInitialized",!1),qr(this,"listenerMaps",[]),qr(this,"browser",_.default),qr(this,"defaults",(0,pe.default)(Oe.defaults)),qr(this,"Eventable",ar.Eventable),qr(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),qr(this,"interactStatic",(0,fr.createInteractStatic)(this)),qr(this,"InteractEvent",Ce.InteractEvent),qr(this,"Interactable",void 0),qr(this,"interactables",new vr.InteractableSet(this)),qr(this,"_win",void 0),qr(this,"document",void 0),qr(this,"window",void 0),qr(this,"documents",[]),qr(this,"_plugins",{list:[],map:{}}),qr(this,"onWindowUnload",(function(t){return e.removeDocument(t.target)}));var r=this;this.Interactable=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wr(t,e)}(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Hr(e);if(n){var i=Hr(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return function(t,e){if(e&&("object"===zr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return Yr(this,o),i.apply(this,arguments)}return Kr(o,[{key:"_defaults",get:function(){return r.defaults}},{key:"set",value:function(t){return Vr(Hr(o.prototype),"set",this).call(this,t),r.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){Vr(Hr(o.prototype),"unset",this).call(this);var t=r.interactables.list.indexOf(this);t<0||(Vr(Hr(o.prototype),"unset",this).call(this),r.interactables.list.splice(t,1),r.fire("interactable:unset",{interactable:this}))}}]),o}(hr.Interactable)}return Kr(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var r=0;r<this.listenerMaps.length;r++){var n=this.listenerMaps[r].map[t];if(n&&!1===n(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:Qr(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var r=0,n=this.listenerMaps.length,i=t.before.reduce((function(t,e){return t[e]=!0,t[Jr(e)]=!0,t}),{});r<n;r++){var o=this.listenerMaps[r].id;if(i[o]||i[Jr(o)])break}this.listenerMaps.splice(r,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,r){if(-1!==this.getDocIndex(t))return!1;var n=e.getWindow(t);r=r?(0,j.default)({},r):{},this.documents.push({doc:t,options:r}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:r})}},{key:"removeDocument",value:function(t){var r=this.getDocIndex(t),n=e.getWindow(t),i=this.documents[r].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(r,1),this.events.documents.splice(r,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:i})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function Qr(t,r){return t.isInitialized=!0,o.default.window(r)&&e.init(r),y.default.init(r),_.default.init(r),kt.default.init(r),t.window=r,t.document=r.document,t.usePlugin(Er.default),t.usePlugin(mr.default),t}function Jr(t){return t&&t.replace(/\/.*$/,"")}Br.Scope=$r;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.default=void 0;var tn=new Br.Scope,en=tn.interactStatic;Zr.default=en;var rn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;tn.init(rn);var nn={};Object.defineProperty(nn,"__esModule",{value:!0}),nn.default=void 0,nn.default=function(){};var on={};Object.defineProperty(on,"__esModule",{value:!0}),on.default=void 0,on.default=function(){};var an={};function sn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ln(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ln(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(an,"__esModule",{value:!0}),an.default=void 0,an.default=function(t){var e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(e){var r=sn(e,2),n=r[0],i=r[1];return n in t||i in t})),r=function(r,n){for(var i=t.range,o=t.limits,a=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,s=t.offset,l=void 0===s?{x:0,y:0}:s,u={range:i,grid:t,x:null,y:null},c=0;c<e.length;c++){var f=sn(e[c],2),h=f[0],d=f[1],p=Math.round((r-l.x)/t[h]),v=Math.round((n-l.y)/t[d]);u[h]=Math.max(a.left,Math.min(a.right,p*t[h]+l.x)),u[d]=Math.max(a.top,Math.min(a.bottom,v*t[d]+l.y))}return u};return r.grid=t,r.coordFields=e,r};var un={};Object.defineProperty(un,"__esModule",{value:!0}),Object.defineProperty(un,"edgeTarget",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(un,"elements",{enumerable:!0,get:function(){return on.default}}),Object.defineProperty(un,"grid",{enumerable:!0,get:function(){return an.default}});var cn={};Object.defineProperty(cn,"__esModule",{value:!0}),cn.default=void 0;var fn={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=(0,j.default)(e.snappers||{},un),e.createSnapGrid=e.snappers.grid}},hn=fn;cn.default=hn;var dn={};function pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(r),!0).forEach((function(e){yn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=dn.aspectRatio=void 0;var gn={start:function(t){var e=t.state,r=t.rect,n=t.edges,i=t.pageCoords,o=e.options.ratio,a=e.options,s=a.equalDelta,l=a.modifiers;"preserve"===o&&(o=r.width/r.height),e.startCoords=(0,j.default)({},i),e.startRect=(0,j.default)({},r),e.ratio=o,e.equalDelta=s;var u=e.linkedEdges={top:n.top||n.left&&!n.bottom,left:n.left||n.top&&!n.right,bottom:n.bottom||n.right&&!n.top,right:n.right||n.bottom&&!n.left};if(e.xIsPrimaryAxis=!(!n.left&&!n.right),e.equalDelta){var c=(u.left?1:-1)*(u.top?1:-1);e.edgeSign={x:c,y:c}}else e.edgeSign={x:u.left?-1:1,y:u.top?-1:1};if((0,j.default)(t.edges,u),l&&l.length){var f=new ve.default(t.interaction);f.copyFrom(t.interaction.modification),f.prepareStates(l),e.subModification=f,f.startAll(vn({},t))}},set:function(t){var e=t.state,r=t.rect,n=t.coords,i=(0,j.default)({},n),o=e.equalDelta?mn:bn;if(o(e,e.xIsPrimaryAxis,n,r),!e.subModification)return null;var a=(0,j.default)({},r);(0,M.addEdges)(e.linkedEdges,a,{x:n.x-i.x,y:n.y-i.y});var s=e.subModification.setAll(vn(vn({},t),{},{rect:a,edges:e.linkedEdges,pageCoords:n,prevCoords:n,prevRect:a})),l=s.delta;return s.changed&&(o(e,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,j.default)(n,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function mn(t,e,r){var n=t.startCoords,i=t.edgeSign;e?r.y=n.y+(r.x-n.x)*i.y:r.x=n.x+(r.y-n.y)*i.x}function bn(t,e,r,n){var i=t.startRect,o=t.startCoords,a=t.ratio,s=t.edgeSign;if(e){var l=n.width/a;r.y=o.y+(l-i.height)*s.y}else{var u=n.height*a;r.x=o.x+(u-i.width)*s.x}}dn.aspectRatio=gn;var _n=(0,Se.makeModifier)(gn,"aspectRatio");dn.default=_n;var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.default=void 0;var Sn=function(){};Sn._defaults={};var xn=Sn;wn.default=xn;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0}),Object.defineProperty(Pn,"default",{enumerable:!0,get:function(){return wn.default}});var kn={};function On(t,e,r){return o.default.func(t)?M.resolveRectLike(t,e.interactable,e.element,[r.x,r.y,e]):M.resolveRectLike(t,e.interactable,e.element)}Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=void 0,kn.getRestrictionRect=On,kn.restrict=void 0;var Cn={start:function(t){var e=t.rect,r=t.startOffset,n=t.state,i=t.interaction,o=t.pageCoords,a=n.options,s=a.elementRect,l=(0,j.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(e&&s){var u=On(a.restriction,i,o);if(u){var c=u.right-u.left-e.width,f=u.bottom-u.top-e.height;c<0&&(l.left+=c,l.right+=c),f<0&&(l.top+=f,l.bottom+=f)}l.left+=r.left-e.width*s.left,l.top+=r.top-e.height*s.top,l.right+=r.right-e.width*(1-s.right),l.bottom+=r.bottom-e.height*(1-s.bottom)}n.offset=l},set:function(t){var e=t.coords,r=t.interaction,n=t.state,i=n.options,o=n.offset,a=On(i.restriction,r,e);if(a){var s=M.xywhToTlbr(a);e.x=Math.max(Math.min(s.right-o.right,e.x),s.left+o.left),e.y=Math.max(Math.min(s.bottom-o.bottom,e.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};kn.restrict=Cn;var Tn=(0,Se.makeModifier)(Cn,"restrict");kn.default=Tn;var En={};Object.defineProperty(En,"__esModule",{value:!0}),En.restrictEdges=En.default=void 0;var jn={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Mn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Rn(t,e){for(var r=["top","left","bottom","right"],n=0;n<r.length;n++){var i=r[n];i in t||(t[i]=e[i])}return t}var An={noInner:jn,noOuter:Mn,start:function(t){var e,r=t.interaction,n=t.startOffset,i=t.state,o=i.options;if(o){var a=(0,kn.getRestrictionRect)(o.offset,r,r.coords.start.page);e=M.rectToXY(a)}e=e||{x:0,y:0},i.offset={top:e.y+n.top,left:e.x+n.left,bottom:e.y-n.bottom,right:e.x-n.right}},set:function(t){var e=t.coords,r=t.edges,n=t.interaction,i=t.state,o=i.offset,a=i.options;if(r){var s=(0,j.default)({},e),l=(0,kn.getRestrictionRect)(a.inner,n,s)||{},u=(0,kn.getRestrictionRect)(a.outer,n,s)||{};Rn(l,jn),Rn(u,Mn),r.top?e.y=Math.min(Math.max(u.top+o.top,s.y),l.top+o.top):r.bottom&&(e.y=Math.max(Math.min(u.bottom+o.bottom,s.y),l.bottom+o.bottom)),r.left?e.x=Math.min(Math.max(u.left+o.left,s.x),l.left+o.left):r.right&&(e.x=Math.max(Math.min(u.right+o.right,s.x),l.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};En.restrictEdges=An;var Dn=(0,Se.makeModifier)(An,"restrictEdges");En.default=Dn;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.restrictRect=Fn.default=void 0;var In=(0,j.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},kn.restrict.defaults),Gn={start:kn.restrict.start,set:kn.restrict.set,defaults:In};Fn.restrictRect=Gn;var Nn=(0,Se.makeModifier)(Gn,"restrictRect");Fn.default=Nn;var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.restrictSize=Ln.default=void 0;var Un={width:-1/0,height:-1/0},Bn={width:1/0,height:1/0},zn={start:function(t){return En.restrictEdges.start(t)},set:function(t){var e=t.interaction,r=t.state,n=t.rect,i=t.edges,o=r.options;if(i){var a=M.tlbrToXywh((0,kn.getRestrictionRect)(o.min,e,t.coords))||Un,s=M.tlbrToXywh((0,kn.getRestrictionRect)(o.max,e,t.coords))||Bn;r.options={endOnly:o.endOnly,inner:(0,j.default)({},En.restrictEdges.noInner),outer:(0,j.default)({},En.restrictEdges.noOuter)},i.top?(r.options.inner.top=n.bottom-a.height,r.options.outer.top=n.bottom-s.height):i.bottom&&(r.options.inner.bottom=n.top+a.height,r.options.outer.bottom=n.top+s.height),i.left?(r.options.inner.left=n.right-a.width,r.options.outer.left=n.right-s.width):i.right&&(r.options.inner.right=n.left+a.width,r.options.outer.right=n.left+s.width),En.restrictEdges.set(t),r.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Ln.restrictSize=zn;var Vn=(0,Se.makeModifier)(zn,"restrictSize");Ln.default=Vn;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0}),Object.defineProperty(Wn,"default",{enumerable:!0,get:function(){return wn.default}});var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.snap=Hn.default=void 0;var Yn={start:function(t){var e,r=t.interaction,n=t.interactable,i=t.element,o=t.rect,a=t.state,s=t.startOffset,l=a.options,u=l.offsetWithOrigin?function(t){var e=t.interaction.element;return(0,M.rectToXY)((0,M.resolveRectLike)(t.state.options.origin,null,null,[e]))||(0,D.default)(t.interactable,e,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===l.offset)e={x:r.coords.start.page.x,y:r.coords.start.page.y};else{var c=(0,M.resolveRectLike)(l.offset,n,i,[r]);(e=(0,M.rectToXY)(c)||{x:0,y:0}).x+=u.x,e.y+=u.y}var f=l.relativePoints;a.offsets=o&&f&&f.length?f.map((function(t,r){return{index:r,relativePoint:t,x:s.left-o.width*t.x+e.x,y:s.top-o.height*t.y+e.y}})):[{index:0,relativePoint:null,x:e.x,y:e.y}]},set:function(t){var e=t.interaction,r=t.coords,n=t.state,i=n.options,a=n.offsets,s=(0,D.default)(e.interactable,e.element,e.prepared.name),l=(0,j.default)({},r),u=[];i.offsetWithOrigin||(l.x-=s.x,l.y-=s.y);for(var c=0;c<a.length;c++)for(var f=a[c],h=l.x-f.x,d=l.y-f.y,p=0,v=i.targets.length;p<v;p++){var y,g=i.targets[p];(y=o.default.func(g)?g(h,d,e._proxy,f,p):g)&&u.push({x:(o.default.number(y.x)?y.x:h)+f.x,y:(o.default.number(y.y)?y.y:d)+f.y,range:o.default.number(y.range)?y.range:i.range,source:g,index:p,offset:f})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<u.length;b++){var _=u[b],w=_.range,S=_.x-l.x,x=_.y-l.y,P=(0,G.default)(S,x),k=P<=w;w===1/0&&m.inRange&&m.range!==1/0&&(k=!1),m.target&&!(k?m.inRange&&w!==1/0?P/w<m.distance/m.range:w===1/0&&m.range!==1/0||P<m.distance:!m.inRange&&P<m.distance)||(m.target=_,m.distance=P,m.range=w,m.inRange=k,m.delta.x=S,m.delta.y=x)}return m.inRange&&(r.x=m.target.x,r.y=m.target.y),n.closest=m,m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Hn.snap=Yn;var Xn=(0,Se.makeModifier)(Yn,"snap");Hn.default=Xn;var Kn={};function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.snapSize=Kn.default=void 0;var $n={start:function(t){var e=t.state,r=t.edges,n=e.options;if(!r)return null;t.state={options:{targets:null,relativePoints:[{x:r.left?0:1,y:r.top?0:1}],offset:n.offset||"self",origin:{x:0,y:0},range:n.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],Hn.snap.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e,r=t.interaction,n=t.state,i=t.coords,a=n.options,s=n.offsets,l={x:i.x-s[0].x,y:i.y-s[0].y};n.options=(0,j.default)({},a),n.options.targets=[];for(var u=0;u<(a.targets||[]).length;u++){var c=(a.targets||[])[u],f=void 0;if(f=o.default.func(c)?c(l.x,l.y,r):c){for(var h=0;h<n.targetFields.length;h++){var d=function(t){if(Array.isArray(t))return t}(e=n.targetFields[h])||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),2!==o.length);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e)||function(t,e){if(t){if("string"==typeof t)return qn(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qn(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],v=d[1];if(p in f||v in f){f.x=f[p],f.y=f[v];break}}n.options.targets.push(f)}}var y=Hn.snap.set(t);return n.options=a,y},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Kn.snapSize=$n;var Qn=(0,Se.makeModifier)($n,"snapSize");Kn.default=Qn;var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.snapEdges=Jn.default=void 0;var Zn={start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],Kn.snapSize.start(t)):null},set:Kn.snapSize.set,defaults:(0,j.default)((0,pe.default)(Kn.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Jn.snapEdges=Zn;var ti=(0,Se.makeModifier)(Zn,"snapEdges");Jn.default=ti;var ei={};Object.defineProperty(ei,"__esModule",{value:!0}),Object.defineProperty(ei,"default",{enumerable:!0,get:function(){return wn.default}});var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),Object.defineProperty(ri,"default",{enumerable:!0,get:function(){return wn.default}});var ni={};Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=void 0;var ii={aspectRatio:dn.default,restrictEdges:En.default,restrict:kn.default,restrictRect:Fn.default,restrictSize:Ln.default,snapEdges:Jn.default,snap:Hn.default,snapSize:Kn.default,spring:ei.default,avoid:Pn.default,transform:ri.default,rubberband:Wn.default};ni.default=ii;var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.default=void 0;var ai={id:"modifiers",install:function(t){var e=t.interactStatic;for(var r in t.usePlugin(Se.default),t.usePlugin(cn.default),e.modifiers=ni.default,ni.default){var n=ni.default[r],i=n._defaults,o=n._methods;i._methods=o,t.defaults.perAction[r]=i}}},si=ai;oi.default=si;var li={};function ui(t){return ui="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},ui(t)}function ci(t,e){return ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ci(t,e)}function fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hi(t){return hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hi(t)}Object.defineProperty(li,"__esModule",{value:!0}),li.default=li.PointerEvent=void 0;var di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ci(t,e)}(a,t);var e,r,n,i,o=(n=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=hi(n);if(i){var r=hi(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fi(t)}(this,t)});function a(t,e,r,n,i,s){var l;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),l=o.call(this,i),L.pointerExtend(fi(l),r),r!==e&&L.pointerExtend(fi(l),e),l.timeStamp=s,l.originalEvent=r,l.type=t,l.pointerId=L.getPointerId(e),l.pointerType=L.getPointerType(e),l.target=n,l.currentTarget=null,"tap"===t){var u=i.getPointerIndex(e);l.dt=l.timeStamp-i.pointers[u].downTime;var c=l.timeStamp-i.tapTime;l.double=!!i.prevTap&&"doubletap"!==i.prevTap.type&&i.prevTap.target===l.target&&c<500}else"doubletap"===t&&(l.dt=e.timeStamp-i.tapTime,l.double=!0);return l}return e=a,(r=[{key:"_subtractOrigin",value:function(t){var e=t.x,r=t.y;return this.pageX-=e,this.pageY-=r,this.clientX-=e,this.clientY-=r,this}},{key:"_addOrigin",value:function(t){var e=t.x,r=t.y;return this.pageX+=e,this.pageY+=r,this.clientX+=e,this.clientY+=r,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Y.BaseEvent);li.PointerEvent=li.default=di;var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.default=void 0;var vi={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=vi,t.defaults.actions.pointerEvents=vi.defaults,(0,j.default)(t.actions.phaselessTypes,vi.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,r=t.pointerInfo;!e&&r.hold||(r.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;t.duplicate||r.pointerIsDown&&!r.pointerWasMoved||(r.pointerIsDown&&mi(t),yi({interaction:r,pointer:n,event:i,eventTarget:o,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.pointerIndex,s=r.pointers[a].hold,l=x.getPath(o),u={interaction:r,pointer:n,event:i,eventTarget:o,type:"hold",targets:[],path:l,node:null},c=0;c<l.length;c++){var f=l[c];u.node=f,e.fire("pointerEvents:collect-targets",u)}if(u.targets.length){for(var h=1/0,d=0;d<u.targets.length;d++){var p=u.targets[d].eventable.options.holdDuration;p<h&&(h=p)}s.duration=h,s.timeout=setTimeout((function(){yi({interaction:r,eventTarget:o,pointer:n,event:i,type:"hold"},e)}),h)}}(t,e),yi(t,e)},"interactions:up":function(t,e){mi(t),yi(t,e),function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;r.pointerWasMoved||yi({interaction:r,eventTarget:o,pointer:n,event:i,type:"tap"},e)}(t,e)},"interactions:cancel":function(t,e){mi(t),yi(t,e)}},PointerEvent:li.PointerEvent,fire:yi,collectEventTargets:gi,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function yi(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=t.targets,l=void 0===s?gi(t,e):s,u=new li.PointerEvent(a,n,i,o,r,e.now());e.fire("pointerEvents:new",{pointerEvent:u});for(var c={interaction:r,pointer:n,event:i,eventTarget:o,targets:l,type:a,pointerEvent:u},f=0;f<l.length;f++){var h=l[f];for(var d in h.props||{})u[d]=h.props[d];var p=(0,D.default)(h.eventable,h.node);if(u._subtractOrigin(p),u.eventable=h.eventable,u.currentTarget=h.node,h.eventable.fire(u),u._addOrigin(p),u.immediatePropagationStopped||u.propagationStopped&&f+1<l.length&&l[f+1].node!==u.currentTarget)break}if(e.fire("pointerEvents:fired",c),"tap"===a){var v=u.double?yi({interaction:r,pointer:n,event:i,eventTarget:o,type:"doubletap"},e):u;r.prevTap=v,r.tapTime=v.timeStamp}return u}function gi(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=r.getPointerIndex(n),l=r.pointers[s];if("tap"===a&&(r.pointerWasMoved||!l||l.downTarget!==o))return[];for(var u=x.getPath(o),c={interaction:r,pointer:n,event:i,eventTarget:o,type:a,path:u,targets:[],node:null},f=0;f<u.length;f++){var h=u[f];c.node=h,e.fire("pointerEvents:collect-targets",c)}return"hold"===a&&(c.targets=c.targets.filter((function(t){var e;return t.eventable.options.holdDuration===(null==(e=r.pointers[s])?void 0:e.hold.duration)}))),c.targets}function mi(t){var e=t.interaction,r=t.pointerIndex,n=e.pointers[r].hold;n&&n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}var bi=vi;pi.default=bi;var _i={};function wi(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}Object.defineProperty(_i,"__esModule",{value:!0}),_i.default=void 0;var Si={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(pi.default);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(t,e){return t["pointerEvents:".concat(e)]=wi,t}),{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var r=t.interaction,n=t.pointerEvent,i=t.eventTarget,o=t.targets;if("hold"===n.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(r.holdIntervalHandle=setTimeout((function(){e.pointerEvents.fire({interaction:r,eventTarget:i,type:"hold",pointer:n,event:n},e)}),a))}}})},xi=Si;_i.default=xi;var Pi={};function ki(t){return(0,j.default)(this.events.options,t),this}Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.default=void 0;var Oi={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=ki;var r=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var n=r.call(this,t,e);return n===this&&(this.events.options[t]=e),n}},listeners:{"pointerEvents:collect-targets":function(t,e){var r=t.targets,n=t.node,i=t.type,o=t.eventTarget;e.interactables.forEachMatch(n,(function(t){var e=t.events,a=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(a,n,o)&&r.push({node:n,eventable:e,props:{interactable:t}})}))},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var r=t.interactable,n=t.options;(0,j.default)(r.events.options,e.pointerEvents.defaults),(0,j.default)(r.events.options,n.pointerEvents||{})}}},Ci=Oi;Pi.default=Ci;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.default=void 0;var Ei={id:"pointer-events",install:function(t){t.usePlugin(pi),t.usePlugin(_i.default),t.usePlugin(Pi.default)}},ji=Ei;Ti.default=ji;var Mi={};function Ri(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,r){for(var n=o.default.string(t.target)?q.from(t._context.querySelectorAll(t.target)):[t.target],i=r.window.Promise,a=i?[]:null,s=function(){var o=n[l],s=t.getRect(o);if(!s)return"break";var u=q.find(r.interactions.list,(function(r){return r.interacting()&&r.interactable===t&&r.element===o&&r.prepared.name===e.name})),c=void 0;if(u)u.move(),a&&(c=u._reflowPromise||new i((function(t){u._reflowResolve=t})));else{var f=(0,M.tlbrToXywh)(s),h={page:{x:f.x,y:f.y},client:{x:f.x,y:f.y},timeStamp:r.now()},d=L.coordsToEvent(h);c=function(t,e,r,n,i){var o=t.interactions.new({pointerType:"reflow"}),a={interaction:o,event:i,pointer:i,eventTarget:r,phase:"reflow"};o.interactable=e,o.element=r,o.prevEvent=i,o.updatePointer(i,i,r,!0),L.setZeroCoords(o.coords.delta),(0,It.copyAction)(o.prepared,n),o._doPhase(a);var s=t.window.Promise,l=s?new s((function(t){o._reflowResolve=t})):void 0;return o._reflowPromise=l,o.start(n,e,r),o._interacting?(o.move(a),o.end(i)):(o.stop(),o._reflowResolve()),o.removePointer(i,i),l}(r,t,o,e,d)}a&&a.push(c)},l=0;l<n.length&&"break"!==s();l++);return a&&i.all(a).then((function(){return t}))}(this,e,t)}}Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.default=void 0,Mi.install=Ri;var Ai={id:"reflow",install:Ri,listeners:{"interactions:stop":function(t,e){var r=t.interaction;"reflow"===r.pointerType&&(r._reflowResolve&&r._reflowResolve(),q.remove(e.interactions.list,r))}}},Di=Ai;Mi.default=Di;var Fi={exports:{}};function Ii(t){return Ii="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},Ii(t)}Object.defineProperty(Fi.exports,"__esModule",{value:!0}),Fi.exports.default=void 0,Zr.default.use(ae.default),Zr.default.use(We.default),Zr.default.use(Ti.default),Zr.default.use(Je.default),Zr.default.use(oi.default),Zr.default.use(ie.default),Zr.default.use(xt.default),Zr.default.use(jt.default),Zr.default.use(Mi.default);var Gi=Zr.default;if(Fi.exports.default=Gi,"object"===Ii(Fi)&&Fi)try{Fi.exports=Zr.default}catch(t){}Zr.default.default=Zr.default,xt.default,jt.default,ie.default,ae.default,de.default,Je.default,Zr.default,oi.default,We.default,Ti.default,Mi.default,Fi=Fi.exports;var Ni={exports:{}};function Li(t){return Li="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},Li(t)}Object.defineProperty(Ni.exports,"__esModule",{value:!0}),Ni.exports.default=void 0;var Ui=Fi.default;if(Ni.exports.default=Ui,"object"===Li(Ni)&&Ni)try{Ni.exports=Fi.default}catch(t){}return Fi.default.default=Fi.default,Ni.exports},"object"==a(e)?t.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(e,n):r)||(t.exports=i))},6437:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var o=r(79),a=r(7343),s=o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return(new Date).getTime()},l=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:s(),frameRate:0},this.func=e,this.setLayers(r)}var e,r,n;return e=t,n=[{key:"_addAnimation",value:function(t){this.animations.push(t),this._handleAnimation()}},{key:"_removeAnimation",value:function(t){for(var e=t.id,r=this.animations,n=r.length,i=0;i<n;i++)if(r[i].id===e){this.animations.splice(i,1);break}}},{key:"_runFrames",value:function(){for(var t={},e=this.animations,r=0;r<e.length;r++){var n=e[r],i=n.layers,o=n.func;n._updateFrameObject(s());var a=i.length;if(!o||!1!==o.call(n,n.frame))for(var l=0;l<a;l++){var u=i[l];void 0!==u._id&&(t[u._id]=u)}}for(var c in t)t.hasOwnProperty(c)&&t[c].batchDraw()}},{key:"_animationLoop",value:function(){var e=t;e.animations.length?(e._runFrames(),a.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}},{key:"_handleAnimation",value:function(){this.animRunning||(this.animRunning=!0,a.Util.requestAnimFrame(this._animationLoop))}}],(r=[{key:"setLayers",value:function(t){var e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}},{key:"getLayers",value:function(){return this.layers}},{key:"addLayer",value:function(t){for(var e=this.layers,r=e.length,n=0;n<r;n++)if(e[n]._id===t._id)return!1;return this.layers.push(t),!0}},{key:"isRunning",value:function(){for(var e=t.animations,r=e.length,n=0;n<r;n++)if(e[n].id===this.id)return!0;return!1}},{key:"start",value:function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=s(),t._addAnimation(this),this}},{key:"stop",value:function(){return t._removeAnimation(this),this}},{key:"_updateFrameObject",value:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Animation=l,l.animations=[],l.animIdCounter=0,l.animRunning=!1},2882:(t,e)=>{"use strict";function r(t,e,r){var i=n(1,r,t),o=n(1,r,e),a=i*i+o*o;return Math.sqrt(a)}Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],e.getCubicArcLength=function(t,n,i){var o,a,s;o=i/2,a=0;for(var l=0;l<20;l++)s=o*e.tValues[20][l]+o,a+=e.cValues[20][l]*r(t,n,s);return o*a},e.getQuadraticArcLength=function(t,e,r){void 0===r&&(r=1);var n=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],a=2*e[1]-2*e[0],s=4*(n*n+i*i),l=4*(n*o+i*a),u=o*o+a*a;if(0===s)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var c=l/(2*s),f=r+c,h=u/s-c*c,d=f*f+h>0?Math.sqrt(f*f+h):0,p=c*c+h>0?Math.sqrt(c*c+h):0,v=c+Math.sqrt(c*c+h)!==0?h*Math.log(Math.abs((f+d)/(c+p))):0;return Math.sqrt(s)/2*(f*d-c*p+v)};var n=function t(r,n,i){var o,a,s=i.length-1;if(0===s)return 0;if(0===r){a=0;for(var l=0;l<=s;l++)a+=e.binomialCoefficients[s][l]*Math.pow(1-n,s-l)*Math.pow(n,l)*i[l];return a}o=new Array(s);for(var u=0;u<s;u++)o[u]=s*(i[u+1]-i[u]);return t(r-1,n,o)};e.t2length=function(t,e,r){for(var n=1,i=t/e,o=(t-r(i))/e,a=0;n>.001;){var s=r(i+o),l=Math.abs(t-s)/e;if(l<n)n=l,i+=o;else{var u=r(i-o),c=Math.abs(t-u)/e;c<n?(n=c,i-=o):o/=2}if(++a>500)break}return i}},2138:(t,e,r)=>{"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=s(t);if(e){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}(this,r)}}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===l(i)?i:String(i)),n)}var i}function f(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;var h,d=r(7343),p=r(7046),v=r(79),y=r(9489),g=r(8509),m=function(){function t(e){u(this,t),this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var r=(e||{}).pixelRatio||v.Konva.pixelRatio||function(){if(h)return h;var t=d.Util.createCanvasElement(),e=t.getContext("2d");return h=(v.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),d.Util.releaseCanvas(t),h}();this.pixelRatio=r,this._canvas=d.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return f(t,[{key:"getContext",value:function(){return this.context}},{key:"getPixelRatio",value:function(){return this.pixelRatio}},{key:"setPixelRatio",value:function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}},{key:"setWidth",value:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"setHeight",value:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setSize",value:function(t,e){this.setWidth(t||0),this.setHeight(e||0)}},{key:"toDataURL",value:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return d.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}]),t}();e.Canvas=m,y.Factory.addGetterSetter(m,"pixelRatio",void 0,(0,g.getNumberValidator)());var b=function(t){n(r,t);var e=o(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0,willReadFrequently:!1};return u(this,r),(t=e.call(this,n)).context=new p.SceneContext(a(t),{willReadFrequently:n.willReadFrequently}),t.setSize(n.width,n.height),t}return f(r)}(m);e.SceneCanvas=b;var _=function(t){n(r,t);var e=o(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};return u(this,r),(t=e.call(this,n)).hitCanvas=!0,t.context=new p.HitContext(a(t)),t.setSize(n.width,n.height),t}return f(r)}(m);e.HitCanvas=_},6937:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},a.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var u=r(9489),c=r(6039),f=r(8509),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(d,t);var e,r,u,f,h=(u=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(u);if(f){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(t=h.apply(this,arguments)).children=[],t}return e=d,r=[{key:"getChildren",value:function(t){if(!t)return this.children||[];var e=this.children||[],r=[];return e.forEach((function(e){t(e)&&r.push(e)})),r}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"removeChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}},{key:"destroyChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}},{key:"add",value:function(){if(0===arguments.length)return this;if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(t<0||arguments.length<=t?void 0:arguments[t]);return this}var e=arguments.length<=0?void 0:arguments[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}},{key:"destroy",value:function(){return this.hasChildren()&&this.destroyChildren(),a(l(d.prototype),"destroy",this).call(this),this}},{key:"find",value:function(t){return this._generalFind(t,!1)}},{key:"findOne",value:function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}},{key:"_generalFind",value:function(t,e){var r=[];return this._descendants((function(n){var i=n._isMatch(t);return i&&r.push(n),!(!i||!e)})),r}},{key:"_descendants",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}(this.getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;if(t(n))return!0;if(n.hasChildren()&&n._descendants(t))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"toObject",value:function(){var t=c.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((function(e){t.children.push(e.toObject())})),t}},{key:"isAncestorOf",value:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}},{key:"clone",value:function(t){var e=c.Node.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}},{key:"getAllIntersections",value:function(t){var e=[];return this.find("Shape").forEach((function(r){r.isVisible()&&r.intersects(t)&&e.push(r)})),e}},{key:"_clearSelfAndDescendantCache",value:function(t){var e;a(l(d.prototype),"_clearSelfAndDescendantCache",this).call(this,t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}},{key:"_setChildrenIndices",value:function(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}},{key:"drawScene",value:function(t,e){var r=this.getLayer(),n=t||r&&r.getCanvas(),i=n&&n.getContext(),o=this._getCanvasCache(),a=o&&o.scene,s=n&&n.isCache;if(!this.isVisible()&&!s)return this;if(a){i.save();var l=this.getAbsoluteTransform(e).getMatrix();i.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(i),i.restore()}else this._drawChildren("drawScene",n,e);return this}},{key:"drawHit",value:function(t,e){if(!this.shouldDrawHit(e))return this;var r=this.getLayer(),n=t||r&&r.hitCanvas,i=n&&n.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();var a=this.getAbsoluteTransform(e).getMatrix();i.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",n,e);return this}},{key:"_drawChildren",value:function(t,e,r){var n,i=e&&e.getContext(),o=this.clipWidth(),a=this.clipHeight(),s=this.clipFunc(),l=o&&a||s,u=r===this;if(l){i.save();var c,f=this.getAbsoluteTransform(r),h=f.getMatrix();if(i.transform(h[0],h[1],h[2],h[3],h[4],h[5]),i.beginPath(),s)c=s.call(this,i,this);else{var d=this.clipX(),p=this.clipY();i.rect(d,p,o,a)}i.clip.apply(i,c),h=f.copy().invert().getMatrix(),i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}var v=!u&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;v&&(i.save(),i._applyGlobalCompositeOperation(this)),null===(n=this.children)||void 0===n||n.forEach((function(n){n[t](e,r)})),v&&i.restore(),l&&i.restore()}},{key:"getClientRect",value:function(){var t,e,r,n,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.skipTransform,l=a.relativeTo,u=this;null===(t=this.children)||void 0===t||t.forEach((function(t){if(t.visible()){var o=t.getClientRect({relativeTo:u,skipShadow:a.skipShadow,skipStroke:a.skipStroke});0===o.width&&0===o.height||(void 0===e?(e=o.x,r=o.y,n=o.x+o.width,i=o.y+o.height):(e=Math.min(e,o.x),r=Math.min(r,o.y),n=Math.max(n,o.x+o.width),i=Math.max(i,o.y+o.height)))}}));for(var c=this.find("Shape"),f=!1,h=0;h<c.length;h++)if(c[h]._isVisible(this)){f=!0;break}return o=f&&void 0!==e?{x:e,y:r,width:n-e,height:i-r}:{x:0,y:0,width:0,height:0},s?o:this._transformedRect(o,l)}}],r&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),d}(c.Node);e.Container=h,u.Factory.addComponentsGetterSetter(h,"clip",["x","y","width","height"]),u.Factory.addGetterSetter(h,"clipX",void 0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(h,"clipY",void 0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(h,"clipWidth",void 0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(h,"clipHeight",void 0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(h,"clipFunc")},7046:(t,e,r)=>{"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=a(t);if(e){var i=a(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(i)?i:String(i)),n)}var i}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;var f=r(7343),h=r(79),d=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=function(){function t(e){l(this,t),this.canvas=e,h.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return c(t,[{key:"fillShape",value:function(t){t.fillEnabled()&&this._fill(t)}},{key:"_fill",value:function(t){}},{key:"strokeShape",value:function(t){t.hasStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){}},{key:"fillStrokeShape",value:function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}},{key:"getTrace",value:function(t,e){var r,n,i,o,a=this.traceArr,s=a.length,l="";for(r=0;r<s;r++)(i=(n=a[r]).method)?(o=n.args,l+=i,t?l+="()":f.Util._isArray(o[0])?l+="(["+o.join(",")+"])":(e&&(o=o.map((function(t){return"number"==typeof t?Math.floor(t):t}))),l+="("+o.join(",")+")")):(l+=n.property,t||(l+="="+n.val)),l+=";";return l}},{key:"clearTrace",value:function(){this.traceArr=[]}},{key:"_trace",value:function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}},{key:"reset",value:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"clear",value:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}},{key:"_applyLineCap",value:function(t){var e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}},{key:"_applyOpacity",value:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}},{key:"_applyLineJoin",value:function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}},{key:"setAttr",value:function(t,e){this._context[t]=e}},{key:"arc",value:function(t,e,r,n,i,o){this._context.arc(t,e,r,n,i,o)}},{key:"arcTo",value:function(t,e,r,n,i){this._context.arcTo(t,e,r,n,i)}},{key:"beginPath",value:function(){this._context.beginPath()}},{key:"bezierCurveTo",value:function(t,e,r,n,i,o){this._context.bezierCurveTo(t,e,r,n,i,o)}},{key:"clearRect",value:function(t,e,r,n){this._context.clearRect(t,e,r,n)}},{key:"clip",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._context.clip.apply(this._context,e)}},{key:"closePath",value:function(){this._context.closePath()}},{key:"createImageData",value:function(t,e){var r=arguments;return 2===r.length?this._context.createImageData(t,e):1===r.length?this._context.createImageData(t):void 0}},{key:"createLinearGradient",value:function(t,e,r,n){return this._context.createLinearGradient(t,e,r,n)}},{key:"createPattern",value:function(t,e){return this._context.createPattern(t,e)}},{key:"createRadialGradient",value:function(t,e,r,n,i,o){return this._context.createRadialGradient(t,e,r,n,i,o)}},{key:"drawImage",value:function(t,e,r,n,i,o,a,s,l){var u=arguments,c=this._context;3===u.length?c.drawImage(t,e,r):5===u.length?c.drawImage(t,e,r,n,i):9===u.length&&c.drawImage(t,e,r,n,i,o,a,s,l)}},{key:"ellipse",value:function(t,e,r,n,i,o,a,s){this._context.ellipse(t,e,r,n,i,o,a,s)}},{key:"isPointInPath",value:function(t,e,r,n){return r?this._context.isPointInPath(r,t,e,n):this._context.isPointInPath(t,e,n)}},{key:"fill",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._context.fill.apply(this._context,e)}},{key:"fillRect",value:function(t,e,r,n){this._context.fillRect(t,e,r,n)}},{key:"strokeRect",value:function(t,e,r,n){this._context.strokeRect(t,e,r,n)}},{key:"fillText",value:function(t,e,r,n){n?this._context.fillText(t,e,r,n):this._context.fillText(t,e,r)}},{key:"measureText",value:function(t){return this._context.measureText(t)}},{key:"getImageData",value:function(t,e,r,n){return this._context.getImageData(t,e,r,n)}},{key:"lineTo",value:function(t,e){this._context.lineTo(t,e)}},{key:"moveTo",value:function(t,e){this._context.moveTo(t,e)}},{key:"rect",value:function(t,e,r,n){this._context.rect(t,e,r,n)}},{key:"putImageData",value:function(t,e,r){this._context.putImageData(t,e,r)}},{key:"quadraticCurveTo",value:function(t,e,r,n){this._context.quadraticCurveTo(t,e,r,n)}},{key:"restore",value:function(){this._context.restore()}},{key:"rotate",value:function(t){this._context.rotate(t)}},{key:"save",value:function(){this._context.save()}},{key:"scale",value:function(t,e){this._context.scale(t,e)}},{key:"setLineDash",value:function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}},{key:"getLineDash",value:function(){return this._context.getLineDash()}},{key:"setTransform",value:function(t,e,r,n,i,o){this._context.setTransform(t,e,r,n,i,o)}},{key:"stroke",value:function(t){t?this._context.stroke(t):this._context.stroke()}},{key:"strokeText",value:function(t,e,r,n){this._context.strokeText(t,e,r,n)}},{key:"transform",value:function(t,e,r,n,i,o){this._context.transform(t,e,r,n,i,o)}},{key:"translate",value:function(t,e){this._context.translate(t,e)}},{key:"_enableTrace",value:function(){var t,e,r=this,n=d.length,i=this.setAttr,o=function(t){var n,i=r[t];r[t]=function(){return e=function(t){var e,r,n=[],i=t.length,o=f.Util;for(e=0;e<i;e++)r=t[e],o._isNumber(r)?r=Math.round(1e3*r)/1e3:o._isString(r)||(r+=""),n.push(r);return n}(Array.prototype.slice.call(arguments,0)),n=i.apply(r,arguments),r._trace({method:t,args:e}),n}};for(t=0;t<n;t++)o(d[t]);r.setAttr=function(){i.apply(r,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),r._trace({property:t,val:e})}}},{key:"_applyGlobalCompositeOperation",value:function(t){var e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}]),t}();e.Context=p,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(p.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var v=function(t){n(r,t);var e=o(r);function r(t){var n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).willReadFrequently,o=void 0!==i&&i;return l(this,r),(n=e.call(this,t))._context=t._canvas.getContext("2d",{willReadFrequently:o}),n}return c(r,[{key:"_fillColor",value:function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}},{key:"_fillPattern",value:function(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}},{key:"_fillLinearGradient",value:function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fillRadialGradient",value:function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fill",value:function(t){var e=t.fill(),r=t.getFillPriority();if(e&&"color"===r)this._fillColor(t);else{var n=t.getFillPatternImage();if(n&&"pattern"===r)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===r)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===r?this._fillRadialGradient(t):e?this._fillColor(t):n?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}}},{key:"_strokeLinearGradient",value:function(t){var e=t.getStrokeLinearGradientStartPoint(),r=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,r.x,r.y);if(n){for(var o=0;o<n.length;o+=2)i.addColorStop(n[o],n[o+1]);this.setAttr("strokeStyle",i)}}},{key:"_stroke",value:function(t){var e=t.dash(),r=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!r){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),r||this.restore()}}},{key:"_applyShadow",value:function(t){var e,r,n,i=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",o=null!==(r=t.getShadowBlur())&&void 0!==r?r:5,a=null!==(n=t.getShadowOffset())&&void 0!==n?n:{x:0,y:0},s=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),u=s.x*l,c=s.y*l;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(u),Math.abs(c))),this.setAttr("shadowOffsetX",a.x*u),this.setAttr("shadowOffsetY",a.y*c)}}]),r}(p);e.SceneContext=v;var y=function(t){n(r,t);var e=o(r);function r(t){var n;return l(this,r),(n=e.call(this,t))._context=t._canvas.getContext("2d",{willReadFrequently:!0}),n}return c(r,[{key:"_fill",value:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}},{key:"strokeShape",value:function(t){t.hasHitStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),i="auto"===n?t.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}]),r}(p);e.HitContext=y},1131:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;var n=r(79),i=r(7343);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){var r=[];e.DD._dragElements.forEach((function(e,n){var o=e.node,a=o.getStage();a.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var s=a._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(s){if("dragging"!==e.dragStatus){var l=o.dragDistance();if(Math.max(Math.abs(s.x-e.startPointerPos.x),Math.abs(s.y-e.startPointerPos.y))<l)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,e),r.push(o)}})),r.forEach((function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore:function(t){var r=[];e.DD._dragElements.forEach((function(i){var o=i.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===i.pointerId}))){"dragging"!==i.dragStatus&&"stopped"!==i.dragStatus||(e.DD.justDragged=!0,n.Konva._mouseListenClick=!1,n.Konva._touchListenClick=!1,n.Konva._pointerListenClick=!1,i.dragStatus="stopped");var a=i.node.getLayer()||i.node instanceof n.Konva.Stage&&i.node;a&&-1===r.indexOf(a)&&r.push(a)}})),r.forEach((function(t){t.draw()}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(r,n){"stopped"===r.dragStatus&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:t},!0),"dragging"!==r.dragStatus&&e.DD._dragElements.delete(n)}))}},n.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},9489:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;var n=r(7343),i=r(8509),o="get",a="set";e.Factory={addGetterSetter:function(t,r,n,i,o){e.Factory.addGetter(t,r,n),e.Factory.addSetter(t,r,i,o),e.Factory.addOverloadedGetterSetter(t,r)},addGetter:function(t,e,r){var i=o+n.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?r:t}},addSetter:function(t,r,i,o){var s=a+n.Util._capitalize(r);t.prototype[s]||e.Factory.overWriteSetter(t,r,i,o)},overWriteSetter:function(t,e,r,i){var o=a+n.Util._capitalize(e);t.prototype[o]=function(t){return r&&null!=t&&(t=r.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,r,s,l,u){var c,f,h=s.length,d=n.Util._capitalize,p=o+d(r),v=a+d(r);t.prototype[p]=function(){var t={};for(c=0;c<h;c++)t[f=s[c]]=this.getAttr(r+d(f));return t};var y=(0,i.getComponentValidator)(s);t.prototype[v]=function(t){var e,n=this,i=this.attrs[r];for(e in l&&(t=l.call(this,t)),y&&y.call(this,t,r),t)t.hasOwnProperty(e)&&this._setAttr(r+d(e),t[e]);return t||s.forEach((function(t){n._setAttr(r+d(t),void 0)})),this._fireChangeEvent(r,i,t),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(t,r)},addOverloadedGetterSetter:function(t,e){var r=n.Util._capitalize(e),i=a+r,s=o+r;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter:function(t,r,i,a){n.Util.error("Adding deprecated "+r);var s=o+n.Util._capitalize(r),l=r+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){n.Util.error(l);var t=this.attrs[r];return void 0===t?i:t},e.Factory.addSetter(t,r,a,(function(){n.Util.error(l)})),e.Factory.addOverloadedGetterSetter(t,r)},backCompat:function(t,e){n.Util.each(e,(function(e,r){var i=t.prototype[r],s=o+n.Util._capitalize(e),l=a+n.Util._capitalize(e);function u(){i.apply(this,arguments),n.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[e]=u,t.prototype[s]=u,t.prototype[l]=u}))},afterSetFilter:function(){this._filterUpToDate=!1}}},8576:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;var a=r(7343),s=r(7979),l=r(79),u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(u,t);var e,r,s,l=(r=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=o(r);if(s){var i=o(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this,t)).listening(!1),a.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),e}return e=u,Object.defineProperty(e,"prototype",{writable:!1}),e}(s.Layer);e.FastLayer=u,u.prototype.nodeType="FastLayer",(0,l._registerNode)(u)},79:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;var n=Math.PI/180;e.glob=void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.2.1",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*n:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t}},e._registerNode=function(t){e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)},7828:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var s=r(7343),l=r(6937),u=r(79),c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,l,u,c=(l=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(l);if(u){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.apply(this,arguments)}return e=f,(r=[{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&s.Util.throw("You may only add groups and shapes to groups.")}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(l.Container);e.Group=c,c.prototype.nodeType="Group",(0,u._registerNode)(c)},7979:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var l=r(7343),u=r(6937),c=r(6039),f=r(9489),h=r(2138),d=r(8509),p=r(8442),v=r(79),y=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=y.length,m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(m,t);var e,r,f,d,v=(f=m,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(f);if(d){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function m(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(e=v.call(this,t)).canvas=new h.SceneCanvas,e.hitCanvas=new h.HitCanvas({pixelRatio:1}),e._waitingForDraw=!1,e.on("visibleChange.konva",e._checkVisibility),e._checkVisibility(),e.on("imageSmoothingEnabledChange.konva",e._setSmoothEnabled),e._setSmoothEnabled(),e}return e=m,(r=[{key:"createPNGStream",value:function(){return this.canvas._canvas.createPNGStream()}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getNativeCanvasElement",value:function(){return this.canvas._canvas}},{key:"getHitCanvas",value:function(){return this.hitCanvas}},{key:"getContext",value:function(){return this.getCanvas().getContext()}},{key:"clear",value:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}},{key:"setZIndex",value:function(t){o(s(m.prototype),"setZIndex",this).call(this,t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}},{key:"moveToTop",value:function(){c.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}},{key:"moveUp",value:function(){if(!c.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content||(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),0))}},{key:"moveDown",value:function(){if(c.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}},{key:"moveToBottom",value:function(){if(c.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}},{key:"getLayer",value:function(){return this}},{key:"remove",value:function(){var t=this.getNativeCanvasElement();return c.Node.prototype.remove.call(this),t&&t.parentNode&&l.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}},{key:"getStage",value:function(){return this.parent}},{key:"setSize",value:function(t){var e=t.width,r=t.height;return this.canvas.setSize(e,r),this.hitCanvas.setSize(e,r),this._setSmoothEnabled(),this}},{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&l.Util.throw("You may only add groups and shapes to a layer.")}},{key:"_toKonvaCanvas",value:function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),c.Node.prototype._toKonvaCanvas.call(this,t)}},{key:"_checkVisibility",value:function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}},{key:"_setSmoothEnabled",value:function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}},{key:"getWidth",value:function(){if(this.parent)return this.parent.width()}},{key:"setWidth",value:function(){l.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}},{key:"getHeight",value:function(){if(this.parent)return this.parent.height()}},{key:"setHeight",value:function(){l.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}},{key:"batchDraw",value:function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,l.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this}},{key:"getIntersection",value:function(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,r=!1;;){for(var n=0;n<g;n++){var i=y[n],o=this._getIntersection({x:t.x+i.x*e,y:t.y+i.y*e}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(!r)return null;e+=1}}},{key:"_getIntersection",value:function(t){var e=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,n=r[3];if(255===n){var i=l.Util._rgbToHex(r[0],r[1],r[2]),o=p.shapes["#"+i];return o?{shape:o}:{antialiased:!0}}return n>0?{antialiased:!0}:{}}},{key:"drawScene",value:function(t,e){var r=this.getLayer(),n=t||r&&r.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),u.Container.prototype.drawScene.call(this,n,e),this._fire("draw",{node:this}),this}},{key:"drawHit",value:function(t,e){var r=this.getLayer(),n=t||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),u.Container.prototype.drawHit.call(this,n,e),this}},{key:"enableHitGraph",value:function(){return this.hitGraphEnabled(!0),this}},{key:"disableHitGraph",value:function(){return this.hitGraphEnabled(!1),this}},{key:"setHitGraphEnabled",value:function(t){l.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}},{key:"getHitGraphEnabled",value:function(t){return l.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}},{key:"toggleHitCanvas",value:function(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}},{key:"destroy",value:function(){return l.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),o(s(m.prototype),"destroy",this).call(this)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),m}(u.Container);e.Layer=m,m.prototype.nodeType="Layer",(0,v._registerNode)(m),f.Factory.addGetterSetter(m,"imageSmoothingEnabled",!0),f.Factory.addGetterSetter(m,"clearBeforeDraw",!0),f.Factory.addGetterSetter(m,"hitGraphEnabled",!0,(0,d.getBooleanValidator)())},6039:(t,e,r)=>{"use strict";var n=["x","y"];function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var s=r(7343),l=r(9489),u=r(2138),c=r(79),f=r(1131),h=r(8509),d="absoluteOpacity",p="allEventListeners",v="absoluteTransform",y="absoluteScale",g="canvas",m="listening",b="mouseenter",_="mouseleave",w="Shape",S=" ",x="stage",P="transform",k="visible",O=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(S),C=1,T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=C++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}var e,r,l;return e=t,r=[{key:"hasChildren",value:function(){return!1}},{key:"_clearCache",value:function(t){t!==P&&t!==v||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}},{key:"_getCache",value:function(t,e){var r=this._cache.get(t);return(void 0===r||(t===P||t===v)&&!0===r.dirty)&&(r=e.call(this),this._cache.set(t,r)),r}},{key:"_calculate",value:function(t,e,r){var n=this;if(!this._attachedDepsListeners.get(t)){var i=e.map((function(t){return t+"Change.konva"})).join(S);this.on(i,(function(){n._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,r)}},{key:"_getCanvasCache",value:function(){return this._cache.get(g)}},{key:"_clearSelfAndDescendantCache",value:function(t){this._clearCache(t),t===v&&this.fire("absoluteTransformChange")}},{key:"clearCache",value:function(){if(this._cache.has(g)){var t=this._cache.get(g),e=t.scene,r=t.filter,n=t.hit;s.Util.releaseCanvas(e,r,n),this._cache.delete(g)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}},{key:"cache",value:function(t){var e=t||{},r={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var n=Math.ceil(e.width||r.width),i=Math.ceil(e.height||r.height),o=e.pixelRatio,a=void 0===e.x?Math.floor(r.x):e.x,l=void 0===e.y?Math.floor(r.y):e.y,c=e.offset||0,f=e.drawBorder||!1,h=e.hitCanvasPixelRatio||1;if(n&&i){n+=2*c+1,i+=2*c+1,a-=c,l-=c;var p=new u.SceneCanvas({pixelRatio:o,width:n,height:i}),v=new u.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),m=new u.HitCanvas({pixelRatio:h,width:n,height:i}),b=p.getContext(),_=m.getContext();return m.isCache=!0,p.isCache=!0,this._cache.delete(g),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(p.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),b.save(),_.save(),b.translate(-a,-l),_.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(y),this.drawScene(p,this),this.drawHit(m,this),this._isUnderCache=!1,b.restore(),_.restore(),f&&(b.save(),b.beginPath(),b.rect(0,0,n,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(g,{scene:p,filter:v,hit:m,x:a,y:l}),this._requestDraw(),this}s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}},{key:"isCached",value:function(){return this._cache.has(g)}},{key:"getClientRect",value:function(t){throw new Error('abstract "getClientRect" method call')}},{key:"_transformedRect",value:function(t,e){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n=1/0,i=1/0,o=-1/0,a=-1/0,s=this.getAbsoluteTransform(e);return r.forEach((function(t){var e=s.point(t);void 0===n&&(n=o=e.x,i=a=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y)})),{x:n,y:i,width:o-n,height:a-i}}},{key:"_drawCachedSceneCanvas",value:function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var r=this._getCachedSceneCanvas(),n=r.pixelRatio;t.drawImage(r._canvas,0,0,r.width/n,r.height/n),t.restore()}},{key:"_drawCachedHitCanvas",value:function(t){var e=this._getCanvasCache(),r=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),t.restore()}},{key:"_getCachedSceneCanvas",value:function(){var t,e,r,n,i=this.filters(),a=this._getCanvasCache(),l=a.scene,u=a.filter,c=u.getContext();if(i){if(!this._filterUpToDate){var f=l.pixelRatio;u.setSize(l.width/l.pixelRatio,l.height/l.pixelRatio);try{for(t=i.length,c.clear(),c.drawImage(l._canvas,0,0,l.getWidth()/f,l.getHeight()/f),e=c.getImageData(0,0,u.getWidth(),u.getHeight()),r=0;r<t;r++)"function"==typeof(n=i[r])?(n.call(this,e),c.putImageData(e,0,0)):s.Util.error("Filter should be type of function, but got "+o(n)+" instead. Please check correct filters")}catch(t){s.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return u}return l}},{key:"on",value:function(t,e){if(this._cache&&this._cache.delete(p),3===arguments.length)return this._delegate.apply(this,arguments);var r,n,i,o,a=t.split(S),s=a.length;for(r=0;r<s;r++)i=(n=a[r].split("."))[0],o=n[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this}},{key:"off",value:function(t,e){var r,n,i,o,a,s=(t||"").split(S),l=s.length;if(this._cache&&this._cache.delete(p),!t)for(n in this.eventListeners)this._off(n);for(r=0;r<l;r++)if(o=(i=s[r].split("."))[0],a=i[1],o)this.eventListeners[o]&&this._off(o,a,e);else for(n in this.eventListeners)this._off(n,a,e);return this}},{key:"dispatchEvent",value:function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}},{key:"addEventListener",value:function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}},{key:"removeEventListener",value:function(t){return this.off(t),this}},{key:"_delegate",value:function(t,e,r){var n=this;this.on(t,(function(t){for(var i=t.target.findAncestors(e,!0,n),o=0;o<i.length;o++)(t=s.Util.cloneObject(t)).currentTarget=i[o],r.call(i[o],t)}))}},{key:"remove",value:function(){return this.isDragging()&&this.stopDrag(),f.DD._dragElements.delete(this._id),this._remove(),this}},{key:"_clearCaches",value:function(){this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(m)}},{key:"_remove",value:function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}},{key:"destroy",value:function(){return this.remove(),this.clearCache(),this}},{key:"getAttr",value:function(t){var e="get"+s.Util._capitalize(t);return s.Util._isFunction(this[e])?this[e]():this.attrs[t]}},{key:"getAncestors",value:function(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}},{key:"getAttrs",value:function(){return this.attrs||{}}},{key:"setAttrs",value:function(t){var e=this;return this._batchTransformChanges((function(){var r,n;if(!t)return e;for(r in t)"children"!==r&&(n="set"+s.Util._capitalize(r),s.Util._isFunction(e[n])?e[n](t[r]):e._setAttr(r,t[r]))})),this}},{key:"isListening",value:function(){return this._getCache(m,this._isListening)}},{key:"_isListening",value:function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)}},{key:"isVisible",value:function(){return this._getCache(k,this._isVisible)}},{key:"_isVisible",value:function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}},{key:"shouldDrawHit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this._isVisible(t)&&this._isListening(t);var r=this.getLayer(),n=!1;f.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===r)&&(n=!0)}));var i=!e&&!c.Konva.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!i}},{key:"show",value:function(){return this.visible(!0),this}},{key:"hide",value:function(){return this.visible(!1),this}},{key:"getZIndex",value:function(){return this.index||0}},{key:"getAbsoluteZIndex",value:function(){var t,e,r,n,i=this.getDepth(),o=this,a=0,s=this.getStage();return"Stage"!==o.nodeType&&s&&function s(l){for(t=[],e=l.length,r=0;r<e;r++)n=l[r],a++,n.nodeType!==w&&(t=t.concat(n.getChildren().slice())),n._id===o._id&&(r=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(s.getChildren()),a}},{key:"getDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"_batchTransformChanges",value:function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(P),this._clearSelfAndDescendantCache(v)),this._needClearTransformCache=!1}},{key:"setPosition",value:function(t){var e=this;return this._batchTransformChanges((function(){e.x(t.x),e.y(t.y)})),this}},{key:"getPosition",value:function(){return{x:this.x(),y:this.y()}}},{key:"getRelativePointerPosition",value:function(){var t=this.getStage();if(!t)return null;var e=t.getPointerPosition();if(!e)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(e)}},{key:"getAbsolutePosition",value:function(t){for(var e=!1,r=this.parent;r;){if(r.isCached()){e=!0;break}r=r.parent}e&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),i=new s.Transform,o=this.offset();return i.m=n.slice(),i.translate(o.x,o.y),i.getTranslation()}},{key:"setAbsolutePosition",value:function(t){var e=this._clearTransform(),r=e.x,i=e.y,o=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(e,n);this.attrs.x=r,this.attrs.y=i,this._clearCache(P);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(t.x,t.y),t={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(o),this.setPosition({x:t.x,y:t.y}),this._clearCache(P),this._clearSelfAndDescendantCache(v),this}},{key:"_setTransform",value:function(t){var e;for(e in t)this.attrs[e]=t[e]}},{key:"_clearTransform",value:function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}},{key:"move",value:function(t){var e=t.x,r=t.y,n=this.x(),i=this.y();return void 0!==e&&(n+=e),void 0!==r&&(i+=r),this.setPosition({x:n,y:i}),this}},{key:"_eachAncestorReverse",value:function(t,e){var r,n,i=[],o=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(r=i.length,n=0;n<r;n++)t(i[n])}}},{key:"rotate",value:function(t){return this.rotation(this.rotation()+t),this}},{key:"moveToTop",value:function(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}},{key:"moveUp",value:function(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveDown",value:function(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveToBottom",value:function(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}},{key:"setZIndex",value:function(t){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&s.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}},{key:"getAbsoluteOpacity",value:function(){return this._getCache(d,this._getAbsoluteOpacity)}},{key:"_getAbsoluteOpacity",value:function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}},{key:"moveTo",value:function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}},{key:"toObject",value:function(){var t,e,r,n,i={},o=this.getAttrs();for(t in i.attrs={},o)e=o[t],s.Util.isObject(e)&&!s.Util._isPlainObject(e)&&!s.Util._isArray(e)||(r="function"==typeof this[t]&&this[t],delete o[t],n=r?r.call(this):null,o[t]=e,n!==e&&(i.attrs[t]=e));return i.className=this.getClassName(),s.Util._prepareToStringify(i)}},{key:"toJSON",value:function(){return JSON.stringify(this.toObject())}},{key:"getParent",value:function(){return this.parent}},{key:"findAncestors",value:function(t,e,r){var n=[];e&&this._isMatch(t)&&n.push(this);for(var i=this.parent;i;){if(i===r)return n;i._isMatch(t)&&n.push(i),i=i.parent}return n}},{key:"isAncestorOf",value:function(t){return!1}},{key:"findAncestor",value:function(t,e,r){return this.findAncestors(t,e,r)[0]}},{key:"_isMatch",value:function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,r,n=t.replace(/ /g,"").split(","),i=n.length;for(e=0;e<i;e++)if(r=n[e],s.Util.isValidSelector(r)||(s.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),"#"===r.charAt(0)){if(this.id()===r.slice(1))return!0}else if("."===r.charAt(0)){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}},{key:"getLayer",value:function(){var t=this.getParent();return t?t.getLayer():null}},{key:"getStage",value:function(){return this._getCache(x,this._getStage)}},{key:"_getStage",value:function(){var t=this.getParent();return t?t.getStage():null}},{key:"fire",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e.target=e.target||this,r?this._fireAndBubble(t,e):this._fire(t,e),this}},{key:"getAbsoluteTransform",value:function(t){return t?this._getAbsoluteTransform(t):this._getCache(v,this._getAbsoluteTransform)}},{key:"_getAbsoluteTransform",value:function(t){var e;if(t)return e=new s.Transform,this._eachAncestorReverse((function(t){var r=t.transformsEnabled();"all"===r?e.multiply(t.getTransform()):"position"===r&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(v)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var r=this.transformsEnabled();if("all"===r)e.multiply(this.getTransform());else if("position"===r){var n=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;e.translate(n-o,i-a)}return e.dirty=!1,e}},{key:"getAbsoluteScale",value:function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var r=this.getAbsoluteTransform(t).decompose();return{x:r.scaleX,y:r.scaleY}}},{key:"getAbsoluteRotation",value:function(){return this.getAbsoluteTransform().decompose().rotation}},{key:"getTransform",value:function(){return this._getCache(P,this._getTransform)}},{key:"_getTransform",value:function(){var t,e,r=this._cache.get(P)||new s.Transform;r.reset();var n=this.x(),i=this.y(),o=c.Konva.getAngle(this.rotation()),a=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,l=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,u=this.attrs.skewX||0,f=this.attrs.skewY||0,h=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return 0===n&&0===i||r.translate(n,i),0!==o&&r.rotate(o),0===u&&0===f||r.skew(u,f),1===a&&1===l||r.scale(a,l),0===h&&0===d||r.translate(-1*h,-1*d),r.dirty=!1,r}},{key:"clone",value:function(t){var e,r,n,i,o,a=s.Util.cloneObject(this.attrs);for(e in t)a[e]=t[e];var l=new this.constructor(a);for(e in this.eventListeners)for(n=(r=this.eventListeners[e]).length,i=0;i<n;i++)(o=r[i]).name.indexOf("konva")<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(o));return l}},{key:"_toKonvaCanvas",value:function(t){t=t||{};var e=this.getClientRect(),r=this.getStage(),n=void 0!==t.x?t.x:Math.floor(e.x),i=void 0!==t.y?t.y:Math.floor(e.y),o=t.pixelRatio||1,a=new u.SceneCanvas({width:t.width||Math.ceil(e.width)||(r?r.width():0),height:t.height||Math.ceil(e.height)||(r?r.height():0),pixelRatio:o}),s=a.getContext();return!1===t.imageSmoothingEnabled&&(s._context.imageSmoothingEnabled=!1),s.save(),(n||i)&&s.translate(-1*n,-1*i),this.drawScene(a),s.restore(),a}},{key:"toCanvas",value:function(t){return this._toKonvaCanvas(t)._canvas}},{key:"toDataURL",value:function(t){var e=(t=t||{}).mimeType||null,r=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(e,r);return t.callback&&t.callback(n),n}},{key:"toImage",value:function(t){var e=this;return new Promise((function(r,n){try{var i=null==t?void 0:t.callback;i&&delete t.callback,s.Util._urlToImage(e.toDataURL(t),(function(t){r(t),null==i||i(t)}))}catch(t){n(t)}}))}},{key:"toBlob",value:function(t){var e=this;return new Promise((function(r,n){try{var i=null==t?void 0:t.callback;i&&delete t.callback,e.toCanvas(t).toBlob((function(t){r(t),null==i||i(t)}))}catch(t){n(t)}}))}},{key:"setSize",value:function(t){return this.width(t.width),this.height(t.height),this}},{key:"getSize",value:function(){return{width:this.width(),height:this.height()}}},{key:"getClassName",value:function(){return this.className||this.nodeType}},{key:"getType",value:function(){return this.nodeType}},{key:"getDragDistance",value:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():c.Konva.dragDistance}},{key:"_off",value:function(t,e,r){var n,i,o,a=this.eventListeners[t];for(n=0;n<a.length;n++)if(i=a[n].name,o=a[n].handler,!("konva"===i&&"konva"!==e||e&&i!==e||r&&r!==o)){if(a.splice(n,1),0===a.length){delete this.eventListeners[t];break}n--}}},{key:"_fireChangeEvent",value:function(t,e,r){this._fire(t+"Change",{oldVal:e,newVal:r})}},{key:"addName",value:function(t){if(!this.hasName(t)){var e=this.name(),r=e?e+" "+t:t;this.name(r)}return this}},{key:"hasName",value:function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}},{key:"removeName",value:function(t){var e=(this.name()||"").split(/\s/g),r=e.indexOf(t);return-1!==r&&(e.splice(r,1),this.name(e.join(" "))),this}},{key:"setAttr",value:function(t,e){var r=this["set"+s.Util._capitalize(t)];return s.Util._isFunction(r)?r.call(this,e):this._setAttr(t,e),this}},{key:"_requestDraw",value:function(){if(c.Konva.autoDrawEnabled){var t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}},{key:"_setAttr",value:function(t,e){var r=this.attrs[t];(r!==e||s.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,r,e),this._requestDraw())}},{key:"_setComponentAttr",value:function(t,e,r){var n;void 0!==r&&((n=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=r,this._fireChangeEvent(t,n,r))}},{key:"_fireAndBubble",value:function(t,e,r){if(e&&this.nodeType===w&&(e.target=this),t!==b&&t!==_||!(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||"Stage"===this.nodeType&&!r)){this._fire(t,e);var n=(t===b||t===_)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!n&&(r&&r.parent?this._fireAndBubble.call(this.parent,t,e,r):this._fireAndBubble.call(this.parent,t,e))}}},{key:"_getProtoListeners",value:function(t){var e,r,n,o,a=null!==(e=this._cache.get(p))&&void 0!==e?e:{},s=null==a?void 0:a[t];if(void 0===s){s=[];for(var l=Object.getPrototypeOf(this);l;){var u,c=null!==(n=null===(r=l.eventListeners)||void 0===r?void 0:r[t])&&void 0!==n?n:[];(u=s).push.apply(u,function(t){if(Array.isArray(t))return i(t)}(o=c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=Object.getPrototypeOf(l)}a[t]=s,this._cache.set(p,a)}return s}},{key:"_fire",value:function(t,e){(e=e||{}).currentTarget=this,e.type=t;var r=this._getProtoListeners(t);if(r)for(var n=0;n<r.length;n++)r[n].handler.call(this,e);var i=this.eventListeners[t];if(i)for(n=0;n<i.length;n++)i[n].handler.call(this,e)}},{key:"draw",value:function(){return this.drawScene(),this.drawHit(),this}},{key:"_createDragElement",value:function(t){var e=t?t.pointerId:void 0,r=this.getStage(),n=this.getAbsolutePosition();if(r){var i=r._getPointerById(e)||r._changedPointerPositions[0]||n;f.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-n.x,y:i.y-n.y},dragStatus:"ready",pointerId:e})}}},{key:"startDrag",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.DD._dragElements.has(this._id)||this._createDragElement(t),f.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}},{key:"_setDragPosition",value:function(t,e){var r=this.getStage()._getPointerById(e.pointerId);if(r){var n={x:r.x-e.offset.x,y:r.y-e.offset.y},i=this.dragBoundFunc();if(void 0!==i){var o=i.call(this,n,t);o?n=o:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===n.x&&this._lastPos.y===n.y||(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}},{key:"stopDrag",value:function(t){var e=f.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),f.DD._endDragBefore(t),f.DD._endDragAfter(t)}},{key:"setDraggable",value:function(t){this._setAttr("draggable",t),this._dragChange()}},{key:"isDragging",value:function(){var t=f.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}},{key:"_listenDrag",value:function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((void 0===t.evt.button||c.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var r=!1;f.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(r=!0)})),r||this._createDragElement(t)}}))}},{key:"_dragChange",value:function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=f.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,r=t&&"ready"===t.dragStatus;e?this.stopDrag():r&&f.DD._dragElements.delete(this._id)}}},{key:"_dragCleanup",value:function(){this.off("mousedown.konva"),this.off("touchstart.konva")}},{key:"isClientRectOnScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=this.getStage();if(!e)return!1;var r={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return s.Util.haveIntersection(r,this.getClientRect())}}],l=[{key:"create",value:function(t,e){return s.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}},{key:"_createNode",value:function(e,r){var n,i,o,a=t.prototype.getClassName.call(e),l=e.children;if(r&&(e.attrs.container=r),c.Konva[a]||(s.Util.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape"),n=new(0,c.Konva[a])(e.attrs),l)for(i=l.length,o=0;o<i;o++)n.add(t._createNode(l[o]));return n}}],r&&a(e.prototype,r),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Node=T,T.prototype.nodeType="Node",T.prototype._attrsAffectingSize=[],T.prototype.eventListeners={},T.prototype.on.call(T.prototype,O,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(P),this._clearSelfAndDescendantCache(v))})),T.prototype.on.call(T.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(k)})),T.prototype.on.call(T.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(m)})),T.prototype.on.call(T.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(d)}));var E=l.Factory.addGetterSetter;E(T,"zIndex"),E(T,"absolutePosition"),E(T,"position"),E(T,"x",0,(0,h.getNumberValidator)()),E(T,"y",0,(0,h.getNumberValidator)()),E(T,"globalCompositeOperation","source-over",(0,h.getStringValidator)()),E(T,"opacity",1,(0,h.getNumberValidator)()),E(T,"name","",(0,h.getStringValidator)()),E(T,"id","",(0,h.getStringValidator)()),E(T,"rotation",0,(0,h.getNumberValidator)()),l.Factory.addComponentsGetterSetter(T,"scale",["x","y"]),E(T,"scaleX",1,(0,h.getNumberValidator)()),E(T,"scaleY",1,(0,h.getNumberValidator)()),l.Factory.addComponentsGetterSetter(T,"skew",["x","y"]),E(T,"skewX",0,(0,h.getNumberValidator)()),E(T,"skewY",0,(0,h.getNumberValidator)()),l.Factory.addComponentsGetterSetter(T,"offset",["x","y"]),E(T,"offsetX",0,(0,h.getNumberValidator)()),E(T,"offsetY",0,(0,h.getNumberValidator)()),E(T,"dragDistance",null,(0,h.getNumberValidator)()),E(T,"width",0,(0,h.getNumberValidator)()),E(T,"height",0,(0,h.getNumberValidator)()),E(T,"listening",!0,(0,h.getBooleanValidator)()),E(T,"preventDefault",!0,(0,h.getBooleanValidator)()),E(T,"filters",null,(function(t){return this._filterUpToDate=!1,t})),E(T,"visible",!0,(0,h.getBooleanValidator)()),E(T,"transformsEnabled","all",(0,h.getStringValidator)()),E(T,"size"),E(T,"dragBoundFunc"),E(T,"draggable",!1,(0,h.getBooleanValidator)()),l.Factory.backCompat(T,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},3765:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.releaseCapture=e.setPointerCapture=e.hasPointerCapture=e.createEvent=e.getCapturedShape=void 0;var n=r(79),i=new Map,o=void 0!==n.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var r=i.get(t);if(r){var n=r.getStage();n&&n.content,i.delete(t),o&&r._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},8442:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;var l,u=r(79),c=r(7343),f=r(9489),h=r(6039),d=r(8509),p=r(79),v=r(3765),y="hasShadow",g="shadowRGBA",m="patternImage",b="linearGradient",_="radialGradient";function w(){return l||(l=c.Util.createCanvasElement().getContext("2d"))}e.shapes={};var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(S,t);var r,l,f,d,p=(f=S,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(f);if(d){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}(this,t)});function S(t){var r,n;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),r=p.call(this,t);!(n=c.Util.getRandomColor())||n in e.shapes;);return r.colorKey=n,e.shapes[n]=a(r),r}return r=S,l=[{key:"getContext",value:function(){return c.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}},{key:"getCanvas",value:function(){return c.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}},{key:"getSceneFunc",value:function(){return this.attrs.sceneFunc||this._sceneFunc}},{key:"getHitFunc",value:function(){return this.attrs.hitFunc||this._hitFunc}},{key:"hasShadow",value:function(){return this._getCache(y,this._hasShadow)}},{key:"_hasShadow",value:function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}},{key:"_getFillPattern",value:function(){return this._getCache(m,this.__getFillPattern)}},{key:"__getFillPattern",value:function(){if(this.fillPatternImage()){var t=w().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){var e=new c.Transform;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(u.Konva.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());var r=e.getMatrix(),n="undefined"==typeof DOMMatrix?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);t.setTransform(n)}return t}}},{key:"_getLinearGradient",value:function(){return this._getCache(b,this.__getLinearGradient)}},{key:"__getLinearGradient",value:function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=w(),r=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(r.x,r.y,n.x,n.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}},{key:"_getRadialGradient",value:function(){return this._getCache(_,this.__getRadialGradient)}},{key:"__getRadialGradient",value:function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=w(),r=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}},{key:"getShadowRGBA",value:function(){return this._getCache(g,this._getShadowRGBA)}},{key:"_getShadowRGBA",value:function(){if(this.hasShadow()){var t=c.Util.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}}},{key:"hasFill",value:function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())}))}},{key:"hasStroke",value:function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())}))}},{key:"hasHitStroke",value:function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}},{key:"intersects",value:function(t){var e=this.getStage();if(!e)return!1;var r=e.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}},{key:"destroy",value:function(){return h.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}},{key:"_useBufferCanvas",value:function(t){var e;if(!this.getStage())return!1;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;var r=t||this.hasFill(),n=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(r&&n&&i)return!0;var o=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(r&&n&&o&&a)}},{key:"setStrokeHitEnabled",value:function(t){c.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}},{key:"getStrokeHitEnabled",value:function(){return 0!==this.hitStrokeWidth()}},{key:"getSelfRect",value:function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}},{key:"getClientRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.skipTransform,r=t.relativeTo,n=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+i,a=n.height+i,s=!t.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,u=s?this.shadowOffsetY():0,c=o+Math.abs(l),f=a+Math.abs(u),h=s&&this.shadowBlur()||0,d={width:c+2*h,height:f+2*h,x:-(i/2+h)+Math.min(l,0)+n.x,y:-(i/2+h)+Math.min(u,0)+n.y};return e?d:this._transformedRect(d,r)}},{key:"drawScene",value:function(t,e){var r,n,i=this.getLayer(),o=t||i.getCanvas(),a=o.getContext(),s=this._getCanvasCache(),l=this.getSceneFunc(),u=this.hasShadow(),c=o.isCache,f=e===this;if(!this.isVisible()&&!f)return this;if(s){a.save();var h=this.getAbsoluteTransform(e).getMatrix();return a.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!l)return this;if(a.save(),this._useBufferCanvas()&&!c){(n=(r=this.getStage().bufferCanvas).getContext()).clear(),n.save(),n._applyLineJoin(this);var d=this.getAbsoluteTransform(e).getMatrix();n.transform(d[0],d[1],d[2],d[3],d[4],d[5]),l.call(this,n,this),n.restore();var p=r.pixelRatio;u&&a._applyShadow(this),a._applyOpacity(this),a._applyGlobalCompositeOperation(this),a.drawImage(r._canvas,0,0,r.width/p,r.height/p)}else a._applyLineJoin(this),f||(d=this.getAbsoluteTransform(e).getMatrix(),a.transform(d[0],d[1],d[2],d[3],d[4],d[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)),u&&a._applyShadow(this),l.call(this,a,this);return a.restore(),this}},{key:"drawHit",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.shouldDrawHit(e,r))return this;var n=this.getLayer(),i=t||n.hitCanvas,o=i&&i.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),l=s&&s.hit;if(this.colorKey||c.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){o.save();var u=this.getAbsoluteTransform(e).getMatrix();return o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),this!==e){var f=this.getAbsoluteTransform(e).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return a.call(this,o,this),o.restore(),this}},{key:"drawHitFromCache",value:function(){var t,e,r,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this._getCanvasCache(),s=this._getCachedSceneCanvas(),l=a.hit,u=l.getContext(),f=l.getWidth(),h=l.getHeight();u.clear(),u.drawImage(s._canvas,0,0,f,h);try{for(r=(e=(t=u.getImageData(0,0,f,h)).data).length,n=c.Util._hexToRgb(this.colorKey),i=0;i<r;i+=4)e[i+3]>o?(e[i]=n.r,e[i+1]=n.g,e[i+2]=n.b,e[i+3]=255):e[i+3]=0;u.putImageData(t,0,0)}catch(t){c.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}},{key:"hasPointerCapture",value:function(t){return v.hasPointerCapture(t,this)}},{key:"setPointerCapture",value:function(t){v.setPointerCapture(t,this)}},{key:"releaseCapture",value:function(t){v.releaseCapture(t,this)}}],l&&i(r.prototype,l),Object.defineProperty(r,"prototype",{writable:!1}),S}(h.Node);e.Shape=S,S.prototype._fillFunc=function(t){var e=this.attrs.fillRule;e?t.fill(e):t.fill()},S.prototype._strokeFunc=function(t){t.stroke()},S.prototype._fillFuncHit=function(t){t.fill()},S.prototype._strokeFuncHit=function(t){t.stroke()},S.prototype._centroid=!1,S.prototype.nodeType="Shape",(0,p._registerNode)(S),S.prototype.eventListeners={},S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(y)})),S.prototype.on.call(S.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(g)})),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(m)})),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(b)})),S.prototype.on.call(S.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(_)})),f.Factory.addGetterSetter(S,"stroke",void 0,(0,d.getStringOrGradientValidator)()),f.Factory.addGetterSetter(S,"strokeWidth",2,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillAfterStrokeEnabled",!1),f.Factory.addGetterSetter(S,"hitStrokeWidth","auto",(0,d.getNumberOrAutoValidator)()),f.Factory.addGetterSetter(S,"strokeHitEnabled",!0,(0,d.getBooleanValidator)()),f.Factory.addGetterSetter(S,"perfectDrawEnabled",!0,(0,d.getBooleanValidator)()),f.Factory.addGetterSetter(S,"shadowForStrokeEnabled",!0,(0,d.getBooleanValidator)()),f.Factory.addGetterSetter(S,"lineJoin"),f.Factory.addGetterSetter(S,"lineCap"),f.Factory.addGetterSetter(S,"sceneFunc"),f.Factory.addGetterSetter(S,"hitFunc"),f.Factory.addGetterSetter(S,"dash"),f.Factory.addGetterSetter(S,"dashOffset",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"shadowColor",void 0,(0,d.getStringValidator)()),f.Factory.addGetterSetter(S,"shadowBlur",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"shadowOpacity",1,(0,d.getNumberValidator)()),f.Factory.addComponentsGetterSetter(S,"shadowOffset",["x","y"]),f.Factory.addGetterSetter(S,"shadowOffsetX",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"shadowOffsetY",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillPatternImage"),f.Factory.addGetterSetter(S,"fill",void 0,(0,d.getStringOrGradientValidator)()),f.Factory.addGetterSetter(S,"fillPatternX",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillPatternY",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillLinearGradientColorStops"),f.Factory.addGetterSetter(S,"strokeLinearGradientColorStops"),f.Factory.addGetterSetter(S,"fillRadialGradientStartRadius",0),f.Factory.addGetterSetter(S,"fillRadialGradientEndRadius",0),f.Factory.addGetterSetter(S,"fillRadialGradientColorStops"),f.Factory.addGetterSetter(S,"fillPatternRepeat","repeat"),f.Factory.addGetterSetter(S,"fillEnabled",!0),f.Factory.addGetterSetter(S,"strokeEnabled",!0),f.Factory.addGetterSetter(S,"shadowEnabled",!0),f.Factory.addGetterSetter(S,"dashEnabled",!0),f.Factory.addGetterSetter(S,"strokeScaleEnabled",!0),f.Factory.addGetterSetter(S,"fillPriority","color"),f.Factory.addComponentsGetterSetter(S,"fillPatternOffset",["x","y"]),f.Factory.addGetterSetter(S,"fillPatternOffsetX",0,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillPatternOffsetY",0,(0,d.getNumberValidator)()),f.Factory.addComponentsGetterSetter(S,"fillPatternScale",["x","y"]),f.Factory.addGetterSetter(S,"fillPatternScaleX",1,(0,d.getNumberValidator)()),f.Factory.addGetterSetter(S,"fillPatternScaleY",1,(0,d.getNumberValidator)()),f.Factory.addComponentsGetterSetter(S,"fillLinearGradientStartPoint",["x","y"]),f.Factory.addComponentsGetterSetter(S,"strokeLinearGradientStartPoint",["x","y"]),f.Factory.addGetterSetter(S,"fillLinearGradientStartPointX",0),f.Factory.addGetterSetter(S,"strokeLinearGradientStartPointX",0),f.Factory.addGetterSetter(S,"fillLinearGradientStartPointY",0),f.Factory.addGetterSetter(S,"strokeLinearGradientStartPointY",0),f.Factory.addComponentsGetterSetter(S,"fillLinearGradientEndPoint",["x","y"]),f.Factory.addComponentsGetterSetter(S,"strokeLinearGradientEndPoint",["x","y"]),f.Factory.addGetterSetter(S,"fillLinearGradientEndPointX",0),f.Factory.addGetterSetter(S,"strokeLinearGradientEndPointX",0),f.Factory.addGetterSetter(S,"fillLinearGradientEndPointY",0),f.Factory.addGetterSetter(S,"strokeLinearGradientEndPointY",0),f.Factory.addComponentsGetterSetter(S,"fillRadialGradientStartPoint",["x","y"]),f.Factory.addGetterSetter(S,"fillRadialGradientStartPointX",0),f.Factory.addGetterSetter(S,"fillRadialGradientStartPointY",0),f.Factory.addComponentsGetterSetter(S,"fillRadialGradientEndPoint",["x","y"]),f.Factory.addGetterSetter(S,"fillRadialGradientEndPointX",0),f.Factory.addGetterSetter(S,"fillRadialGradientEndPointY",0),f.Factory.addGetterSetter(S,"fillPatternRotation",0),f.Factory.addGetterSetter(S,"fillRule",void 0,(0,d.getStringValidator)()),f.Factory.backCompat(S,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},175:(t,e,r)=>{"use strict";var n,i,o;function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},f.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function v(t,e,r){return(e=y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;var g=r(7343),m=r(9489),b=r(6937),_=r(79),w=r(2138),S=r(1131),x=r(79),P=r(3765),k="mouseleave",O="mouseover",C="mouseenter",T="mousemove",E="mousedown",j="mouseup",M="pointermove",R="pointerdown",A="pointerup",D="pointercancel",F="pointerout",I="pointerleave",G="pointerover",N="pointerenter",L="contextmenu",U="touchstart",B="touchend",z="touchmove",V="touchcancel",W="wheel",H=[[C,"_pointerenter"],[E,"_pointerdown"],[T,"_pointermove"],[j,"_pointerup"],[k,"_pointerleave"],[U,"_pointerdown"],[z,"_pointermove"],[B,"_pointerup"],[V,"_pointercancel"],[O,"_pointerover"],[W,"_wheel"],[L,"_contextmenu"],[R,"_pointerdown"],[M,"_pointermove"],[A,"_pointerup"],[D,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],Y={mouse:(n={},v(n,F,"mouseout"),v(n,I,k),v(n,G,O),v(n,N,C),v(n,M,T),v(n,R,E),v(n,A,j),v(n,D,"mousecancel"),v(n,"pointerclick","click"),v(n,"pointerdblclick","dblclick"),n),touch:(i={},v(i,F,"touchout"),v(i,I,"touchleave"),v(i,G,"touchover"),v(i,N,"touchenter"),v(i,M,z),v(i,R,U),v(i,A,B),v(i,D,V),v(i,"pointerclick","tap"),v(i,"pointerdblclick","dbltap"),i),pointer:(o={},v(o,F,F),v(o,I,I),v(o,G,G),v(o,N,N),v(o,M,M),v(o,R,R),v(o,A,A),v(o,D,D),v(o,"pointerclick","pointerclick"),v(o,"pointerdblclick","pointerdblclick"),o)},X=function(t){return t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse"},K=function(t){var e=X(t);return"pointer"===e?_.Konva.pointerEventsEnabled&&Y.pointer:"touch"===e?Y.touch:"mouse"===e?Y.mouse:void 0};function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t.clipFunc||t.clipWidth||t.clipHeight)&&g.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(v,t);var r,n,i,o,a=(i=v,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(i);if(o){var r=p(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}(this,t)});function v(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(r=a.call(this,q(t)))._pointerPositions=[],r._changedPointerPositions=[],r._buildDOM(),r._bindContentEvents(),e.stages.push(d(r)),r.on("widthChange.konva heightChange.konva",r._resizeDOM),r.on("visibleChange.konva",r._checkVisibility),r.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){q(r.attrs)})),r._checkVisibility(),r}return r=v,n=[{key:"_validateAdd",value:function(t){var e="Layer"===t.getType(),r="FastLayer"===t.getType();e||r||g.Util.throw("You may only add layers to the stage.")}},{key:"_checkVisibility",value:function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}}},{key:"setContainer",value:function(t){if("string"===u(t)){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var r;r="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(r)}if(!t)throw"Can not find container in document with id "+r}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}},{key:"shouldDrawHit",value:function(){return!0}},{key:"clear",value:function(){var t,e=this.children,r=e.length;for(t=0;t<r;t++)e[t].clear();return this}},{key:"clone",value:function(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),b.Container.prototype.clone.call(this,t)}},{key:"destroy",value:function(){f(p(v.prototype),"destroy",this).call(this);var t=this.content;t&&g.Util._isInDocument(t)&&this.container().removeChild(t);var r=e.stages.indexOf(this);return r>-1&&e.stages.splice(r,1),g.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}},{key:"getPointerPosition",value:function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(g.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}},{key:"_getPointerById",value:function(t){return this._pointerPositions.find((function(e){return e.id===t}))}},{key:"getPointersPositions",value:function(){return this._pointerPositions}},{key:"getStage",value:function(){return this}},{key:"getContent",value:function(){return this.content}},{key:"_toKonvaCanvas",value:function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new w.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),r=e.getContext()._context,n=this.children;return(t.x||t.y)&&r.translate(-1*t.x,-1*t.y),n.forEach((function(e){if(e.isVisible()){var n=e._toKonvaCanvas(t);r.drawImage(n._canvas,t.x,t.y,n.getWidth()/n.getPixelRatio(),n.getHeight()/n.getPixelRatio())}})),e}},{key:"getIntersection",value:function(t){if(!t)return null;var e,r=this.children;for(e=r.length-1;e>=0;e--){var n=r[e].getIntersection(t);if(n)return n}return null}},{key:"_resizeDOM",value:function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((function(r){r.setSize({width:t,height:e}),r.draw()}))}},{key:"add",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}f(p(v.prototype),"add",this).call(this,t);var o=this.children.length;return o>5&&g.Util.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),_.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}},{key:"getParent",value:function(){return null}},{key:"getLayer",value:function(){return null}},{key:"hasPointerCapture",value:function(t){return P.hasPointerCapture(t,this)}},{key:"setPointerCapture",value:function(t){P.setPointerCapture(t,this)}},{key:"releaseCapture",value:function(t){P.releaseCapture(t,this)}},{key:"getLayers",value:function(){return this.children}},{key:"_bindContentEvents",value:function(){var t=this;_.Konva.isBrowser&&H.forEach((function(e){var r,n,i=(n=2,function(t){if(Array.isArray(t))return t}(r=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(r,n)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];t.content.addEventListener(o,(function(e){t[a](e)}),{passive:!1})}))}},{key:"_pointerenter",value:function(t){this.setPointersPositions(t);var e=K(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}},{key:"_pointerover",value:function(t){this.setPointersPositions(t);var e=K(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}},{key:"_getTargetShape",value:function(t){var e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}},{key:"_pointerleave",value:function(t){var e=K(t.type),r=X(t.type);if(e){this.setPointersPositions(t);var n=this._getTargetShape(r),i=!S.DD.isDragging||_.Konva.hitOnDragEnabled;n&&i?(n._fireAndBubble(e.pointerout,{evt:t}),n._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[r+"targetShape"]=null):i&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}},{key:"_pointerdown",value:function(t){var e=this,r=K(t.type),n=X(t.type);if(r){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach((function(o){var a=e.getIntersection(o);if(S.DD.justDragged=!1,_.Konva["_"+n+"ListenClick"]=!0,a&&a.isListening()){_.Konva.capturePointerEventsEnabled&&a.setPointerCapture(o.id),e[n+"ClickStartShape"]=a,a._fireAndBubble(r.pointerdown,{evt:t,pointerId:o.id}),i=!0;var s=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&s&&t.preventDefault()}})),i||this._fire(r.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}},{key:"_pointermove",value:function(t){var e=this,r=K(t.type),n=X(t.type);if(r&&(S.DD.isDragging&&S.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!S.DD.isDragging||_.Konva.hitOnDragEnabled)){var i={},o=!1,a=this._getTargetShape(n);this._changedPointerPositions.forEach((function(l){var u=P.getCapturedShape(l.id)||e.getIntersection(l),c=l.id,f={evt:t,pointerId:c},h=a!==u;if(h&&a&&(a._fireAndBubble(r.pointerout,s({},f),u),a._fireAndBubble(r.pointerleave,s({},f),u)),u){if(i[u._id])return;i[u._id]=!0}u&&u.isListening()?(o=!0,h&&(u._fireAndBubble(r.pointerover,s({},f),a),u._fireAndBubble(r.pointerenter,s({},f),a),e[n+"targetShape"]=u),u._fireAndBubble(r.pointermove,s({},f))):a&&(e._fire(r.pointerover,{evt:t,target:e,currentTarget:e,pointerId:c}),e[n+"targetShape"]=null)})),o||this._fire(r.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}}},{key:"_pointerup",value:function(t){var e=this,r=K(t.type),n=X(t.type);if(r){this.setPointersPositions(t);var i=this[n+"ClickStartShape"],o=this[n+"ClickEndShape"],a={},l=!1;this._changedPointerPositions.forEach((function(u){var c=P.getCapturedShape(u.id)||e.getIntersection(u);if(c){if(c.releaseCapture(u.id),a[c._id])return;a[c._id]=!0}var f=u.id,h={evt:t,pointerId:f},d=!1;_.Konva["_"+n+"InDblClickWindow"]?(d=!0,clearTimeout(e[n+"DblTimeout"])):S.DD.justDragged||(_.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(e[n+"DblTimeout"])),e[n+"DblTimeout"]=setTimeout((function(){_.Konva["_"+n+"InDblClickWindow"]=!1}),_.Konva.dblClickWindow),c&&c.isListening()?(l=!0,e[n+"ClickEndShape"]=c,c._fireAndBubble(r.pointerup,s({},h)),_.Konva["_"+n+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(r.pointerclick,s({},h)),d&&o&&o===c&&c._fireAndBubble(r.pointerdblclick,s({},h)))):(e[n+"ClickEndShape"]=null,_.Konva["_"+n+"ListenClick"]&&e._fire(r.pointerclick,{evt:t,target:e,currentTarget:e,pointerId:f}),d&&e._fire(r.pointerdblclick,{evt:t,target:e,currentTarget:e,pointerId:f}))})),l||this._fire(r.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),_.Konva["_"+n+"ListenClick"]=!1,t.cancelable&&"touch"!==n&&t.preventDefault()}}},{key:"_contextmenu",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(L,{evt:t}):this._fire(L,{evt:t,target:this,currentTarget:this})}},{key:"_wheel",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(W,{evt:t}):this._fire(W,{evt:t,target:this,currentTarget:this})}},{key:"_pointercancel",value:function(t){this.setPointersPositions(t);var e=P.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(A,P.createEvent(t)),P.releaseCapture(t.pointerId)}},{key:"_lostpointercapture",value:function(t){P.releaseCapture(t.pointerId)}},{key:"setPointersPositions",value:function(t){var e=this,r=this._getContentPosition(),n=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-r.left)/r.scaleX,y:(t.clientY-r.top)/r.scaleY})}))):(n=(t.clientX-r.left)/r.scaleX,i=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:n,y:i},this._pointerPositions=[{x:n,y:i,id:g.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:i,id:g.Util._getFirstPointerId(t)}])}},{key:"_setPointerPosition",value:function(t){g.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}},{key:"_getContentPosition",value:function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}},{key:"_buildDOM",value:function(){if(this.bufferCanvas=new w.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new w.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),_.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}},{key:"cache",value:function(){return g.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}},{key:"clearCache",value:function(){return this}},{key:"batchDraw",value:function(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}],n&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),v}(b.Container);e.Stage=$,$.prototype.nodeType="Stage",(0,x._registerNode)($),m.Factory.addGetterSetter($,"container")},8754:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;var s=r(7343),l=r(6437),u=r(6039),c=r(79),f={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=0,d=["fill","stroke","shadowColor"],p=function(){function t(e,r,n,o,a,s,l){i(this,t),this.prop=e,this.propFunc=r,this.begin=o,this._pos=o,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=l,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=a-this.begin,this.pause()}return a(t,[{key:"fire",value:function(t){var e=this[t];e&&e()}},{key:"setTime",value:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}},{key:"getTime",value:function(){return this._time}},{key:"setPosition",value:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}},{key:"getPosition",value:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}},{key:"play",value:function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}},{key:"reverse",value:function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}},{key:"seek",value:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}},{key:"reset",value:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")}},{key:"finish",value:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}},{key:"update",value:function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}},{key:"onEnterFrame",value:function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}},{key:"pause",value:function(){this.state=1,this.fire("onPause")}},{key:"getTimer",value:function(){return(new Date).getTime()}}]),t}(),v=function(){function t(r){i(this,t);var n,o,a=this,u=r.node,d=u._id,v=r.easing||e.Easings.Linear,y=!!r.yoyo;n=void 0===r.duration?.3:0===r.duration?.001:r.duration,this.node=u,this._id=h++;var g=u.getLayer()||(u instanceof c.Konva.Stage?u.getLayers():null);for(o in g||s.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new l.Animation((function(){a.tween.onEnterFrame()}),g),this.tween=new p(o,(function(t){a._tweenFunc(t)}),v,0,1,1e3*n,y),this._addListeners(),t.attrs[d]||(t.attrs[d]={}),t.attrs[d][this._id]||(t.attrs[d][this._id]={}),t.tweens[d]||(t.tweens[d]={}),r)void 0===f[o]&&this._addAttr(o,r[o]);this.reset(),this.onFinish=r.onFinish,this.onReset=r.onReset,this.onUpdate=r.onUpdate}return a(t,[{key:"_addAttr",value:function(e,r){var n,i,o,a,l,u,c,f,h=this.node,p=h._id;if((o=t.tweens[p][e])&&delete t.attrs[p][o][e],n=h.getAttr(e),s.Util._isArray(r))if(i=[],l=Math.max(r.length,n.length),"points"===e&&r.length!==n.length&&(r.length>n.length?(c=n,n=s.Util._prepareArrayForTween(n,r,h.closed())):(u=r,r=s.Util._prepareArrayForTween(r,n,h.closed()))),0===e.indexOf("fill"))for(a=0;a<l;a++)if(a%2==0)i.push(r[a]-n[a]);else{var v=s.Util.colorToRGBA(n[a]);f=s.Util.colorToRGBA(r[a]),n[a]=v,i.push({r:f.r-v.r,g:f.g-v.g,b:f.b-v.b,a:f.a-v.a})}else for(a=0;a<l;a++)i.push(r[a]-n[a]);else-1!==d.indexOf(e)?(n=s.Util.colorToRGBA(n),i={r:(f=s.Util.colorToRGBA(r)).r-n.r,g:f.g-n.g,b:f.b-n.b,a:f.a-n.a}):i=r-n;t.attrs[p][this._id][e]={start:n,diff:i,end:r,trueEnd:u,trueStart:c},t.tweens[p][e]=this._id}},{key:"_tweenFunc",value:function(e){var r,n,i,o,a,l,u,c,f=this.node,h=t.attrs[f._id][this._id];for(r in h){if(i=(n=h[r]).start,o=n.diff,c=n.end,s.Util._isArray(i))if(a=[],u=Math.max(i.length,c.length),0===r.indexOf("fill"))for(l=0;l<u;l++)l%2==0?a.push((i[l]||0)+o[l]*e):a.push("rgba("+Math.round(i[l].r+o[l].r*e)+","+Math.round(i[l].g+o[l].g*e)+","+Math.round(i[l].b+o[l].b*e)+","+(i[l].a+o[l].a*e)+")");else for(l=0;l<u;l++)a.push((i[l]||0)+o[l]*e);else a=-1!==d.indexOf(r)?"rgba("+Math.round(i.r+o.r*e)+","+Math.round(i.g+o.g*e)+","+Math.round(i.b+o.b*e)+","+(i.a+o.a*e)+")":i+o*e;f.setAttr(r,a)}}},{key:"_addListeners",value:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueEnd&&r.setAttr("points",n.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var r=e.node,n=t.attrs[r._id][e._id];n.points&&n.points.trueStart&&r.points(n.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}}},{key:"play",value:function(){return this.tween.play(),this}},{key:"reverse",value:function(){return this.tween.reverse(),this}},{key:"reset",value:function(){return this.tween.reset(),this}},{key:"seek",value:function(t){return this.tween.seek(1e3*t),this}},{key:"pause",value:function(){return this.tween.pause(),this}},{key:"finish",value:function(){return this.tween.finish(),this}},{key:"destroy",value:function(){var e,r=this.node._id,n=this._id,i=t.tweens[r];for(e in this.pause(),i)delete t.tweens[r][e];delete t.attrs[r][n]}}]),t}();e.Tween=v,v.attrs={},v.tweens={},u.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new v(t).play()},e.Easings={BackEaseIn:function(t,e,r,n){var i=1.70158;return r*(t/=n)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,r,n){var i=1.70158;return r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,r,n){var i=1.70158;return(t/=n/2)<1?r/2*(t*t*((1+(i*=1.525))*t-i))+e:r/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:1==(t/=n)?e+r:(o||(o=.3*n),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/o)+r+e)},ElasticEaseInOut:function(t,e,r,n,i,o){var a=0;return 0===t?e:2==(t/=n/2)?e+r:(o||(o=n*(.3*1.5)),!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*.5+r+e)},BounceEaseOut:function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,r,n,i){return n-e.Easings.BounceEaseOut(i-t,0,n,i)+r},BounceEaseInOut:function(t,r,n,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,n,i)+r:.5*e.Easings.BounceEaseOut(2*t-i,0,n,i)+.5*n+r},EaseIn:function(t,e,r,n){return r*(t/=n)*t+e},EaseOut:function(t,e,r,n){return-r*(t/=n)*(t-2)+e},EaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,r,n){return r*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,r,n){return r*t/n+e}}},7343:(t,e,r)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===i(o)?o:String(o)),n)}var o}Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;var a=r(79),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}var r,n;return r=t,(n=[{key:"reset",value:function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}},{key:"copy",value:function(){return new t(this.m)}},{key:"copyInto",value:function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}},{key:"point",value:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}},{key:"translate",value:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}},{key:"scale",value:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.m[0]*e+this.m[2]*r,i=this.m[1]*e+this.m[3]*r,o=this.m[0]*-r+this.m[2]*e,a=this.m[1]*-r+this.m[3]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=o,this.m[3]=a,this}},{key:"getTranslation",value:function(){return{x:this.m[4],y:this.m[5]}}},{key:"skew",value:function(t,e){var r=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=r,this.m[1]=n,this.m[2]=i,this.m[3]=o,this}},{key:"multiply",value:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"invert",value:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,r=-this.m[1]*t,n=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=r,this.m[2]=n,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"getMatrix",value:function(){return this.m}},{key:"decompose",value:function(){var t=this.m[0],r=this.m[1],n=this.m[2],i=this.m[3],o=t*i-r*n,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=r){var s=Math.sqrt(t*t+r*r);a.rotation=r>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=o/s,a.skewX=(t*n+r*i)/o,a.skewY=0}else if(0!=n||0!=i){var l=Math.sqrt(n*n+i*i);a.rotation=Math.PI/2-(i>0?Math.acos(-n/l):-Math.acos(n/l)),a.scaleX=o/l,a.scaleY=l,a.skewX=0,a.skewY=(t*n+r*i)/o}return a.rotation=e.Util._getRotation(a.rotation),a}}])&&o(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();e.Transform=s;var l=Math.PI/180,u=180/Math.PI,c="Konva error: ",f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},h=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,d=[],p="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){d.push(t),1===d.length&&p((function(){var t=d;d=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage:function(t,r){var n=e.Util.createImageElement();n.onload=function(){r(n)},n.src=t},_rgbToHex:function(t,e,r){return((1<<24)+(t<<16)+(e<<8)+r).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB:function(t){var e;return t in f?{r:(e=f[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=h.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=f[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((function(t,e){return"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)}));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA:function(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA:function(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,r,i,o=function(t){if(Array.isArray(t))return t}(d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(d)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=(o[0],o.slice(1)),s=Number(a[0])/360,l=Number(a[1])/100,u=Number(a[2])/100;if(0===l)return i=255*u,{r:Math.round(i),g:Math.round(i),b:Math.round(i),a:1};for(var c=2*u-(e=u<.5?u*(1+l):u+l-u*l),f=[0,0,0],h=0;h<3;h++)(r=s+1/3*-(h-1))<0&&r++,r>1&&r--,i=6*r<1?c+6*(e-c)*r:2*r<1?e:3*r<2?c+(e-c)*(2/3-r)*6:c,f[h]=255*i;return{r:Math.round(f[0]),g:Math.round(f[1]),b:Math.round(f[2]),a:1}}var d},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var r in t)this._isPlainObject(t[r])?e[r]=this.cloneObject(t[r]):this._isArray(t[r])?e[r]=this.cloneArray(t[r]):e[r]=t[r];return e},cloneArray:function(t){return t.slice(0)},degToRad:function(t){return t*l},radToDeg:function(t){return t*u},_degToRad:function(t){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)},_radToDeg:function(t){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)},_getRotation:function(t){return a.Konva.angleDeg?e.Util.radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(c+t)},error:function(t){console.error(c+t)},warn:function(t){a.Konva.showWarnings&&console.warn("Konva warning: "+t)},each:function(t,e){for(var r in t)e(r,t[r])},_inRange:function(t,e,r){return e<=t&&t<r},_getProjectionToSegment:function(t,e,r,n,i,o){var a,s,l,u=(t-r)*(t-r)+(e-n)*(e-n);if(0==u)a=t,s=e,l=(i-r)*(i-r)+(o-n)*(o-n);else{var c=((i-t)*(r-t)+(o-e)*(n-e))/u;c<0?(a=t,s=e,l=(t-i)*(t-i)+(e-o)*(e-o)):c>1?(a=r,s=n,l=(r-i)*(r-i)+(n-o)*(n-o)):l=((a=t+c*(r-t))-i)*(a-i)+((s=e+c*(n-e))-o)*(s-o)}return[a,s,l]},_getProjectionToLine:function(t,r,n){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return r.forEach((function(a,s){if(n||s!==r.length-1){var l=r[(s+1)%r.length],u=e.Util._getProjectionToSegment(a.x,a.y,l.x,l.y,t.x,t.y),c=u[0],f=u[1],h=u[2];h<o&&(i.x=c,i.y=f,o=h)}})),i},_prepareArrayForTween:function(t,r,n){var i,o=[],a=[];if(t.length>r.length){var s=r;r=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<r.length;i+=2)a.push({x:r[i],y:r[i+1]});var l=[];return a.forEach((function(t){var r=e.Util._getProjectionToLine(t,o,n);l.push(r.x),l.push(r.y)})),l},_prepareToStringify:function(t){var r;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==i(t[n]))if(r=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||e.Util._isElement(t[n])){if(!r.configurable)return null;delete t[n]}else if(null===e.Util._prepareToStringify(t[n])){if(!r.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var r in e)t[r]=e[r];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas:function(){if(a.Konva.releaseCanvasOnDestroy){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){t.width=0,t.height=0}))}},drawRoundedRectPath:function(t,e,r,n){var i=0,o=0,a=0,s=0;"number"==typeof n?i=o=a=s=Math.min(n,e/2,r/2):(i=Math.min(n[0]||0,e/2,r/2),o=Math.min(n[1]||0,e/2,r/2),s=Math.min(n[2]||0,e/2,r/2),a=Math.min(n[3]||0,e/2,r/2)),t.moveTo(i,0),t.lineTo(e-o,0),t.arc(e-o,o,o,3*Math.PI/2,0,!1),t.lineTo(e,r-s),t.arc(e-s,r-s,s,0,Math.PI/2,!1),t.lineTo(a,r),t.arc(a,r-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}}},8509:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentValidator=e.getBooleanValidator=e.getNumberArrayValidator=e.getFunctionValidator=e.getStringOrGradientValidator=e.getStringValidator=e.getNumberOrAutoValidator=e.getNumberOrArrayOfNumbersValidator=e.getNumberValidator=e.alphaComponent=e.RGBComponent=void 0;var n=r(79),i=r(7343);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(n.Konva.isUnminified)return function(e,r){var n=i.Util._isNumber(e),a=i.Util._isArray(e)&&e.length==t;return n||a||i.Util.warn(o(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(n.Konva.isUnminified)return function(t,e){var r=i.Util._isString(t),n="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return r||n||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(t,e){var r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(i.Util._isArray(t)?t.forEach((function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}},e.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(n.Konva.isUnminified)return function(e,r){return null==e||i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}},3643:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=r(79),i=r(7343),o=r(6039),a=r(6937),s=r(175),l=r(7979),u=r(8576),c=r(7828),f=r(1131),h=r(8442),d=r(6437),p=r(8754),v=r(7046),y=r(2138);e.Konva=i.Util._assign(n.Konva,{Util:i.Util,Transform:i.Transform,Node:o.Node,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:u.FastLayer,Group:c.Group,DD:f.DD,Shape:h.Shape,shapes:h.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:v.Context,Canvas:y.Canvas}),e.default=e.Konva},6337:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=r(3643),i=r(6837),o=r(8703),a=r(2632),s=r(7534),l=r(169),u=r(866),c=r(1964),f=r(9808),h=r(8929),d=r(1684),p=r(8858),v=r(1863),y=r(377),g=r(7768),m=r(3953),b=r(208),_=r(7786),w=r(5764),S=r(9182),x=r(6076),P=r(3315),k=r(4017),O=r(1319),C=r(4093),T=r(775),E=r(6698),j=r(899),M=r(9812),R=r(3641),A=r(8040),D=r(8602),F=r(7329),I=r(4361),G=r(9647),N=r(5104),L=r(675);e.Konva=n.Konva.Util._assign(n.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:l.Image,Label:u.Label,Tag:u.Tag,Line:c.Line,Path:f.Path,Rect:h.Rect,RegularPolygon:d.RegularPolygon,Ring:p.Ring,Sprite:v.Sprite,Star:y.Star,Text:g.Text,TextPath:m.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:w.Blur,Brighten:S.Brighten,Contrast:x.Contrast,Emboss:P.Emboss,Enhance:k.Enhance,Grayscale:O.Grayscale,HSL:C.HSL,HSV:T.HSV,Invert:E.Invert,Kaleidoscope:j.Kaleidoscope,Mask:M.Mask,Noise:R.Noise,Pixelate:A.Pixelate,Posterize:D.Posterize,RGB:F.RGB,RGBA:I.RGBA,Sepia:G.Sepia,Solarize:N.Solarize,Threshold:L.Threshold}})},5764:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;var n=r(9489),i=r(6039),o=r(8509);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var r,n,i,o,u,c,f,h,d,p,v,y,g,m,b,_,w,S,x,P,k,O,C,T,E=t.data,j=t.width,M=t.height,R=e+e+1,A=j-1,D=M-1,F=e+1,I=F*(F+1)/2,G=new a,N=null,L=G,U=null,B=null,z=s[e],V=l[e];for(i=1;i<R;i++)L=L.next=new a,i===F&&(N=L);for(L.next=G,f=c=0,n=0;n<M;n++){for(_=w=S=x=h=d=p=v=0,y=F*(P=E[c]),g=F*(k=E[c+1]),m=F*(O=E[c+2]),b=F*(C=E[c+3]),h+=I*P,d+=I*k,p+=I*O,v+=I*C,L=G,i=0;i<F;i++)L.r=P,L.g=k,L.b=O,L.a=C,L=L.next;for(i=1;i<F;i++)o=c+((A<i?A:i)<<2),h+=(L.r=P=E[o])*(T=F-i),d+=(L.g=k=E[o+1])*T,p+=(L.b=O=E[o+2])*T,v+=(L.a=C=E[o+3])*T,_+=P,w+=k,S+=O,x+=C,L=L.next;for(U=G,B=N,r=0;r<j;r++)E[c+3]=C=v*z>>V,0!==C?(C=255/C,E[c]=(h*z>>V)*C,E[c+1]=(d*z>>V)*C,E[c+2]=(p*z>>V)*C):E[c]=E[c+1]=E[c+2]=0,h-=y,d-=g,p-=m,v-=b,y-=U.r,g-=U.g,m-=U.b,b-=U.a,o=f+((o=r+e+1)<A?o:A)<<2,h+=_+=U.r=E[o],d+=w+=U.g=E[o+1],p+=S+=U.b=E[o+2],v+=x+=U.a=E[o+3],U=U.next,y+=P=B.r,g+=k=B.g,m+=O=B.b,b+=C=B.a,_-=P,w-=k,S-=O,x-=C,B=B.next,c+=4;f+=j}for(r=0;r<j;r++){for(w=S=x=_=d=p=v=h=0,y=F*(P=E[c=r<<2]),g=F*(k=E[c+1]),m=F*(O=E[c+2]),b=F*(C=E[c+3]),h+=I*P,d+=I*k,p+=I*O,v+=I*C,L=G,i=0;i<F;i++)L.r=P,L.g=k,L.b=O,L.a=C,L=L.next;for(u=j,i=1;i<=e;i++)c=u+r<<2,h+=(L.r=P=E[c])*(T=F-i),d+=(L.g=k=E[c+1])*T,p+=(L.b=O=E[c+2])*T,v+=(L.a=C=E[c+3])*T,_+=P,w+=k,S+=O,x+=C,L=L.next,i<D&&(u+=j);for(c=r,U=G,B=N,n=0;n<M;n++)E[3+(o=c<<2)]=C=v*z>>V,C>0?(C=255/C,E[o]=(h*z>>V)*C,E[o+1]=(d*z>>V)*C,E[o+2]=(p*z>>V)*C):E[o]=E[o+1]=E[o+2]=0,h-=y,d-=g,p-=m,v-=b,y-=U.r,g-=U.g,m-=U.b,b-=U.a,o=r+((o=n+F)<D?o:D)*j<<2,h+=_+=U.r=E[o],d+=w+=U.g=E[o+1],p+=S+=U.b=E[o+2],v+=x+=U.a=E[o+3],U=U.next,y+=P=B.r,g+=k=B.g,m+=O=B.b,b+=C=B.a,_-=P,w-=k,S-=O,x-=C,B=B.next,c+=j}}(t,e)},n.Factory.addGetterSetter(i.Node,"blurRadius",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},9182:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;var n=r(9489),i=r(6039),o=r(8509);e.Brighten=function(t){var e,r=255*this.brightness(),n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]+=r,n[e+1]+=r,n[e+2]+=r},n.Factory.addGetterSetter(i.Node,"brightness",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},6076:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;var n=r(9489),i=r(6039),o=r(8509);e.Contrast=function(t){var e,r=Math.pow((this.contrast()+100)/100,2),n=t.data,i=n.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=n[e],a=n[e+1],s=n[e+2],o/=255,o-=.5,o*=r,o+=.5,a/=255,a-=.5,a*=r,a+=.5,s/=255,s-=.5,s*=r,s+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,n[e]=o,n[e+1]=a,n[e+2]=s},n.Factory.addGetterSetter(i.Node,"contrast",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},3315:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;var n=r(9489),i=r(6039),o=r(7343),a=r(8509);e.Emboss=function(t){var e=10*this.embossStrength(),r=255*this.embossWhiteLevel(),n=this.embossDirection(),i=this.embossBlend(),a=0,s=0,l=t.data,u=t.width,c=t.height,f=4*u,h=c;switch(n){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+n)}do{var d=(h-1)*f,p=a;h+p<1&&(p=0),h+p>c&&(p=0);var v=(h-1+p)*u*4,y=u;do{var g=d+4*(y-1),m=s;y+m<1&&(m=0),y+m>u&&(m=0);var b=v+4*(y-1+m),_=l[g]-l[b],w=l[g+1]-l[b+1],S=l[g+2]-l[b+2],x=_,P=x>0?x:-x;if((w>0?w:-w)>P&&(x=w),(S>0?S:-S)>P&&(x=S),x*=e,i){var k=l[g]+x,O=l[g+1]+x,C=l[g+2]+x;l[g]=k>255?255:k<0?0:k,l[g+1]=O>255?255:O<0?0:O,l[g+2]=C>255?255:C<0?0:C}else{var T=r-x;T<0?T=0:T>255&&(T=255),l[g]=l[g+1]=l[g+2]=T}}while(--y)}while(--h)},n.Factory.addGetterSetter(i.Node,"embossStrength",.5,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},4017:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;var n=r(9489),i=r(6039),o=r(8509);function a(t,e,r,n,i){var o=r-e,a=i-n;return 0===o?n+a/2:0===a?n:a*((t-e)/o)+n}e.Enhance=function(t){var e,r,n,i,o=t.data,s=o.length,l=o[0],u=l,c=o[1],f=c,h=o[2],d=h,p=this.enhance();if(0!==p){for(i=0;i<s;i+=4)(e=o[i+0])<l?l=e:e>u&&(u=e),(r=o[i+1])<c?c=r:r>f&&(f=r),(n=o[i+2])<h?h=n:n>d&&(d=n);var v,y,g,m,b,_,w,S,x;for(u===l&&(u=255,l=0),f===c&&(f=255,c=0),d===h&&(d=255,h=0),p>0?(y=u+p*(255-u),g=l-p*(l-0),b=f+p*(255-f),_=c-p*(c-0),S=d+p*(255-d),x=h-p*(h-0)):(y=u+p*(u-(v=.5*(u+l))),g=l+p*(l-v),b=f+p*(f-(m=.5*(f+c))),_=c+p*(c-m),S=d+p*(d-(w=.5*(d+h))),x=h+p*(h-w)),i=0;i<s;i+=4)o[i+0]=a(o[i+0],l,u,g,y),o[i+1]=a(o[i+1],c,f,_,b),o[i+2]=a(o[i+2],h,d,x,S)}},n.Factory.addGetterSetter(i.Node,"enhance",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},1319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0,e.Grayscale=function(t){var e,r,n=t.data,i=n.length;for(e=0;e<i;e+=4)r=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=r,n[e+1]=r,n[e+2]=r}},4093:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;var n=r(9489),i=r(6039),o=r(8509);n.Factory.addGetterSetter(i.Node,"hue",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"luminance",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter),e.HSL=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,c=127*this.luminance(),f=1*l*Math.cos(u*Math.PI/180),h=1*l*Math.sin(u*Math.PI/180),d=.299+.701*f+.167*h,p=.587-.587*f+.33*h,v=.114-.114*f-.497*h,y=.299-.299*f-.328*h,g=.587+.413*f+.035*h,m=.114-.114*f+.293*h,b=.299-.3*f+1.25*h,_=.587-.586*f-1.05*h,w=.114+.886*f-.2*h;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=d*r+p*n+v*i+c,a[e+1]=y*r+g*n+m*i+c,a[e+2]=b*r+_*n+w*i+c,a[e+3]=o}},775:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;var n=r(9489),i=r(6039),o=r(8509);e.HSV=function(t){var e,r,n,i,o,a=t.data,s=a.length,l=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,f=l*u*Math.cos(c*Math.PI/180),h=l*u*Math.sin(c*Math.PI/180),d=.299*l+.701*f+.167*h,p=.587*l-.587*f+.33*h,v=.114*l-.114*f-.497*h,y=.299*l-.299*f-.328*h,g=.587*l+.413*f+.035*h,m=.114*l-.114*f+.293*h,b=.299*l-.3*f+1.25*h,_=.587*l-.586*f-1.05*h,w=.114*l+.886*f-.2*h;for(e=0;e<s;e+=4)r=a[e+0],n=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=d*r+p*n+v*i,a[e+1]=y*r+g*n+m*i,a[e+2]=b*r+_*n+w*i,a[e+3]=o},n.Factory.addGetterSetter(i.Node,"hue",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"value",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},6698:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0,e.Invert=function(t){var e,r=t.data,n=r.length;for(e=0;e<n;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2]}},899:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;var n=r(9489),i=r(6039),o=r(7343),a=r(8509);e.Kaleidoscope=function(t){var e,r,n,i,a,s,l,u,c,f=t.width,h=t.height,d=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),v=Math.floor(f*(p%360)/360);if(!(d<1)){var y=o.Util.createCanvasElement();y.width=f,y.height=h;var g=y.getContext("2d").getImageData(0,0,f,h);o.Util.releaseCanvas(y),function(t,e,r){var n,i,o,a,s=t.data,l=e.data,u=t.width,c=t.height,f=r.polarCenterX||u/2,h=r.polarCenterY||c/2,d=0,p=0,v=0,y=0,g=Math.sqrt(f*f+h*h);i=u-f,o=c-h,g=(a=Math.sqrt(i*i+o*o))>g?a:g;var m,b,_,w,S=c,x=u,P=360/x*Math.PI/180;for(b=0;b<x;b+=1)for(_=Math.sin(b*P),w=Math.cos(b*P),m=0;m<S;m+=1)i=Math.floor(f+g*m/S*w),d=s[0+(n=4*((o=Math.floor(h+g*m/S*_))*u+i))],p=s[n+1],v=s[n+2],y=s[n+3],l[0+(n=4*(b+m*u))]=d,l[n+1]=p,l[n+2]=v,l[n+3]=y}(t,g,{polarCenterX:f/2,polarCenterY:h/2});for(var m=f/Math.pow(2,d);m<=8;)m*=2,d-=1;var b=m=Math.ceil(m),_=0,w=b,S=1;for(v+m>f&&(_=b,w=0,S=-1),r=0;r<h;r+=1)for(e=_;e!==w;e+=S)u=4*(f*r+Math.round(e+v)%f),i=g.data[u+0],a=g.data[u+1],s=g.data[u+2],l=g.data[u+3],c=4*(f*r+e),g.data[c+0]=i,g.data[c+1]=a,g.data[c+2]=s,g.data[c+3]=l;for(r=0;r<h;r+=1)for(b=Math.floor(m),n=0;n<d;n+=1){for(e=0;e<b+1;e+=1)u=4*(f*r+e),i=g.data[u+0],a=g.data[u+1],s=g.data[u+2],l=g.data[u+3],c=4*(f*r+2*b-e-1),g.data[c+0]=i,g.data[c+1]=a,g.data[c+2]=s,g.data[c+3]=l;b*=2}!function(t,e,r){var n,i,o,a,s,l,u=t.data,c=e.data,f=t.width,h=t.height,d=r.polarCenterX||f/2,p=r.polarCenterY||h/2,v=0,y=0,g=0,m=0,b=Math.sqrt(d*d+p*p);i=f-d,o=h-p,b=(l=Math.sqrt(i*i+o*o))>b?l:b;var _,w,S,x=h,P=f,k=r.polarRotation||0;for(i=0;i<f;i+=1)for(o=0;o<h;o+=1)a=i-d,s=o-p,_=Math.sqrt(a*a+s*s)*x/b,w=(w=(180*Math.atan2(s,a)/Math.PI+360+k)%360)*P/360,S=Math.floor(w),v=u[0+(n=4*(Math.floor(_)*f+S))],y=u[n+1],g=u[n+2],m=u[n+3],c[0+(n=4*(o*f+i))]=v,c[n+1]=y,c[n+2]=g,c[n+3]=m}(g,t,{polarRotation:0})}},n.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),n.Factory.afterSetFilter)},9812:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;var n=r(9489),i=r(6039),o=r(8509);function a(t,e,r){var n=4*(r*t.width+e),i=[];return i.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),i}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var r=a(t,0,0),n=a(t,t.width-1,0),i=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),l=e||10;if(s(r,n)<l&&s(n,o)<l&&s(o,i)<l&&s(i,r)<l){for(var u=function(t){for(var e=[0,0,0],r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([n,r,o,i]),c=[],f=0;f<t.width*t.height;f++){var h=s(u,[t.data[4*f],t.data[4*f+1],t.data[4*f+2]]);c[f]=h<l?0:255}return c}}(t,this.threshold());return e&&function(t,e){for(var r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}(t,e=function(t,e,r){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=s+f-o,p=l+h-o;if(d>=0&&d<r&&p>=0&&p<e){var v=n[f*i+h];c+=t[d*e+p]*v}}a[u]=c}return a}(e=function(t,e,r){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=s+f-o,p=l+h-o;if(d>=0&&d<r&&p>=0&&p<e){var v=n[f*i+h];c+=t[d*e+p]*v}}a[u]=c>=1020?255:0}return a}(e=function(t,e,r){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),a=[],s=0;s<r;s++)for(var l=0;l<e;l++){for(var u=s*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=s+f-o,p=l+h-o;if(d>=0&&d<r&&p>=0&&p<e){var v=n[f*i+h];c+=t[d*e+p]*v}}a[u]=2040===c?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},n.Factory.addGetterSetter(i.Node,"threshold",0,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},3641:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var n=r(9489),i=r(6039),o=r(8509);e.Noise=function(t){var e,r=255*this.noise(),n=t.data,i=n.length,o=r/2;for(e=0;e<i;e+=4)n[e+0]+=o-2*o*Math.random(),n[e+1]+=o-2*o*Math.random(),n[e+2]+=o-2*o*Math.random()},n.Factory.addGetterSetter(i.Node,"noise",.2,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},8040:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;var n=r(9489),i=r(7343),o=r(6039),a=r(8509);e.Pixelate=function(t){var e,r,n,o,a,s,l,u,c,f,h,d,p,v,y=Math.ceil(this.pixelSize()),g=t.width,m=t.height,b=Math.ceil(g/y),_=Math.ceil(m/y),w=t.data;if(y<=0)i.Util.error("pixelSize value can not be <= 0");else for(d=0;d<b;d+=1)for(p=0;p<_;p+=1){for(o=0,a=0,s=0,l=0,c=(u=d*y)+y,h=(f=p*y)+y,v=0,e=u;e<c;e+=1)if(!(e>=g))for(r=f;r<h;r+=1)r>=m||(o+=w[0+(n=4*(g*r+e))],a+=w[n+1],s+=w[n+2],l+=w[n+3],v+=1);for(o/=v,a/=v,s/=v,l/=v,e=u;e<c;e+=1)if(!(e>=g))for(r=f;r<h;r+=1)r>=m||(w[0+(n=4*(g*r+e))]=o,w[n+1]=a,w[n+2]=s,w[n+3]=l)}},n.Factory.addGetterSetter(o.Node,"pixelSize",8,(0,a.getNumberValidator)(),n.Factory.afterSetFilter)},8602:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;var n=r(9489),i=r(6039),o=r(8509);e.Posterize=function(t){var e,r=Math.round(254*this.levels())+1,n=t.data,i=n.length,o=255/r;for(e=0;e<i;e+=1)n[e]=Math.floor(n[e]/o)*o},n.Factory.addGetterSetter(i.Node,"levels",.5,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},7329:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;var n=r(9489),i=r(6039),o=r(8509);e.RGB=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)r=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=r*o,n[e+1]=r*a,n[e+2]=r*s,n[e+3]=n[e+3]},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter)},4361:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;var n=r(9489),i=r(6039),o=r(8509);e.RGBA=function(t){var e,r,n=t.data,i=n.length,o=this.red(),a=this.green(),s=this.blue(),l=this.alpha();for(e=0;e<i;e+=4)r=1-l,n[e]=o*l+n[e]*r,n[e+1]=a*l+n[e+1]*r,n[e+2]=s*l+n[e+2]*r},n.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),n.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},9647:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0,e.Sepia=function(t){var e,r,n,i,o=t.data,a=o.length;for(e=0;e<a;e+=4)r=o[e+0],n=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*r+.769*n+.189*i),o[e+1]=Math.min(255,.349*r+.686*n+.168*i),o[e+2]=Math.min(255,.272*r+.534*n+.131*i)}},5104:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0,e.Solarize=function(t){var e=t.data,r=t.width,n=4*r,i=t.height;do{var o=(i-1)*n,a=r;do{var s=o+4*(a-1),l=e[s],u=e[s+1],c=e[s+2];l>127&&(l=255-l),u>127&&(u=255-u),c>127&&(c=255-c),e[s]=l,e[s+1]=u,e[s+2]=c}while(--a)}while(--i)}},675:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;var n=r(9489),i=r(6039),o=r(8509);e.Threshold=function(t){var e,r=255*this.threshold(),n=t.data,i=n.length;for(e=0;e<i;e+=1)n[e]=n[e]<r?0:255},n.Factory.addGetterSetter(i.Node,"threshold",.5,(0,o.getNumberValidator)(),n.Factory.afterSetFilter)},8274:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6337);t.exports=n.Konva},6837:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var s=r(9489),l=r(8442),u=r(79),c=r(8509),f=r(79),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,s,l,c=(s=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.apply(this,arguments)}return e=f,(r=[{key:"_sceneFunc",value:function(t){var e=u.Konva.getAngle(this.angle()),r=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,r),t.arc(0,0,this.innerRadius(),e,0,!r),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}},{key:"getSelfRect",value:function(){var t=this.innerRadius(),e=this.outerRadius(),r=this.clockwise(),n=u.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(n,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),a=Math.sin(Math.min(n,Math.PI/2)),s=i*(i>0?t:e),l=o*(o>0?t:e),c=a*(a>0?e:t);return{x:s,y:r?-1*c:l,width:1*e-s,height:c-l}}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(l.Shape);e.Arc=h,h.prototype._centroid=!0,h.prototype.className="Arc",h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,f._registerNode)(h),s.Factory.addGetterSetter(h,"innerRadius",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(h,"outerRadius",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(h,"angle",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(h,"clockwise",!1,(0,c.getBooleanValidator)())},8703:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;var l=r(9489),u=r(1964),c=r(8509),f=r(79),h=r(9808),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,t);var e,r,l,u,c=(l=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(l);if(u){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.apply(this,arguments)}return e=f,(r=[{key:"_sceneFunc",value:function(t){o(s(f.prototype),"_sceneFunc",this).call(this,t);var e=2*Math.PI,r=this.points(),n=r,i=0!==this.tension()&&r.length>4;i&&(n=this.getTensionPoints());var a,l,u=this.pointerLength(),c=r.length;if(i){var d=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],r[c-2],r[c-1]],p=h.Path.calcLength(n[n.length-4],n[n.length-3],"C",d),v=h.Path.getPointOnQuadraticBezier(Math.min(1,1-u/p),d[0],d[1],d[2],d[3],d[4],d[5]);a=r[c-2]-v.x,l=r[c-1]-v.y}else a=r[c-2]-r[c-4],l=r[c-1]-r[c-3];var y=(Math.atan2(l,a)+e)%e,g=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[c-2],r[c-1]),t.rotate(y),t.moveTo(0,0),t.lineTo(-u,g/2),t.lineTo(-u,-g/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),i?(a=(n[0]+n[2])/2-r[0],l=(n[1]+n[3])/2-r[1]):(a=r[2]-r[0],l=r[3]-r[1]),t.rotate((Math.atan2(-l,-a)+e)%e),t.moveTo(0,0),t.lineTo(-u,g/2),t.lineTo(-u,-g/2),t.closePath(),t.restore(),this.__fillStroke(t))}},{key:"__fillStroke",value:function(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}},{key:"getSelfRect",value:function(){var t=o(s(f.prototype),"getSelfRect",this).call(this),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(u.Line);e.Arrow=d,d.prototype.className="Arrow",(0,f._registerNode)(d),l.Factory.addGetterSetter(d,"pointerLength",10,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(d,"pointerWidth",10,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(d,"pointerAtBeginning",!1),l.Factory.addGetterSetter(d,"pointerAtEnding",!0)},2632:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var s=r(9489),l=r(8442),u=r(8509),c=r(79),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,r,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return e=c,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius()!==t/2&&this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius()!==t/2&&this.radius(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(l.Shape);e.Circle=f,f.prototype._centroid=!0,f.prototype.className="Circle",f.prototype._attrsAffectingSize=["radius"],(0,c._registerNode)(f),s.Factory.addGetterSetter(f,"radius",0,(0,u.getNumberValidator)())},7534:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;var s=r(9489),l=r(8442),u=r(8509),c=r(79),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,r,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return e=c,(r=[{key:"_sceneFunc",value:function(t){var e=this.radiusX(),r=this.radiusY();t.beginPath(),t.save(),e!==r&&t.scale(1,r/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radiusX()}},{key:"getHeight",value:function(){return 2*this.radiusY()}},{key:"setWidth",value:function(t){this.radiusX(t/2)}},{key:"setHeight",value:function(t){this.radiusY(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(l.Shape);e.Ellipse=f,f.prototype.className="Ellipse",f.prototype._centroid=!0,f.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,c._registerNode)(f),s.Factory.addComponentsGetterSetter(f,"radius",["x","y"]),s.Factory.addGetterSetter(f,"radiusX",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(f,"radiusY",0,(0,u.getNumberValidator)())},169:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var l=r(7343),u=r(9489),c=r(8442),f=r(79),h=r(8509),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(d,t);var e,r,u,c,f,h=(c=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(c);if(f){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=h.call(this,t)).on("imageChange.konva",(function(){e._setImageLoad()})),e._setImageLoad(),e}return e=d,u=[{key:"fromURL",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=l.Util.createImageElement();n.onload=function(){var t=new d({image:n});e(t)},n.onerror=r,n.crossOrigin="Anonymous",n.src=t}}],(r=[{key:"_setImageLoad",value:function(){var t=this,e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(function(){t._requestDraw()}))}},{key:"_useBufferCanvas",value:function(){return o(s(d.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_sceneFunc",value:function(t){var e,r=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image;if(o){var a=this.attrs.cropWidth,s=this.attrs.cropHeight;e=a&&s?[o,this.cropX(),this.cropY(),a,s,0,0,r,n]:[o,0,0,r,n]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?l.Util.drawRoundedRectPath(t,r,n,i):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)),o&&(i&&t.clip(),t.drawImage.apply(t,e))}},{key:"_hitFunc",value:function(t){var e=this.width(),r=this.height(),n=this.cornerRadius();t.beginPath(),n?l.Util.drawRoundedRectPath(t,e,r,n):t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}},{key:"getHeight",value:function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}}])&&i(e.prototype,r),u&&i(e,u),Object.defineProperty(e,"prototype",{writable:!1}),d}(c.Shape);e.Image=d,d.prototype.className="Image",(0,f._registerNode)(d),u.Factory.addGetterSetter(d,"cornerRadius",0,(0,h.getNumberOrArrayOfNumbersValidator)(4)),u.Factory.addGetterSetter(d,"image"),u.Factory.addComponentsGetterSetter(d,"crop",["x","y","width","height"]),u.Factory.addGetterSetter(d,"cropX",0,(0,h.getNumberValidator)()),u.Factory.addGetterSetter(d,"cropY",0,(0,h.getNumberValidator)()),u.Factory.addGetterSetter(d,"cropWidth",0,(0,h.getNumberValidator)()),u.Factory.addGetterSetter(d,"cropHeight",0,(0,h.getNumberValidator)())},866:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,i=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;var f=r(9489),h=r(8442),d=r(7828),p=r(8509),v=r(79),y=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],g="up",m="right",b="down",_="left",w=y.length,S=function(t){s(r,t);var e=u(r);function r(t){var n;return i(this,r),(n=e.call(this,t)).on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),n}return a(r,[{key:"getText",value:function(){return this.find("Text")[0]}},{key:"getTag",value:function(){return this.find("Tag")[0]}},{key:"_addListeners",value:function(t){var e,r=this,n=function(){r._sync()};for(e=0;e<w;e++)t.on(y[e]+"Change.konva",n)}},{key:"getWidth",value:function(){return this.getText().width()}},{key:"getHeight",value:function(){return this.getText().height()}},{key:"_sync",value:function(){var t,e,r,n,i,o,a,s=this.getText(),l=this.getTag();if(s&&l){switch(t=s.width(),e=s.height(),r=l.pointerDirection(),n=l.pointerWidth(),a=l.pointerHeight(),i=0,o=0,r){case g:i=t/2,o=-1*a;break;case m:i=t+n,o=e/2;break;case b:i=t/2,o=e+a;break;case _:i=-1*n,o=e/2}l.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*o})}}}]),r}(d.Group);e.Label=S,S.prototype.className="Label",(0,v._registerNode)(S);var x=function(t){s(r,t);var e=u(r);function r(){return i(this,r),e.apply(this,arguments)}return a(r,[{key:"_sceneFunc",value:function(t){var e=this.width(),r=this.height(),n=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius(),s=0,l=0,u=0,c=0;"number"==typeof a?s=l=u=c=Math.min(a,e/2,r/2):(s=Math.min(a[0]||0,e/2,r/2),l=Math.min(a[1]||0,e/2,r/2),c=Math.min(a[2]||0,e/2,r/2),u=Math.min(a[3]||0,e/2,r/2)),t.beginPath(),t.moveTo(s,0),n===g&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1),n===m&&(t.lineTo(e,(r-o)/2),t.lineTo(e+i,r/2),t.lineTo(e,(r+o)/2)),t.lineTo(e,r-c),t.arc(e-c,r-c,c,0,Math.PI/2,!1),n===b&&(t.lineTo((e+i)/2,r),t.lineTo(e/2,r+o),t.lineTo((e-i)/2,r)),t.lineTo(u,r),t.arc(u,r-u,u,Math.PI/2,Math.PI,!1),n===_&&(t.lineTo(0,(r+o)/2),t.lineTo(-1*i,r/2),t.lineTo(0,(r-o)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getSelfRect",value:function(){var t=0,e=0,r=this.pointerWidth(),n=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return i===g?(e-=n,a+=n):i===b?a+=n:i===_?(t-=1.5*r,o+=r):i===m&&(o+=1.5*r),{x:t,y:e,width:o,height:a}}}]),r}(h.Shape);e.Tag=x,x.prototype.className="Tag",(0,v._registerNode)(x),f.Factory.addGetterSetter(x,"pointerDirection","none"),f.Factory.addGetterSetter(x,"pointerWidth",0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(x,"pointerHeight",0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(x,"cornerRadius",0,(0,p.getNumberOrArrayOfNumbersValidator)(4))},1964:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var l=r(9489),u=r(8442),c=r(8509),f=r(79);function h(t,e,r,n,i,o,a){var s=Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2)),u=a*s/(s+l),c=a*l/(s+l);return[r-u*(i-t),n-u*(o-e),r+c*(i-t),n+c*(o-e)]}function d(t,e){var r,n,i=t.length,o=[];for(r=2;r<i-2;r+=2)n=h(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e),isNaN(n[0])||(o.push(n[0]),o.push(n[1]),o.push(t[r]),o.push(t[r+1]),o.push(n[2]),o.push(n[3]));return o}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(f,t);var e,r,l,u,c=(l=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(l);if(u){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=c.call(this,t)).on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),e}return e=f,(r=[{key:"_sceneFunc",value:function(t){var e,r,n,i=this.points(),o=i.length,a=this.tension(),s=this.closed(),l=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(r=(e=this.getTensionPoints()).length,n=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);n<r-2;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);s||t.quadraticCurveTo(e[r-2],e[r-1],i[o-2],i[o-1])}else if(l)for(n=2;n<o;)t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);else for(n=2;n<o;n+=2)t.lineTo(i[n],i[n+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}},{key:"getTensionPoints",value:function(){return this._getCache("tensionPoints",this._getTensionPoints)}},{key:"_getTensionPoints",value:function(){return this.closed()?this._getTensionPointsClosed():d(this.points(),this.tension())}},{key:"_getTensionPointsClosed",value:function(){var t=this.points(),e=t.length,r=this.tension(),n=h(t[e-2],t[e-1],t[0],t[1],t[2],t[3],r),i=h(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],r),o=d(t,r);return[n[2],n[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],n[0],n[1],t[0],t[1]])}},{key:"getWidth",value:function(){return this.getSelfRect().width}},{key:"getHeight",value:function(){return this.getSelfRect().height}},{key:"getSelfRect",value:function(){var t,e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var r,n,o=(e=0!==this.tension()?[e[0],e[1]].concat((t=this._getTensionPoints(),function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e[e.length-2],e[e.length-1]]):this.points())[0],a=e[0],s=e[1],l=e[1],u=0;u<e.length/2;u++)r=e[2*u],n=e[2*u+1],o=Math.min(o,r),a=Math.max(a,r),s=Math.min(s,n),l=Math.max(l,n);return{x:o,y:s,width:a-o,height:l-s}}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(u.Shape);e.Line=p,p.prototype.className="Line",p.prototype._attrsAffectingSize=["points","bezier","tension"],(0,f._registerNode)(p),l.Factory.addGetterSetter(p,"closed",!1),l.Factory.addGetterSetter(p,"bezier",!1),l.Factory.addGetterSetter(p,"tension",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(p,"points",[],(0,c.getNumberArrayValidator)())},9808:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var s=r(9489),l=r(8442),u=r(79),c=r(2882),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(h,t);var e,r,s,l,u,f=(l=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(l);if(u){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=f.call(this,t)).dataArray=[],e.pathLength=0,e._readDataAttribute(),e.on("dataChange.konva",(function(){this._readDataAttribute()})),e}return e=h,s=[{key:"getLineLength",value:function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}},{key:"getPathLength",value:function(t){for(var e=0,r=0;r<t.length;++r)e+=t[r].pathLength;return e}},{key:"getPointAtLengthOfDataArray",value:function(t,e){var r,n=0,i=e.length;if(!i)return null;for(;n<i&&t>e[n].pathLength;)t-=e[n].pathLength,++n;if(n===i)return{x:(r=e[n-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=e[n].points.slice(0,2))[0],y:r[1]};var o=e[n],a=o.points;switch(o.command){case"L":return h.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return h.getPointOnCubicBezier((0,c.t2length)(t,h.getPathLength(e),(function(t){return(0,c.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],t)})),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return h.getPointOnQuadraticBezier((0,c.t2length)(t,h.getPathLength(e),(function(t){return(0,c.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],t)})),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var s=a[0],l=a[1],u=a[2],f=a[3],d=a[4],p=a[5],v=a[6];return d+=p*t/o.pathLength,h.getPointOnEllipticalArc(s,l,u,f,d,v)}return null}},{key:"getPointOnLine",value:function(t,e,r,n,i,o,a){void 0===o&&(o=e),void 0===a&&(a=r);var s=(i-r)/(n-e+1e-8),l=Math.sqrt(t*t/(1+s*s));n<e&&(l*=-1);var u,c=s*l;if(n===e)u={x:o,y:a+c};else if((a-r)/(o-e+1e-8)===s)u={x:o+l,y:a+c};else{var f,h,d=this.getLineLength(e,r,n,i),p=(o-e)*(n-e)+(a-r)*(i-r);f=e+(p/=d*d)*(n-e),h=r+p*(i-r);var v=this.getLineLength(o,a,f,h),y=Math.sqrt(t*t-v*v);l=Math.sqrt(y*y/(1+s*s)),n<e&&(l*=-1),u={x:f+l,y:h+(c=s*l)}}return u}},{key:"getPointOnCubicBezier",value:function(t,e,r,n,i,o,a,s,l){function u(t){return t*t*t}function c(t){return 3*t*t*(1-t)}function f(t){return 3*t*(1-t)*(1-t)}function h(t){return(1-t)*(1-t)*(1-t)}return{x:s*u(t)+o*c(t)+n*f(t)+e*h(t),y:l*u(t)+a*c(t)+i*f(t)+r*h(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,r,n,i,o,a){function s(t){return t*t}function l(t){return 2*t*(1-t)}function u(t){return(1-t)*(1-t)}return{x:o*s(t)+n*l(t)+e*u(t),y:a*s(t)+i*l(t)+r*u(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,r,n,i,o){var a=Math.cos(o),s=Math.sin(o),l=r*Math.cos(i),u=n*Math.sin(i);return{x:t+(l*a-u*s),y:e+(l*s+u*a)}}},{key:"parsePathData",value:function(t){if(!t)return[];var e=t,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<r.length;n++)e=e.replace(new RegExp(r[n],"g"),"|"+r[n]);var i,o=e.split("|"),a=[],s=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<o.length;n++){var f=o[n],h=f.charAt(0);for(f=f.slice(1),s.length=0;i=c.exec(f);)s.push(i[0]);for(var d=[],p=0,v=s.length;p<v;p++)if("00"!==s[p]){var y=parseFloat(s[p]);isNaN(y)?d.push(0):d.push(y)}else d.push(0,0);for(;d.length>0&&!isNaN(d[0]);){var g,m,b,_,w,S,x,P,k,O,C="",T=[],E=l,j=u;switch(h){case"l":l+=d.shift(),u+=d.shift(),C="L",T.push(l,u);break;case"L":l=d.shift(),u=d.shift(),T.push(l,u);break;case"m":var M=d.shift(),R=d.shift();if(l+=M,u+=R,C="M",a.length>2&&"z"===a[a.length-1].command)for(var A=a.length-2;A>=0;A--)if("M"===a[A].command){l=a[A].points[0]+M,u=a[A].points[1]+R;break}T.push(l,u),h="l";break;case"M":l=d.shift(),u=d.shift(),C="M",T.push(l,u),h="L";break;case"h":l+=d.shift(),C="L",T.push(l,u);break;case"H":l=d.shift(),C="L",T.push(l,u);break;case"v":u+=d.shift(),C="L",T.push(l,u);break;case"V":u=d.shift(),C="L",T.push(l,u);break;case"C":T.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),u=d.shift(),T.push(l,u);break;case"c":T.push(l+d.shift(),u+d.shift(),l+d.shift(),u+d.shift()),l+=d.shift(),u+=d.shift(),C="C",T.push(l,u);break;case"S":m=l,b=u,"C"===(g=a[a.length-1]).command&&(m=l+(l-g.points[2]),b=u+(u-g.points[3])),T.push(m,b,d.shift(),d.shift()),l=d.shift(),u=d.shift(),C="C",T.push(l,u);break;case"s":m=l,b=u,"C"===(g=a[a.length-1]).command&&(m=l+(l-g.points[2]),b=u+(u-g.points[3])),T.push(m,b,l+d.shift(),u+d.shift()),l+=d.shift(),u+=d.shift(),C="C",T.push(l,u);break;case"Q":T.push(d.shift(),d.shift()),l=d.shift(),u=d.shift(),T.push(l,u);break;case"q":T.push(l+d.shift(),u+d.shift()),l+=d.shift(),u+=d.shift(),C="Q",T.push(l,u);break;case"T":m=l,b=u,"Q"===(g=a[a.length-1]).command&&(m=l+(l-g.points[0]),b=u+(u-g.points[1])),l=d.shift(),u=d.shift(),C="Q",T.push(m,b,l,u);break;case"t":m=l,b=u,"Q"===(g=a[a.length-1]).command&&(m=l+(l-g.points[0]),b=u+(u-g.points[1])),l+=d.shift(),u+=d.shift(),C="Q",T.push(m,b,l,u);break;case"A":_=d.shift(),w=d.shift(),S=d.shift(),x=d.shift(),P=d.shift(),k=l,O=u,l=d.shift(),u=d.shift(),C="A",T=this.convertEndpointToCenterParameterization(k,O,l,u,x,P,_,w,S);break;case"a":_=d.shift(),w=d.shift(),S=d.shift(),x=d.shift(),P=d.shift(),k=l,O=u,l+=d.shift(),u+=d.shift(),C="A",T=this.convertEndpointToCenterParameterization(k,O,l,u,x,P,_,w,S)}a.push({command:C||h,points:T,start:{x:E,y:j},pathLength:this.calcLength(E,j,C||h,T)})}"z"!==h&&"Z"!==h||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}},{key:"calcLength",value:function(t,e,r,n){var i,o,a,s,l=h;switch(r){case"L":return l.getLineLength(t,e,n[0],n[1]);case"C":return(0,c.getCubicArcLength)([t,n[0],n[2],n[4]],[e,n[1],n[3],n[5]],1);case"Q":return(0,c.getQuadraticArcLength)([t,n[0],n[2]],[e,n[1],n[3]],1);case"A":i=0;var u=n[4],f=n[5],d=n[4]+f,p=Math.PI/180;if(Math.abs(u-d)<p&&(p=Math.abs(u-d)),o=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),f<0)for(s=u-p;s>d;s-=p)a=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=l.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(s=u+p;s<d;s+=p)a=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=l.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=l.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),i+l.getLineLength(o.x,o.y,a.x,a.y)}return 0}},{key:"convertEndpointToCenterParameterization",value:function(t,e,r,n,i,o,a,s,l){var u=l*(Math.PI/180),c=Math.cos(u)*(t-r)/2+Math.sin(u)*(e-n)/2,f=-1*Math.sin(u)*(t-r)/2+Math.cos(u)*(e-n)/2,h=c*c/(a*a)+f*f/(s*s);h>1&&(a*=Math.sqrt(h),s*=Math.sqrt(h));var d=Math.sqrt((a*a*(s*s)-a*a*(f*f)-s*s*(c*c))/(a*a*(f*f)+s*s*(c*c)));i===o&&(d*=-1),isNaN(d)&&(d=0);var p=d*a*f/s,v=d*-s*c/a,y=(t+r)/2+Math.cos(u)*p-Math.sin(u)*v,g=(e+n)/2+Math.sin(u)*p+Math.cos(u)*v,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(c-p)/a,(f-v)/s]),S=[(c-p)/a,(f-v)/s],x=[(-1*c-p)/a,(-1*f-v)/s],P=_(S,x);return b(S,x)<=-1&&(P=Math.PI),b(S,x)>=1&&(P=0),0===o&&P>0&&(P-=2*Math.PI),1===o&&P<0&&(P+=2*Math.PI),[y,g,a,s,w,P,u,o]}}],(r=[{key:"_readDataAttribute",value:function(){this.dataArray=h.parsePathData(this.data()),this.pathLength=h.getPathLength(this.dataArray)}},{key:"_sceneFunc",value:function(t){var e=this.dataArray;t.beginPath();for(var r=!1,n=0;n<e.length;n++){var i=e[n].command,o=e[n].points;switch(i){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],f=o[5],h=o[6],d=o[7],p=l>u?l:u,v=l>u?1:l/u,y=l>u?u/l:1;t.translate(a,s),t.rotate(h),t.scale(v,y),t.arc(0,0,p,c,c+f,1-d),t.scale(1/v,1/y),t.rotate(-h),t.translate(-a,-s);break;case"z":r=!0,t.closePath()}}r||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}},{key:"getSelfRect",value:function(){var t=[];this.dataArray.forEach((function(e){if("A"===e.command){var r=e.points[4],n=e.points[5],i=e.points[4]+n,o=Math.PI/180;if(Math.abs(r-i)<o&&(o=Math.abs(r-i)),n<0)for(var a=r-o;a>i;a-=o){var s=h.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],a,0);t.push(s.x,s.y)}else for(var l=r+o;l<i;l+=o){var u=h.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],l,0);t.push(u.x,u.y)}}else if("C"===e.command)for(var c=0;c<=1;c+=.01){var f=h.getPointOnCubicBezier(c,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(f.x,f.y)}else t=t.concat(e.points)}));for(var e,r,n=t[0],i=t[0],o=t[1],a=t[1],s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],isNaN(e)||(n=Math.min(n,e),i=Math.max(i,e)),isNaN(r)||(o=Math.min(o,r),a=Math.max(a,r));return{x:n,y:o,width:i-n,height:a-o}}},{key:"getLength",value:function(){return this.pathLength}},{key:"getPointAtLength",value:function(t){return h.getPointAtLengthOfDataArray(t,this.dataArray)}}])&&i(e.prototype,r),s&&i(e,s),Object.defineProperty(e,"prototype",{writable:!1}),h}(l.Shape);e.Path=f,f.prototype.className="Path",f.prototype._attrsAffectingSize=["data"],(0,u._registerNode)(f),s.Factory.addGetterSetter(f,"data")},8929:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;var s=r(9489),l=r(8442),u=r(79),c=r(7343),f=r(8509),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,s,l,u=(s=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),u.apply(this,arguments)}return e=f,(r=[{key:"_sceneFunc",value:function(t){var e=this.cornerRadius(),r=this.width(),n=this.height();t.beginPath(),e?c.Util.drawRoundedRectPath(t,r,n,e):t.rect(0,0,r,n),t.closePath(),t.fillStrokeShape(this)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(l.Shape);e.Rect=h,h.prototype.className="Rect",(0,u._registerNode)(h),s.Factory.addGetterSetter(h,"cornerRadius",0,(0,f.getNumberOrArrayOfNumbersValidator)(4))},1684:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;var s=r(9489),l=r(8442),u=r(8509),c=r(79),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,r,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return e=c,(r=[{key:"_sceneFunc",value:function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;r++)t.lineTo(e[r].x,e[r].y);t.closePath(),t.fillStrokeShape(this)}},{key:"_getPoints",value:function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,r=[],n=0;n<t;n++)r.push({x:e*Math.sin(2*n*Math.PI/t),y:-1*e*Math.cos(2*n*Math.PI/t)});return r}},{key:"getSelfRect",value:function(){var t=this._getPoints(),e=t[0].x,r=t[0].y,n=t[0].x,i=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),r=Math.max(r,t.x),n=Math.min(n,t.y),i=Math.max(i,t.y)})),{x:e,y:n,width:r-e,height:i-n}}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(l.Shape);e.RegularPolygon=f,f.prototype.className="RegularPolygon",f.prototype._centroid=!0,f.prototype._attrsAffectingSize=["radius"],(0,c._registerNode)(f),s.Factory.addGetterSetter(f,"radius",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(f,"sides",0,(0,u.getNumberValidator)())},8858:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var s=r(9489),l=r(8442),u=r(8509),c=r(79),f=2*Math.PI,h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,r,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return e=c,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,f,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),f,0,!0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(l.Shape);e.Ring=h,h.prototype.className="Ring",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,c._registerNode)(h),s.Factory.addGetterSetter(h,"innerRadius",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(h,"outerRadius",0,(0,u.getNumberValidator)())},1863:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var l=r(9489),u=r(8442),c=r(6437),f=r(8509),h=r(79),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,t);var e,r,l,u,f=(l=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(l);if(u){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=f.call(this,t))._updated=!0,e.anim=new c.Animation((function(){var t=e._updated;return e._updated=!1,t})),e.on("animationChange.konva",(function(){this.frameIndex(0)})),e.on("frameIndexChange.konva",(function(){this._updated=!0})),e.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),e}return e=h,(r=[{key:"_sceneFunc",value:function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+0],s=i[n+1],l=i[n+2],u=i[n+3],c=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,u),t.closePath(),t.fillStrokeShape(this)),c)if(o){var f=o[e],h=2*r;t.drawImage(c,a,s,l,u,f[h+0],f[h+1],l,u)}else t.drawImage(c,a,s,l,u,0,0,l,u)}},{key:"_hitFunc",value:function(t){var e=this.animation(),r=this.frameIndex(),n=4*r,i=this.animations()[e],o=this.frameOffsets(),a=i[n+2],s=i[n+3];if(t.beginPath(),o){var l=o[e],u=2*r;t.rect(l[u+0],l[u+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)}},{key:"_useBufferCanvas",value:function(){return o(s(h.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_setInterval",value:function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}},{key:"start",value:function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}},{key:"stop",value:function(){this.anim.stop(),clearInterval(this.interval)}},{key:"isRunning",value:function(){return this.anim.isRunning()}},{key:"_updateIndex",value:function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),h}(u.Shape);e.Sprite=d,d.prototype.className="Sprite",(0,h._registerNode)(d),l.Factory.addGetterSetter(d,"animation"),l.Factory.addGetterSetter(d,"animations"),l.Factory.addGetterSetter(d,"frameOffsets"),l.Factory.addGetterSetter(d,"image"),l.Factory.addGetterSetter(d,"frameIndex",0,(0,f.getNumberValidator)()),l.Factory.addGetterSetter(d,"frameRate",17,(0,f.getNumberValidator)()),l.Factory.backCompat(d,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},377:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;var s=r(9489),l=r(8442),u=r(8509),c=r(79),f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(c,t);var e,r,s,l,u=(s=c,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return e=c,(r=[{key:"_sceneFunc",value:function(t){var e=this.innerRadius(),r=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-r);for(var i=1;i<2*n;i++){var o=i%2==0?r:e,a=o*Math.sin(i*Math.PI/n),s=-1*o*Math.cos(i*Math.PI/n);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(l.Shape);e.Star=f,f.prototype.className="Star",f.prototype._centroid=!0,f.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,c._registerNode)(f),s.Factory.addGetterSetter(f,"numPoints",5,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(f,"innerRadius",0,(0,u.getNumberValidator)()),s.Factory.addGetterSetter(f,"outerRadius",0,(0,u.getNumberValidator)())},7768:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.stringToArray=void 0;var l=r(7343),u=r(9489),c=r(8442),f=r(8509),h=r(79);function d(t){return Array.from(t)}e.stringToArray=d;var p,v="auto",y="justify",g="left",m="middle",b="normal",_=" ",w="none",S=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],x=S.length;function P(){return p||(p=l.Util.createCanvasElement().getContext("2d"))}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,t);var e,r,u,c,f=(u=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(u);if(c){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function h(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),e=f.call(this,function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),e._partialTextX=0,e._partialTextY=0;for(var r=0;r<x;r++)e.on(S[r]+"Change.konva",e._setTextData);return e._setTextData(),e}return e=h,(r=[{key:"_sceneFunc",value:function(t){var e=this.textArr,r=e.length;if(this.text()){var n,i=this.padding(),o=this.fontSize(),a=this.lineHeight()*o,s=this.verticalAlign(),l=0,u=this.align(),c=this.getWidth(),f=this.letterSpacing(),h=this.fill(),p=this.textDecoration(),v=-1!==p.indexOf("underline"),b=-1!==p.indexOf("line-through"),_=0,w=(_=a/2,0),S=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",m),t.setAttr("textAlign",g),s===m?l=(this.getHeight()-r*a-2*i)/2:"bottom"===s&&(l=this.getHeight()-r*a-2*i),t.translate(i,l+i),n=0;n<r;n++){w=0,S=0;var x,P,k,O=e[n],C=O.text,T=O.width,E=O.lastInParagraph;if(t.save(),"right"===u?w+=c-T-2*i:"center"===u&&(w+=(c-T-2*i)/2),v){t.save(),t.beginPath(),t.moveTo(w,_+S+Math.round(o/2)),P=0==(x=C.split(" ").length-1),k=u!==y||E?T:c-2*i,t.lineTo(w+Math.round(k),_+S+Math.round(o/2)),t.lineWidth=o/15;var j=this._getLinearGradient();t.strokeStyle=j||h,t.stroke(),t.restore()}if(b){t.save(),t.beginPath(),t.moveTo(w,_+S),P=0==(x=C.split(" ").length-1),k=u===y&&E&&!P?c-2*i:T,t.lineTo(w+Math.round(k),_+S),t.lineWidth=o/15;var M=this._getLinearGradient();t.strokeStyle=M||h,t.stroke(),t.restore()}if(0!==f||u===y){x=C.split(" ").length-1;for(var R=d(C),A=0;A<R.length;A++){var D=R[A];" "!==D||E||u!==y||(w+=(c-2*i-T)/x),this._partialTextX=w,this._partialTextY=_+S,this._partialText=D,t.fillStrokeShape(this),w+=this.measureSize(D).width+f}}else this._partialTextX=w,this._partialTextY=_+S,this._partialText=C,t.fillStrokeShape(this);t.restore(),r>1&&(_+=a)}}}},{key:"_hitFunc",value:function(t){var e=this.getWidth(),r=this.getHeight();t.beginPath(),t.rect(0,0,e,r),t.closePath(),t.fillStrokeShape(this)}},{key:"setText",value:function(t){var e=l.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}},{key:"getWidth",value:function(){return this.attrs.width===v||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}},{key:"getHeight",value:function(){return this.attrs.height===v||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return l.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"measureSize",value:function(t){var e,r=P(),n=this.fontSize();return r.save(),r.font=this._getContextFont(),e=r.measureText(t),r.restore(),{width:e.width,height:n}}},{key:"_getContextFont",value:function(){return this.fontStyle()+_+this.fontVariant()+_+(this.fontSize()+"px ")+this.fontFamily().split(",").map((function(t){var e=(t=t.trim()).indexOf(" ")>=0,r=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!r&&(t='"'.concat(t,'"')),t})).join(", ")}},{key:"_addTextLine",value:function(t){this.align()===y&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}},{key:"_getTextWidth",value:function(t){var e=this.letterSpacing(),r=t.length;return P().measureText(t).width+(r?e*(r-1):0)}},{key:"_setTextData",value:function(){var t=this.text().split("\n"),e=+this.fontSize(),r=0,n=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,a=i!==v&&void 0!==i,s=o!==v&&void 0!==o,l=this.padding(),u=i-2*l,c=o-2*l,f=0,h=this.wrap(),d="char"!==h&&h!==w,p=this.ellipsis();this.textArr=[],P().font=this._getContextFont();for(var y=p?this._getTextWidth("…"):0,g=0,m=t.length;g<m;++g){var b=t[g],S=this._getTextWidth(b);if(a&&S>u)for(;b.length>0;){for(var x=0,k=b.length,O="",C=0;x<k;){var T=x+k>>>1,E=b.slice(0,T+1),j=this._getTextWidth(E)+y;j<=u?(x=T+1,O=E,C=j):k=T}if(!O)break;if(d){var M,R=b[O.length];(M=(R===_||"-"===R)&&C<=u?O.length:Math.max(O.lastIndexOf(_),O.lastIndexOf("-"))+1)>0&&(x=M,O=O.slice(0,x),C=this._getTextWidth(O))}if(O=O.trimRight(),this._addTextLine(O),r=Math.max(r,C),f+=n,this._shouldHandleEllipsis(f)){this._tryToAddEllipsisToLastLine();break}if((b=(b=b.slice(x)).trimLeft()).length>0&&(S=this._getTextWidth(b))<=u){this._addTextLine(b),f+=n,r=Math.max(r,S);break}}else this._addTextLine(b),f+=n,r=Math.max(r,S),this._shouldHandleEllipsis(f)&&g<m-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&f+n>c)break}this.textHeight=e,this.textWidth=r}},{key:"_shouldHandleEllipsis",value:function(t){var e=+this.fontSize(),r=this.lineHeight()*e,n=this.attrs.height,i=n!==v&&void 0!==n,o=n-2*this.padding();return!(this.wrap()!==w)||i&&t+r>o}},{key:"_tryToAddEllipsisToLastLine",value:function(){var t=this.attrs.width,e=t!==v&&void 0!==t,r=t-2*this.padding(),n=this.ellipsis(),i=this.textArr[this.textArr.length-1];i&&n&&(e&&(this._getTextWidth(i.text+"…")<r||(i.text=i.text.slice(0,i.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(i.text+"…"))}},{key:"getStrokeScaleEnabled",value:function(){return!0}},{key:"_useBufferCanvas",value:function(){var t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!(!t||!e)||o(s(h.prototype),"_useBufferCanvas",this).call(this)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),h}(c.Shape);e.Text=k,k.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},k.prototype.className="Text",k.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,h._registerNode)(k),u.Factory.overWriteSetter(k,"width",(0,f.getNumberOrAutoValidator)()),u.Factory.overWriteSetter(k,"height",(0,f.getNumberOrAutoValidator)()),u.Factory.addGetterSetter(k,"fontFamily","Arial"),u.Factory.addGetterSetter(k,"fontSize",12,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(k,"fontStyle",b),u.Factory.addGetterSetter(k,"fontVariant",b),u.Factory.addGetterSetter(k,"padding",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(k,"align",g),u.Factory.addGetterSetter(k,"verticalAlign","top"),u.Factory.addGetterSetter(k,"lineHeight",1,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(k,"wrap","word"),u.Factory.addGetterSetter(k,"ellipsis",!1,(0,f.getBooleanValidator)()),u.Factory.addGetterSetter(k,"letterSpacing",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(k,"text","",(0,f.getStringValidator)()),u.Factory.addGetterSetter(k,"textDecoration","")},3953:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;var l=r(7343),u=r(9489),c=r(8442),f=r(9808),h=r(7768),d=r(8509),p=r(79),v="normal";function y(t){t.fillText(this.partialText,0,0)}function g(t){t.strokeText(this.partialText,0,0)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(p,t);var e,r,u,c,d=(u=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(u);if(c){var r=s(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function p(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=d.call(this,t)).dummyCanvas=l.Util.createCanvasElement(),e.dataArray=[],e._readDataAttribute(),e.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),e.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",e._setTextData),e._setTextData(),e}return e=p,(r=[{key:"_getTextPathLength",value:function(){return f.Path.getPathLength(this.dataArray)}},{key:"_getPointAtLength",value:function(t){return this.attrs.data?t-1>this.pathLength?null:f.Path.getPointAtLengthOfDataArray(t,this.dataArray):null}},{key:"_readDataAttribute",value:function(){this.dataArray=f.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}},{key:"_sceneFunc",value:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),r=this.fill(),n=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=r,t.lineWidth=n/20,t.stroke()),t.restore()}},{key:"_hitFunc",value:function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var r=e[0].p0;t.moveTo(r.x,r.y)}for(var n=0;n<e.length;n++){var i=e[n].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return l.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"setText",value:function(t){return h.Text.prototype.setText.call(this,t)}},{key:"_getContextFont",value:function(){return h.Text.prototype._getContextFont.call(this)}},{key:"_getTextSize",value:function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var r=e.measureText(t);return e.restore(),{width:r.width,height:parseInt("".concat(this.fontSize()),10)}}},{key:"_setTextData",value:function(){var t=this._getTextSize(this.attrs.text),e=t.width,r=t.height;if(this.textWidth=e,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;var n=this.letterSpacing(),i=this.align(),o=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0),s=0;"center"===i&&(s=Math.max(0,this.pathLength/2-a/2)),"right"===i&&(s=Math.max(0,this.pathLength-a));for(var l=(0,h.stringToArray)(this.text()),u=s,c=0;c<l.length;c++){var d=this._getPointAtLength(u);if(!d)return;var p=this._getTextSize(l[c]).width+n;if(" "===l[c]&&"justify"===i){var v=this.text().split(" ").length-1;p+=(this.pathLength-a)/v}var y=this._getPointAtLength(u+p);if(!y)return;var g=f.Path.getLineLength(d.x,d.y,y.x,y.y),m=0;if(o)try{m=o(l[c-1],l[c])*this.fontSize()}catch(t){m=0}d.x+=m,y.x+=m,this.textWidth+=m;var b=f.Path.getPointOnLine(m+g/2,d.x,d.y,y.x,y.y),_=Math.atan2(y.y-d.y,y.x-d.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:l[c],rotation:_,p0:d,p1:y}),u+=p}}},{key:"getSelfRect",value:function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,r,n=t[0]||0,i=t[0]||0,o=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],r=t[2*s+1],n=Math.min(n,e),i=Math.max(i,e),o=Math.min(o,r),a=Math.max(a,r);var l=this.fontSize();return{x:n-l/2,y:o-l/2,width:i-n+l,height:a-o+l}}},{key:"destroy",value:function(){return l.Util.releaseCanvas(this.dummyCanvas),o(s(p.prototype),"destroy",this).call(this)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),p}(c.Shape);e.TextPath=m,m.prototype._fillFunc=y,m.prototype._strokeFunc=g,m.prototype._fillFuncHit=y,m.prototype._strokeFuncHit=g,m.prototype.className="TextPath",m.prototype._attrsAffectingSize=["text","fontSize","data"],(0,p._registerNode)(m),u.Factory.addGetterSetter(m,"data"),u.Factory.addGetterSetter(m,"fontFamily","Arial"),u.Factory.addGetterSetter(m,"fontSize",12,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(m,"fontStyle",v),u.Factory.addGetterSetter(m,"align","left"),u.Factory.addGetterSetter(m,"letterSpacing",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(m,"textBaseline","middle"),u.Factory.addGetterSetter(m,"fontVariant",v),u.Factory.addGetterSetter(m,"text",""),u.Factory.addGetterSetter(m,"textDecoration",null),u.Factory.addGetterSetter(m,"kerningFunc",null)},208:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},o.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===n(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;var d=r(7343),p=r(9489),v=r(6039),y=r(8442),g=r(8929),m=r(7828),b=r(79),_=r(8509),w=r(79),S="tr-konva",x=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((function(t){return t+".".concat(S)})).join(" "),P="nodesRect",k=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],O={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},C="ontouchstart"in b.Konva._global,T=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function E(t,e,r){var n=r.x+(t.x-r.x)*Math.cos(e)-(t.y-r.y)*Math.sin(e),i=r.y+(t.x-r.x)*Math.sin(e)+(t.y-r.y)*Math.cos(e);return c(c({},t),{},{rotation:t.rotation+e,x:n,y:i})}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(h,t);var e,r,u,c,f=(u=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(u);if(c){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(this,t)});function h(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(e=f.call(this,t))._movingAnchorName=null,e._transforming=!1,e._createElements(),e._handleMouseMove=e._handleMouseMove.bind(s(e)),e._handleMouseUp=e._handleMouseUp.bind(s(e)),e.update=e.update.bind(s(e)),e.on(x,e.update),e.getNode()&&e.update(),e}return e=h,r=[{key:"attachTo",value:function(t){return this.setNode(t),this}},{key:"setNode",value:function(t){return d.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}},{key:"getNode",value:function(){return this._nodes&&this._nodes[0]}},{key:"_getEventNamespace",value:function(){return S+this._id}},{key:"setNodes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._nodes&&this._nodes.length&&this.detach();var r=e.filter((function(e){return!e.isAncestorOf(t)||(d.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)}));return this._nodes=e=r,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((function(e){var r=function(){1===t.nodes().length&&t.useSingleNodeRotation()&&t.rotation(t.nodes()[0].getAbsoluteRotation()),t._resetTransformCache(),t._transforming||t.isDragging()||t.update()},n=e._attrsAffectingSize.map((function(e){return e+"Change."+t._getEventNamespace()})).join(" ");e.on(n,r),e.on(k.map((function(e){return e+".".concat(t._getEventNamespace())})).join(" "),r),e.on("absoluteTransformChange.".concat(t._getEventNamespace()),r),t._proxyDrag(e)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}},{key:"_proxyDrag",value:function(t){var e,r=this;t.on("dragstart.".concat(this._getEventNamespace()),(function(n){e=t.getAbsolutePosition(),r.isDragging()||t===r.findOne(".back")||r.startDrag(n,!1)})),t.on("dragmove.".concat(this._getEventNamespace()),(function(n){if(e){var i=t.getAbsolutePosition(),o=i.x-e.x,a=i.y-e.y;r.nodes().forEach((function(e){if(e!==t&&!e.isDragging()){var r=e.getAbsolutePosition();e.setAbsolutePosition({x:r.x+o,y:r.y+a}),e.startDrag(n)}})),e=null}}))}},{key:"getNodes",value:function(){return this._nodes||[]}},{key:"getActiveAnchor",value:function(){return this._movingAnchorName}},{key:"detach",value:function(){var t=this;this._nodes&&this._nodes.forEach((function(e){e.off("."+t._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}},{key:"_resetTransformCache",value:function(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}},{key:"_getNodeRect",value:function(){return this._getCache(P,this.__getNodeRect)}},{key:"__getNodeShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotation(),r=arguments.length>2?arguments[2]:void 0,n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(r),o=t.getAbsolutePosition(r),a=n.x*i.x-t.offsetX()*i.x,s=n.y*i.y-t.offsetY()*i.y,l=(b.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return E({x:o.x+a*Math.cos(l)+s*Math.sin(-l),y:o.y+s*Math.cos(l)+a*Math.sin(l),width:n.width*i.x,height:n.height*i.y,rotation:l},-b.Konva.getAngle(e),{x:0,y:0})}},{key:"__getNodeRect",value:function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map((function(r){var n=r.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),i=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],o=r.getAbsoluteTransform();i.forEach((function(t){var r=o.point(t);e.push(r)}))}));var r=new d.Transform;r.rotate(-b.Konva.getAngle(this.rotation()));var n=1/0,i=1/0,o=-1/0,a=-1/0;e.forEach((function(t){var e=r.point(t);void 0===n&&(n=o=e.x,i=a=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y)})),r.invert();var s=r.point({x:n,y:i});return{x:s.x,y:s.y,width:o-n,height:a-i,rotation:b.Konva.getAngle(this.rotation())}}},{key:"getX",value:function(){return this._getNodeRect().x}},{key:"getY",value:function(){return this._getNodeRect().y}},{key:"getWidth",value:function(){return this._getNodeRect().width}},{key:"getHeight",value:function(){return this._getNodeRect().height}},{key:"_createElements",value:function(){var t=this;this._createBack(),T.forEach((function(e){t._createAnchor(e)})),this._createAnchor("rotater")}},{key:"_createAnchor",value:function(t){var e=this,r=new g.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:C?10:"auto"}),n=this;r.on("mousedown touchstart",(function(t){n._handleMouseDown(t)})),r.on("dragstart",(function(t){r.stopDrag(),t.cancelBubble=!0})),r.on("dragend",(function(t){t.cancelBubble=!0})),r.on("mouseenter",(function(){var n=b.Konva.getAngle(e.rotation()),i=e.rotateAnchorCursor(),o=function(t,e,r){if("rotater"===t)return r;e+=d.Util.degToRad(O[t]||0);var n=(d.Util.radToDeg(e)%360+360)%360;return d.Util._inRange(n,337.5,360)||d.Util._inRange(n,0,22.5)?"ns-resize":d.Util._inRange(n,22.5,67.5)?"nesw-resize":d.Util._inRange(n,67.5,112.5)?"ew-resize":d.Util._inRange(n,112.5,157.5)?"nwse-resize":d.Util._inRange(n,157.5,202.5)?"ns-resize":d.Util._inRange(n,202.5,247.5)?"nesw-resize":d.Util._inRange(n,247.5,292.5)?"ew-resize":d.Util._inRange(n,292.5,337.5)?"nwse-resize":(d.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n,i);r.getStage().content&&(r.getStage().content.style.cursor=o),e._cursorChange=!0})),r.on("mouseout",(function(){r.getStage().content&&(r.getStage().content.style.cursor=""),e._cursorChange=!1})),this.add(r)}},{key:"_createBack",value:function(){var t=this,e=new y.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t,e){var r=e.getParent(),n=r.padding();t.beginPath(),t.rect(-n,-n,e.width()+2*n,e.height()+2*n),t.moveTo(e.width()/2,-n),r.rotateEnabled()&&t.lineTo(e.width()/2,-r.rotateAnchorOffset()*d.Util._sign(e.height())-n),t.fillStrokeShape(e)},hitFunc:function(e,r){if(t.shouldOverdrawWholeArea()){var n=t.padding();e.beginPath(),e.rect(-n,-n,r.width()+2*n,r.height()+2*n),e.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(function(t){t.cancelBubble=!0})),e.on("dragmove",(function(t){t.cancelBubble=!0})),e.on("dragend",(function(t){t.cancelBubble=!0})),this.on("dragmove",(function(e){t.update()}))}},{key:"_handleMouseDown",value:function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),r=e.width,n=e.height,i=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.sin=Math.abs(n/i),this.cos=Math.abs(r/i),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((function(e){e._fire("transformstart",{evt:t.evt,target:e})}))}},{key:"_handleMouseMove",value:function(t){var e,r,n,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(t);var a=o.getPointerPosition(),s={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},l=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(l,s,t)),i.setAbsolutePosition(s);var u=i.getAbsolutePosition();if(l.x!==u.x||l.y!==u.y)if("rotater"!==this._movingAnchorName){var c,f=this.shiftBehavior();c="inverted"===f?this.keepRatio()&&!t.shiftKey:"none"===f?this.keepRatio():this.keepRatio()||t.shiftKey;var h=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(c){var d=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(d.y-i.y(),2));var p=this.findOne(".top-left").x()>d.x?-1:1,v=this.findOne(".top-left").y()>d.y?-1:1;e=n*this.cos*p,r=n*this.sin*v,this.findOne(".top-left").x(d.x-e),this.findOne(".top-left").y(d.y-r)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){c&&(d=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},n=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(d.y-i.y(),2)),p=this.findOne(".top-right").x()<d.x?-1:1,v=this.findOne(".top-right").y()>d.y?-1:1,e=n*this.cos*p,r=n*this.sin*v,this.findOne(".top-right").x(d.x+e),this.findOne(".top-right").y(d.y-r));var y=i.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(i.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(i.x()):"bottom-left"===this._movingAnchorName?(c&&(d=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},n=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(i.y()-d.y,2)),p=d.x<i.x()?-1:1,v=i.y()<d.y?-1:1,e=n*this.cos*p,r=n*this.sin*v,i.x(d.x-e),i.y(d.y+r)),y=i.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(i.y()):"bottom-right"===this._movingAnchorName?c&&(d=h?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},n=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(i.y()-d.y,2)),p=this.findOne(".bottom-right").x()<d.x?-1:1,v=this.findOne(".bottom-right").y()<d.y?-1:1,e=n*this.cos*p,r=n*this.sin*v,this.findOne(".bottom-right").x(d.x+e),this.findOne(".bottom-right").y(d.y+r)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(h=this.centeredScaling()||t.altKey){var g=this.findOne(".top-left"),m=this.findOne(".bottom-right"),_=g.x(),w=g.y(),S=this.getWidth()-m.x(),x=this.getHeight()-m.y();m.move({x:-_,y:-w}),g.move({x:S,y:x})}var P=this.findOne(".top-left").getAbsolutePosition();e=P.x,r=P.y;var k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),O=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:r,width:k,height:O,rotation:b.Konva.getAngle(this.rotation())},t)}else{var C=this._getNodeRect();e=i.x()-C.width/2,r=-i.y()+C.height/2;var T=Math.atan2(-r,e)+Math.PI/2;C.height<0&&(T-=Math.PI);var j=b.Konva.getAngle(this.rotation())+T,M=b.Konva.getAngle(this.rotationSnapTolerance()),R=function(t,e,r){for(var n=e,i=0;i<t.length;i++){var o=b.Konva.getAngle(t[i]),a=Math.abs(o-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<r&&(n=o)}return n}(this.rotationSnaps(),j,M),A=function(t,e){var r=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return E(t,e,r)}(C,R-C.rotation);this._fitNodesInto(A,t)}}},{key:"_handleMouseUp",value:function(t){this._removeEvents(t)}},{key:"getAbsoluteTransform",value:function(){return this.getTransform()}},{key:"_removeEvents",value:function(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((function(e){e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}},{key:"_fitNodesInto",value:function(t,e){var r=this,n=this._getNodeRect();if(d.Util._inRange(t.width,2*-this.padding()-1,1))this.update();else if(d.Util._inRange(t.height,2*-this.padding()-1,1))this.update();else{var i=this.flipEnabled(),o=new d.Transform;if(o.rotate(b.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var a=o.point({x:2*-this.padding(),y:0});if(t.x+=a.x,t.y+=a.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=a.x,this._anchorDragOffset.y-=a.y,!i)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var s=o.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=s.x,this._anchorDragOffset.y-=s.y,t.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var l=o.point({x:0,y:2*-this.padding()});if(t.x+=l.x,t.y+=l.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var u=o.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){var c=this.boundBoxFunc()(n,t);c?t=c:d.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var f=1e7,h=new d.Transform;h.translate(n.x,n.y),h.rotate(n.rotation),h.scale(n.width/f,n.height/f);var p=new d.Transform;p.translate(t.x,t.y),p.rotate(t.rotation),p.scale(t.width/f,t.height/f);var v=p.multiply(h.invert());this._nodes.forEach((function(t){var n,i=t.getParent().getAbsoluteTransform(),o=t.getTransform().copy();o.translate(t.offsetX(),t.offsetY());var a=new d.Transform;a.multiply(i.copy().invert()).multiply(v).multiply(i).multiply(o);var s=a.decompose();t.setAttrs(s),r._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()})),this.rotation(d.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}}},{key:"forceUpdate",value:function(){this._resetTransformCache(),this.update()}},{key:"_batchChangeChild",value:function(t,e){this.findOne(t).setAttrs(e)}},{key:"update",value:function(){var t,e=this,r=this._getNodeRect();this.rotation(d.Util._getRotation(r.rotation));var n=r.width,i=r.height,o=this.enabledAnchors(),a=this.resizeEnabled(),s=this.padding(),l=this.anchorSize(),u=this.find("._anchor");u.forEach((function(t){t.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+s,offsetY:l/2+s,visible:a&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+s,visible:a&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-s,offsetY:l/2+s,visible:a&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+s,visible:a&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:l/2-s,visible:a&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+s,offsetY:l/2-s,visible:a&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:l/2-s,visible:a&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:l/2-s,offsetY:l/2-s,visible:a&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*d.Util._sign(i)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});var c=this.anchorStyleFunc();c&&u.forEach((function(t){c(t)})),null===(t=this.getLayer())||void 0===t||t.batchDraw()}},{key:"isTransforming",value:function(){return this._transforming}},{key:"stopTransform",value:function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}},{key:"destroy",value:function(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),m.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}},{key:"toObject",value:function(){return v.Node.prototype.toObject.call(this)}},{key:"clone",value:function(t){return v.Node.prototype.clone.call(this,t)}},{key:"getClientRect",value:function(){return this.nodes().length>0?o(l(h.prototype),"getClientRect",this).call(this):{x:0,y:0,width:0,height:0}}}],r&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),h}(m.Group);e.Transformer=j,j.prototype.className="Transformer",(0,w._registerNode)(j),p.Factory.addGetterSetter(j,"enabledAnchors",T,(function(t){return t instanceof Array||d.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===T.indexOf(t)&&d.Util.warn("Unknown anchor name: "+t+". Available names are: "+T.join(", "))})),t||[]})),p.Factory.addGetterSetter(j,"flipEnabled",!0,(0,_.getBooleanValidator)()),p.Factory.addGetterSetter(j,"resizeEnabled",!0),p.Factory.addGetterSetter(j,"anchorSize",10,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"rotateEnabled",!0),p.Factory.addGetterSetter(j,"rotationSnaps",[]),p.Factory.addGetterSetter(j,"rotateAnchorOffset",50,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"rotateAnchorCursor","crosshair"),p.Factory.addGetterSetter(j,"rotationSnapTolerance",5,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"borderEnabled",!0),p.Factory.addGetterSetter(j,"anchorStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(j,"anchorStrokeWidth",1,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"anchorFill","white"),p.Factory.addGetterSetter(j,"anchorCornerRadius",0,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"borderStroke","rgb(0, 161, 255)"),p.Factory.addGetterSetter(j,"borderStrokeWidth",1,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"borderDash"),p.Factory.addGetterSetter(j,"keepRatio",!0),p.Factory.addGetterSetter(j,"shiftBehavior","default"),p.Factory.addGetterSetter(j,"centeredScaling",!1),p.Factory.addGetterSetter(j,"ignoreStroke",!1),p.Factory.addGetterSetter(j,"padding",0,(0,_.getNumberValidator)()),p.Factory.addGetterSetter(j,"node"),p.Factory.addGetterSetter(j,"nodes"),p.Factory.addGetterSetter(j,"boundBoxFunc"),p.Factory.addGetterSetter(j,"anchorDragBoundFunc"),p.Factory.addGetterSetter(j,"anchorStyleFunc"),p.Factory.addGetterSetter(j,"shouldOverdrawWholeArea",!1),p.Factory.addGetterSetter(j,"useSingleNodeRotation",!0),p.Factory.backCompat(j,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},7786:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===n(o)?o:String(o)),i)}var o}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;var s=r(9489),l=r(8442),u=r(79),c=r(8509),f=r(79),h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(f,t);var e,r,s,l,c=(s=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(s);if(l){var r=a(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),c.apply(this,arguments)}return e=f,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.radius(),0,u.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}])&&i(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(l.Shape);e.Wedge=h,h.prototype.className="Wedge",h.prototype._centroid=!0,h.prototype._attrsAffectingSize=["radius"],(0,f._registerNode)(h),s.Factory.addGetterSetter(h,"radius",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(h,"angle",0,(0,c.getNumberValidator)()),s.Factory.addGetterSetter(h,"clockwise",!1),s.Factory.backCompat(h,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})}}]);