(self.webpackChunkmylittlepaint2=self.webpackChunkmylittlepaint2||[]).push([[3],{1749:function(t,e,n){var r,i,o;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}t=n.nmd(t),o=function(){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(t){return r="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,n)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},p.apply(this,arguments)}function v(t){var e=function(t,e){if("object"!=a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var g=function(t){return!(!t||!t.Window)&&t instanceof t.Window},y=void 0,m=void 0;function b(t){y=t;var e=t.document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),m=t}function _(t){return g(t)?t:(t.ownerDocument||t).defaultView||m.window}"undefined"!=typeof window&&window&&b(window);var w=function(t){return!!t&&"object"===r(t)},S=function(t){return"function"==typeof t},x={window:function(t){return t===m||g(t)},docFrag:function(t){return w(t)&&11===t.nodeType},object:w,func:S,number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!==r(t))return!1;var e=_(t)||m;return/object|function/.test("undefined"==typeof Element?"undefined":r(Element))?t instanceof Element||t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:function(t){return w(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},array:function(t){return w(t)&&void 0!==t.length&&S(t.splice)}};function k(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function P(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var i="x"===r?"y":"x";e.page[i]=n.coords.start.page[i],e.client[i]=n.coords.start.client[i],e.delta[i]=0}}}var O={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.draggable=O.draggable,e.map.drag=O,e.methodDict.drag="draggable",r.actions.drag=O.defaults},listeners:{"interactions:before-action-move":k,"interactions:action-resume":k,"interactions:action-move":P,"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.buttons,i=n.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&n.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(t){return x.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):x.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:k,move:P,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(t){return 0===t.search("drag")}},C=O,T={init:function(t){var e=t;T.document=e.document,T.DocumentFragment=e.DocumentFragment||E,T.SVGElement=e.SVGElement||E,T.SVGSVGElement=e.SVGSVGElement||E,T.SVGElementInstance=e.SVGElementInstance||E,T.Element=e.Element||E,T.HTMLElement=e.HTMLElement||T.Element,T.Event=e.Event,T.Touch=e.Touch||E,T.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function E(){}var A=T,j={init:function(t){var e=A.Element,n=t.navigator||{};j.supportsTouch="ontouchstart"in t||x.func(t.DocumentTouch)&&A.document instanceof t.DocumentTouch,j.supportsPointerEvent=!1!==n.pointerEnabled&&!!A.PointerEvent,j.isIOS=/iP(hone|od|ad)/.test(n.platform),j.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),j.isIe9=/MSIE 9/.test(n.userAgent),j.isOperaMobile="Opera"===n.appName&&j.supportsTouch&&/Presto/.test(n.userAgent),j.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",j.pEventTypes=j.supportsPointerEvent?A.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,j.wheelEvent=A.document&&"onmousewheel"in A.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},M=j;function D(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function R(t,e){for(;x.element(t);){if(I(t,e))return t;t=F(t)}return null}function F(t){var e=t.parentNode;if(x.docFrag(e)){for(;(e=e.host)&&x.docFrag(e););return e}return e}function I(t,e){return m!==y&&(e=e.replace(/\/deep\//g," ")),t[M.prefixedMatchesSelector](e)}var G=function(t){return t.parentNode||t.host};function N(t,e){for(var n,r=[],i=t;(n=G(i))&&i!==e&&n!==i.ownerDocument;)r.unshift(i),i=n;return r}function L(t,e,n){for(;x.element(t);){if(I(t,e))return!0;if((t=F(t))===n)return I(t,e)}return!1}function U(t){return t.correspondingUseElement||t}function B(t){var e=t instanceof A.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function z(t){var e,n=B(t);if(!M.isIOS7&&n){var r={x:(e=(e=_(t))||m).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop};n.left+=r.x,n.right+=r.x,n.top+=r.y,n.bottom+=r.y}return n}function V(t){for(var e=[];t;)e.push(t),t=F(t);return e}function H(t){return!!x.string(t)&&(A.document.querySelector(t),!0)}function W(t,e){for(var n in e)t[n]=e[n];return t}function Y(t,e,n){return"parent"===t?F(n):"self"===t?e.getRect(n):R(n,t)}function X(t,e,n,r){var i=t;return x.string(i)?i=Y(i,e,n):x.func(i)&&(i=i.apply(void 0,r)),x.element(i)&&(i=z(i)),i}function K(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}}function q(t){return!t||"x"in t&&"y"in t||((t=W({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t}function Q(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top}function $(t,e,n){var r=n&&t.options[n];return K(X(r&&r.origin||t.options.origin,t,e,[t&&e]))||{x:0,y:0}}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return!0},r=arguments.length>3?arguments[3]:void 0;if(r=r||{},x.string(t)&&-1!==t.search(" ")&&(t=Z(t)),x.array(t))return t.forEach((function(t){return J(t,e,n,r)})),r;if(x.object(t)&&(e=t,t=""),x.func(e)&&n(t))r[t]=r[t]||[],r[t].push(e);else if(x.array(e))for(var i=0,o=e;i<o.length;i++){var a=o[i];J(t,a,n,r)}else if(x.object(e))for(var s in e)J(Z(s).map((function(e){return"".concat(t).concat(e)})),e[s],n,r);return r}function Z(t){return t.trim().split(/ +/)}var tt=function(t,e){return Math.sqrt(t*t+e*e)},et=["webkit","moz"];function nt(t,e){t.__set||(t.__set={});var n=function(n){if(et.some((function(t){return 0===n.indexOf(t)})))return 1;"function"!=typeof t[n]&&"__set"!==n&&Object.defineProperty(t,n,{get:function(){return n in t.__set?t.__set[n]:t.__set[n]=e[n]},set:function(e){t.__set[n]=e},configurable:!0})};for(var r in e)n(r);return t}function rt(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function it(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0}function ot(t){return t instanceof A.Event||t instanceof A.Touch}function at(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function st(t,e){return e=e||{x:0,y:0},M.isOperaMobile&&ot(t)?(at("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):at("page",t,e),e}function ct(t){return x.number(t.pointerId)?t.pointerId:t.identifier}function lt(t){var e=[];return x.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function ut(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r=t[n];for(var i in e)e[i]+=r[i]}for(var o in e)e[o]/=t.length;return e}function ht(t){if(!t.length)return null;var e=lt(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),o=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,right:i,bottom:o,width:i-n,height:o-r}}function ft(t,e){var n=e+"X",r=e+"Y",i=lt(t),o=i[0][n]-i[1][n],a=i[0][r]-i[1][r];return tt(o,a)}function dt(t,e){var n=e+"X",r=e+"Y",i=lt(t),o=i[1][n]-i[0][n],a=i[1][r]-i[0][r];return 180*Math.atan2(a,o)/Math.PI}function pt(t){return x.string(t.pointerType)?t.pointerType:x.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type||"")||t instanceof A.Touch?"touch":"mouse"}function vt(t){var e=x.func(t.composedPath)?t.composedPath():t.path;return[U(e?e[0]:t.target),U(t.currentTarget)]}var gt=function(){function t(e){i(this,t),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=e}return s(t,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),t}();Object.defineProperty(gt.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var yt=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}return t},mt=function(t){return yt([],t)},bt=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1},_t=function(t,e){return t[bt(t,e)]},wt=function(t){l(n,t);var e=d(n);function n(t,r,o){var a;i(this,n),(a=e.call(this,r._interaction)).dropzone=void 0,a.dragEvent=void 0,a.relatedTarget=void 0,a.draggable=void 0,a.propagationStopped=!1,a.immediatePropagationStopped=!1;var s="dragleave"===o?t.prev:t.cur,c=s.element,l=s.dropzone;return a.type=o,a.target=c,a.currentTarget=c,a.dropzone=l,a.dragEvent=r,a.relatedTarget=r.target,a.draggable=r.interactable,a.timeStamp=r.timeStamp,a}return s(n,[{key:"reject",value:function(){var t=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var r=e.activeDrops,i=bt(r,(function(e){var n=e.dropzone,r=e.element;return n===t.dropzone&&r===t.target}));e.activeDrops.splice(i,1);var o=new n(e,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new n(e,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),n}(gt);function St(t,e){for(var n=0,r=t.slice();n<r.length;n++){var i=r[n],o=i.dropzone,a=i.element;e.dropzone=o,e.target=a,o.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function xt(t,e){for(var n=function(t,e){for(var n=[],r=0,i=t.interactables.list;r<i.length;r++){var o=i[r];if(o.options.drop.enabled){var a=o.options.drop.accept;if(!(x.element(a)&&a!==e||x.string(a)&&!I(e,a)||x.func(a)&&!a({dropzone:o,draggableElement:e})))for(var s=0,c=o.getAllElements();s<c.length;s++){var l=c[s];l!==e&&n.push({dropzone:o,element:l,rect:o.getRect(l)})}}}return n}(t,e),r=0;r<n.length;r++){var i=n[r];i.rect=i.dropzone.getRect(i.element)}return n}function kt(t,e,n){for(var r=t.dropState,i=t.interactable,o=t.element,a=[],s=0,c=r.activeDrops;s<c.length;s++){var l=c[s],u=l.dropzone,h=l.element,f=l.rect,d=u.dropCheck(e,n,i,o,h,f);a.push(d?h:null)}var p=function(t){for(var e,n,r,i=[],o=0;o<t.length;o++){var a=t[o],s=t[e];if(a&&o!==e)if(s){var c=G(a),l=G(s);if(c!==a.ownerDocument)if(l!==a.ownerDocument)if(c!==l){i=i.length?i:N(s);var u=void 0;if(s instanceof A.HTMLElement&&a instanceof A.SVGElement&&!(a instanceof A.SVGSVGElement)){if(a===l)continue;u=a.ownerSVGElement}else u=a;for(var h=N(u,s.ownerDocument),f=0;h[f]&&h[f]===i[f];)f++;var d=[h[f-1],h[f],i[f]];if(d[0])for(var p=d[0].lastChild;p;){if(p===d[1]){e=o,i=h;break}if(p===d[2])break;p=p.previousSibling}}else r=s,(parseInt(_(n=a).getComputedStyle(n).zIndex,10)||0)>=(parseInt(_(r).getComputedStyle(r).zIndex,10)||0)&&(e=o);else e=o}else e=o}return e}(a);return r.activeDrops[p]||null}function Pt(t,e,n){var r=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new wt(r,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new wt(r,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(i.leave=new wt(r,n,"dragleave"),n.dragLeave=i.leave.target=r.prev.element,n.prevDropzone=i.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(i.enter=new wt(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(i.drop=new wt(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(i.move=new wt(r,n,"dropmove"),n.dropzone=r.cur.dropzone)),i}function Ot(t,e){var n=t.dropState,r=n.activeDrops,i=n.cur,o=n.prev;e.leave&&o.dropzone.fire(e.leave),e.enter&&i.dropzone.fire(e.enter),e.move&&i.dropzone.fire(e.move),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&St(r,e.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function Ct(t,e){var n=t.interaction,r=t.iEvent,i=t.event;if("dragmove"===r.type||"dragend"===r.type){var o=n.dropState;e.dynamicDrop&&(o.activeDrops=xt(e,n.element));var a=r,s=kt(n,a,i);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=Pt(n,0,a)}}var Tt={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,r=t.Interactable,i=t.defaults;t.usePlugin(C),r.prototype.dropzone=function(t){return function(t,e){if(x.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=J(e.listeners),r=Object.keys(n).reduce((function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=n[e],t}),{}),i=t.options.drop.listeners;i&&t.off(i),t.on(r),t.options.drop.listeners=r}return x.func(e.ondrop)&&t.on("drop",e.ondrop),x.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),x.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),x.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),x.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),x.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:x.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return x.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},r.prototype.dropCheck=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s=!1;if(!(a=a||t.getRect(o)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,s,t,o,r,i);var c=t.options.drop.overlap;if("pointer"===c){var l=$(r,i,"drag"),u=st(e);u.x+=l.x,u.y+=l.y;var h=u.x>a.left&&u.x<a.right,f=u.y>a.top&&u.y<a.bottom;s=h&&f}var d=r.getRect(i);if(d&&"center"===c){var p=d.left+d.width/2,v=d.top+d.height/2;s=p>=a.left&&p<=a.right&&v>=a.top&&v<=a.bottom}return d&&x.number(c)&&(s=Math.max(0,Math.min(a.right,d.right)-Math.max(a.left,d.left))*Math.max(0,Math.min(a.bottom,d.bottom)-Math.max(a.top,d.top))/(d.width*d.height)>=c),t.options.drop.checker&&(s=t.options.drop.checker(e,n,s,t,o,r,i)),s}(this,t,e,n,r,i,o)},n.dynamicDrop=function(e){return x.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},W(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=Tt.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var n=t.interaction,r=(t.event,t.iEvent);if("drag"===n.prepared.name){var i=n.dropState;i.activeDrops=[],i.events={},i.activeDrops=xt(e,n.element),i.events=Pt(n,0,r),i.events.activate&&(St(i.activeDrops,i.events.activate),e.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":Ct,"interactions:after-action-move":function(t,e){var n=t.interaction,r=t.iEvent;if("drag"===n.prepared.name){var i=n.dropState;Ot(n,i.events),e.fire("actions/drop:move",{interaction:n,dragEvent:r}),i.events={}}},"interactions:action-end":function(t,e){if("drag"===t.interaction.prepared.name){var n=t.interaction,r=t.iEvent;Ct(t,e),Ot(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:r})}},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:xt,getDrop:kt,getDropEvents:Pt,fireDropEvents:Ot,filterEventType:function(t){return 0===t.search("drag")||0===t.search("drop")},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Et=Tt;function At(t){var e=t.interaction,n=t.iEvent,r=t.phase;if("gesture"===e.prepared.name){var i=e.pointers.map((function(t){return t.pointer})),o="start"===r,a="end"===r,s=e.interactable.options.deltaSource;if(n.touches=[i[0],i[1]],o)n.distance=ft(i,s),n.box=ht(i),n.scale=1,n.ds=0,n.angle=dt(i,s),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(a||e.pointers.length<2){var c=e.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=ft(i,s),n.box=ht(i),n.scale=n.distance/e.gesture.startDistance,n.angle=dt(i,s),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,x.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}var jt={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.gesturable=function(t){return x.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):x.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=jt,e.methodDict.gesture="gesturable",r.actions.gesture=jt.defaults},listeners:{"interactions:action-start":At,"interactions:action-move":At,"interactions:action-end":At,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return t.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(t){return 0===t.search("gesture")}},Mt=jt;function Dt(t,e,n,r,i,o,a){if(!e)return!1;if(!0===e){var s=x.number(o.width)?o.width:o.right-o.left,c=x.number(o.height)?o.height:o.bottom-o.top;if(a=Math.min(a,Math.abs(("left"===t||"right"===t?s:c)/2)),s<0&&("left"===t?t="right":"right"===t&&(t="left")),c<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t){var l=s>=0?o.left:o.right;return n.x<l+a}if("top"===t){var u=c>=0?o.top:o.bottom;return n.y<u+a}if("right"===t)return n.x>(s>=0?o.right:o.left)-a;if("bottom"===t)return n.y>(c>=0?o.bottom:o.top)-a}return!!x.element(r)&&(x.element(e)?e===r:L(r,e,i))}function Rt(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=e;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}var Ft,It,Gt={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,n=t.browser,r=t.Interactable,i=t.defaults;Gt.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),Gt.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(e){return function(t,e,n){return x.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),x.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),x.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:x.bool(e.square)&&(t.options.resize.square=e.square),t):x.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=Gt,e.methodDict.resize="resizable",i.actions.resize=Gt.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.rect;n._rects={start:W({},i),corrected:W({},i),previous:W({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(t),Rt(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.interactable.options.resize.invert,o="reposition"===i||"negate"===i,a=n.rect,s=n._rects,c=s.start,l=s.corrected,u=s.delta,h=s.previous;if(W(h,l),o){if(W(l,a),"reposition"===i){if(l.top>l.bottom){var f=l.top;l.top=l.bottom,l.bottom=f}if(l.left>l.right){var d=l.left;l.left=l.right,l.right=d}}}else l.top=Math.min(a.top,c.bottom),l.bottom=Math.max(a.bottom,c.top),l.left=Math.min(a.left,c.right),l.right=Math.max(a.right,c.left);for(var p in l.width=l.right-l.left,l.height=l.bottom-l.top,l)u[p]=l[p]-h[p];r.edges=n.prepared.edges,r.rect=l,r.deltaRect=u}}(t),Rt(t)},"interactions:action-end":function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.element,i=t.rect,o=t.buttons;if(i){var a=W({},e.coords.cur.page),s=n.options.resize;if(s&&s.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(o&s.mouseButtons))){if(x.object(s.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var l in c)c[l]=Dt(l,s.edges[l],a,e._latestPointer.eventTarget,r,i,s.margin||Gt.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(t.action={name:"resize",edges:c})}else{var u="y"!==s.axis&&a.x>i.right-Gt.defaultMargin,h="x"!==s.axis&&a.y>i.bottom-Gt.defaultMargin;(u||h)&&(t.action={name:"resize",axes:(u?"x":"")+(h?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,r=t.name,i=Gt.cursors,o=null;if(n)o=i[r+n];else if(e){for(var a="",s=0,c=["top","bottom","left","right"];s<c.length;s++){var l=c[s];e[l]&&(a+=l)}o=i[a]}return o},filterEventType:function(t){return 0===t.search("resize")},defaultMargin:null},Nt=Gt,Lt={id:"actions",install:function(t){t.usePlugin(Mt),t.usePlugin(Nt),t.usePlugin(C),t.usePlugin(Et)}},Ut=0,Bt=function(t){return Ft(t)},zt=function(t){return It(t)},Vt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){Vt.isScrolling=!0,zt(Vt.i),t.autoScroll=Vt,Vt.interaction=t,Vt.prevTime=Vt.now(),Vt.i=Bt(Vt.scroll)},stop:function(){Vt.isScrolling=!1,Vt.interaction&&(Vt.interaction.autoScroll=null),zt(Vt.i)},scroll:function(){var t=Vt.interaction,e=t.interactable,n=t.element,r=t.prepared.name,i=e.options[r].autoScroll,o=Ht(i.container,e,n),a=Vt.now(),s=(a-Vt.prevTime)/1e3,c=i.speed*s;if(c>=1){var l={x:Vt.x*c,y:Vt.y*c};if(l.x||l.y){var u=Wt(o);x.window(o)?o.scrollBy(l.x,l.y):o&&(o.scrollLeft+=l.x,o.scrollTop+=l.y);var h=Wt(o),f={x:h.x-u.x,y:h.y-u.y};(f.x||f.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:f,interaction:t,container:o})}Vt.prevTime=a}Vt.isScrolling&&(zt(Vt.i),Vt.i=Bt(Vt.scroll))},check:function(t,e){var n;return null==(n=t.options[e].autoScroll)?void 0:n.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&Vt.check(e.interactable,e.prepared.name))if(e.simulation)Vt.x=Vt.y=0;else{var r,i,o,a,s=e.interactable,c=e.element,l=e.prepared.name,u=s.options[l].autoScroll,h=Ht(u.container,s,c);if(x.window(h))a=n.clientX<Vt.margin,r=n.clientY<Vt.margin,i=n.clientX>h.innerWidth-Vt.margin,o=n.clientY>h.innerHeight-Vt.margin;else{var f=B(h);a=n.clientX<f.left+Vt.margin,r=n.clientY<f.top+Vt.margin,i=n.clientX>f.right-Vt.margin,o=n.clientY>f.bottom-Vt.margin}Vt.x=i?1:a?-1:0,Vt.y=o?1:r?-1:0,Vt.isScrolling||(Vt.margin=u.margin,Vt.speed=u.speed,Vt.start(e))}}};function Ht(t,e,n){return(x.string(t)?Y(t,e,n):t)||_(n)}function Wt(t){return x.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var Yt={id:"auto-scroll",install:function(t){var e=t.defaults,n=t.actions;t.autoScroll=Vt,Vt.now=function(){return t.now()},n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=Vt.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,Vt.stop(),Vt.interaction&&(Vt.interaction=null)},"interactions:stop":Vt.stop,"interactions:action-move":function(t){return Vt.onInteractionMove(t)}}},Xt=Yt;function Kt(t,e){var n=!1;return function(){return n||(m.console.warn(e),n=!0),t.apply(this,arguments)}}function qt(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t}function Qt(t){return x.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function $t(t){return x.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var Jt={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,n,r,i){var o=function(t,e,n,r,i){var o=t.getRect(r),a={action:null,interactable:t,interaction:n,element:r,rect:o,buttons:e.buttons||{0:1,1:4,3:8,4:16}[e.button]};return i.fire("auto-start:check",a),a.action}(this,n,r,i,t);return this.options.actionChecker?this.options.actionChecker(e,n,o,this,i,r):o},e.prototype.ignoreFrom=Kt((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=Kt((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=$t,e.prototype.styleCursor=Qt}};function Zt(t,e,n,r,i){return e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&re(e,n,t,i)?t:null}function te(t,e,n,r,i,o,a){for(var s=0,c=r.length;s<c;s++){var l=r[s],u=i[s],h=l.getAction(e,n,t,u);if(h){var f=Zt(h,l,u,o,a);if(f)return{action:f,interactable:l,element:u}}}return{action:null,interactable:null,element:null}}function ee(t,e,n,r,i){var o=[],a=[],s=r;function c(t){o.push(t),a.push(s)}for(;x.element(s);){o=[],a=[],i.interactables.forEachMatch(s,c);var l=te(t,e,n,o,a,r,i);if(l.action&&!l.interactable.options[l.action.name].manualStart)return l;s=F(s)}return{action:null,interactable:null,element:null}}function ne(t,e,n){var r=e.action,i=e.interactable,o=e.element;r=r||{name:null},t.interactable=i,t.element=o,qt(t.prepared,r),t.rect=i&&r.name?i.getRect(o):null,ae(t,n),n.fire("autoStart:prepared",{interaction:t})}function re(t,e,n,r){var i=t.options,o=i[n.name].max,a=i[n.name].maxPerElement,s=r.autoStart.maxInteractions,c=0,l=0,u=0;if(!(o&&a&&s))return!1;for(var h=0,f=r.interactions.list;h<f.length;h++){var d=f[h],p=d.prepared.name;if(d.interacting()){if(++c>=s)return!1;if(d.interactable===t){if((l+=p===n.name?1:0)>=o)return!1;if(d.element===e&&(u++,p===n.name&&u>=a))return!1}}}return s>0}function ie(t,e){return x.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function oe(t,e,n){var r=n.autoStart.cursorElement;r&&r!==t&&(r.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function ae(t,e){var n=t.interactable,r=t.element,i=t.prepared;if("mouse"===t.pointerType&&n&&n.options.styleCursor){var o="";if(i.name){var a=n.options[i.name].cursorChecker;o=x.func(a)?a(i,n,r,t._interacting):e.actions.map[i.name].getCursor(i)}oe(t.element,o||"",e)}else e.autoStart.cursorElement&&oe(e.autoStart.cursorElement,"",e)}var se={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(Jt),n.base.actionChecker=null,n.base.styleCursor=!0,W(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return ie(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:re,cursorElement:null}},listeners:{"interactions:down":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget;n.interacting()||ne(n,ee(n,r,i,o,e),e)},"interactions:move":function(t,e){!function(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||ne(n,ee(n,r,i,o,e),e)}(t,e),function(t,e){var n=t.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){e.fire("autoStart:before-start",t);var r=n.interactable,i=n.prepared.name;i&&r&&(r.options[i].manualStart||!re(r,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,r,n.element),ae(n,e)))}}(t,e)},"interactions:stop":function(t,e){var n=t.interaction,r=n.interactable;r&&r.options.styleCursor&&oe(n.element,"",e)}},maxInteractions:ie,withinInteractionLimit:re,validateAction:Zt},ce=se,le={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var n=t.interaction,r=t.eventTarget,i=t.dx,o=t.dy;if("drag"===n.prepared.name){var a=Math.abs(i),s=Math.abs(o),c=n.interactable.options.drag,l=c.startAxis,u=a>s?"x":a<s?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?u[0]:c.lockAxis,"xy"!==u&&"xy"!==l&&l!==u){n.prepared.name=null;for(var h=r,f=function(t){if(t!==n.interactable){var i=n.interactable.options.drag;if(!i.manualStart&&t.testIgnoreAllow(i,h,r)){var o=t.getAction(n.downPointer,n.downEvent,n,h);if(o&&"drag"===o.name&&function(t,e){if(!e)return!1;var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(u,t)&&ce.validateAction(o,t,h,r,e))return t}}};x.element(h);){var d=e.interactables.forEachMatch(h,f);if(d){n.prepared.name="drag",n.interactable=d,n.element=h;break}h=F(h)}}}}}};function ue(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}var he={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(ce),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,n=ue(e);n>0&&(e.autoStartHoldTimer=setTimeout((function(){e.start(e.prepared,e.interactable,e.element)}),n))},"interactions:move":function(t){var e=t.interaction,n=t.duplicate;e.autoStartHoldTimer&&e.pointerWasMoved&&!n&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":function(t){var e=t.interaction;ue(e)>0&&(e.prepared.name=null)}},getHoldDuration:ue},fe=he,de={id:"auto-start",install:function(t){t.usePlugin(ce),t.usePlugin(fe),t.usePlugin(le)}},pe=function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):x.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault};function ve(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}var ge={id:"core/interactablePreventDefault",install:function(t){var e=t.Interactable;e.prototype.preventDefault=pe,e.prototype.checkAndPreventDefault=function(e){return function(t,e,n){var r=t.options.preventDefault;if("never"!==r)if("always"!==r){if(e.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){var i=_(n.target).document,o=e.getDocOptions(i);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||x.element(n.target)&&I(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var n=0,r=t.interactions.list;n<r.length;n++){var i=r[n];if(i.element&&(i.element===e.target||D(i.element,e.target)))return void i.interactable.checkAndPreventDefault(e)}}})},listeners:["down","move","up","cancel"].reduce((function(t,e){return t["interactions:".concat(e)]=ve,t}),{})};function ye(t,e){if(e.phaselessTypes[t])return!0;for(var n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1}function me(t){var e={};for(var n in t){var r=t[n];x.plainObject(r)?e[n]=me(r):x.array(r)?e[n]=mt(r):e[n]=r}return e}var be=function(){function t(e){i(this,t),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=e,this.result=_e(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return s(t,[{key:"start",value:function(t,e){var n,r,i=t.phase,o=this.interaction,a=function(t){var e=t.interactable.options[t.prepared.name],n=e.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(t){var n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(t){return!!t}))}(o);this.prepareStates(a),this.startEdges=W({},o.edges),this.edges=W({},this.startEdges),this.startOffset=(r=e,(n=o.rect)?{left:r.x-n.left,top:r.y-n.top,right:n.right-r.x,bottom:n.bottom-r.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var s=this.fillArg({phase:i,pageCoords:e,preEnd:!1});return this.result=_e(),this.startAll(s),this.result=this.setAll(s)}},{key:"fillArg",value:function(t){var e=this.interaction;return t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect||(t.rect=e.rect),t.edges||(t.edges=this.startEdges),t.startOffset=this.startOffset,t}},{key:"startAll",value:function(t){for(var e=0,n=this.states;e<n.length;e++){var r=n[e];r.methods.start&&(t.state=r,r.methods.start(t))}}},{key:"setAll",value:function(t){var e=t.phase,n=t.preEnd,r=t.skipModifiers,i=t.rect,o=t.edges;t.coords=W({},t.pageCoords),t.rect=W({},i),t.edges=W({},o);for(var a=r?this.states.slice(r):this.states,s=_e(t.coords,t.rect),c=0;c<a.length;c++){var l,u=a[c],h=u.options,f=W({},t.coords),d=null;null!=(l=u.methods)&&l.set&&this.shouldDo(h,n,e)&&(t.state=u,d=u.methods.set(t),Q(t.edges,t.rect,{x:t.coords.x-f.x,y:t.coords.y-f.y})),s.eventProps.push(d)}W(this.edges,t.edges),s.delta.x=t.coords.x-t.pageCoords.x,s.delta.y=t.coords.y-t.pageCoords.y,s.rectDelta.left=t.rect.left-i.left,s.rectDelta.right=t.rect.right-i.right,s.rectDelta.top=t.rect.top-i.top,s.rectDelta.bottom=t.rect.bottom-i.bottom;var p=this.result.coords,v=this.result.rect;if(p&&v){var g=s.rect.left!==v.left||s.rect.right!==v.right||s.rect.top!==v.top||s.rect.bottom!==v.bottom;s.changed=g||p.x!==s.coords.x||p.y!==s.coords.y}return s}},{key:"applyToInteraction",value:function(t){var e=this.interaction,n=t.phase,r=e.coords.cur,i=e.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===n&&W(this.startDelta,o.delta);for(var c=0,l=[[i,a],[r,s]];c<l.length;c++){var u=l[c],h=u[0],f=u[1];h.page.x+=f.x,h.page.y+=f.y,h.client.x+=f.x,h.client.y+=f.y}var d=this.result.rectDelta,p=t.rect||e.rect;p.left+=d.left,p.right+=d.right,p.top+=d.top,p.bottom+=d.bottom,p.width=p.right-p.left,p.height=p.bottom-p.top}},{key:"setAndApply",value:function(t){var e=this.interaction,n=t.phase,r=t.preEnd,i=t.skipModifiers,o=this.setAll(this.fillArg({preEnd:r,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page}));if(this.result=o,!o.changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var a=e.coords.cur.page,s={x:t.modifiedCoords.x-a.x,y:t.modifiedCoords.y-a.y};o.coords.x+=s.x,o.coords.y+=s.y,o.delta.x+=s.x,o.delta.y+=s.y}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,n=t.event,r=this.states;if(r&&r.length){for(var i=!1,o=0;o<r.length;o++){var a=r[o];t.state=a;var s=a.options,c=a.methods,l=c.beforeEnd&&c.beforeEnd(t);if(l)return this.endResult=l,!1;i=i||!i&&this.shouldDo(s,!0,t.phase,!0)}i&&e.move({event:n,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var n=W({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var r=0,i=this.states;r<i.length;r++){var o=i[r];n.state=o,o.methods.stop&&o.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.options,i=n.methods,o=n.name;this.states.push({options:r,methods:i,index:e,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,n=e.coords,r=e.rect,i=e.modification;if(i.result){for(var o=i.startDelta,a=i.result,s=a.delta,c=a.rectDelta,l=0,u=[[n.start,o],[n.cur,s]];l<u.length;l++){var h=u[l],f=h[0],d=h[1];f.page.x-=d.x,f.page.y-=d.y,f.client.x-=d.x,f.client.y-=d.y}r.left-=c.left,r.right-=c.right,r.top-=c.top,r.bottom-=c.bottom}}},{key:"shouldDo",value:function(t,e,n,r){return!(!t||!1===t.enabled||r&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.startEdges=t.startEdges,this.edges=t.edges,this.states=t.states.map((function(t){return me(t)})),this.result=_e(W({},t.result.coords),W({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}]),t}();function _e(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function we(t,e){var n=t.defaults,r={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=function(t){var i=t||{};for(var o in i.enabled=!1!==i.enabled,n)o in i||(i[o]=n[o]);var a={options:i,methods:r,name:e,enable:function(){return i.enabled=!0,a},disable:function(){return i.enabled=!1,a}};return a};return e&&"string"==typeof e&&(i._defaults=n,i._methods=r),i}function Se(t){var e=t.iEvent,n=t.interaction.modification.result;n&&(e.modifiers=n.eventProps)}var xe={id:"modifiers/base",before:["actions"],install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new be(e)},"interactions:before-action-start":function(t){var e=t.interaction,n=t.interaction.modification;n.start(t,e.coords.start.page),e.edges=n.edges,n.applyToInteraction(t)},"interactions:before-action-move":function(t){var e=t.interaction,n=e.modification,r=n.setAndApply(t);return e.edges=n.edges,r},"interactions:before-action-end":function(t){var e=t.interaction,n=e.modification,r=n.beforeEnd(t);return e.edges=n.startEdges,r},"interactions:action-start":Se,"interactions:action-move":Se,"interactions:action-end":Se,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}}},ke=xe,Pe={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},Oe=function(t){l(n,t);var e=d(n);function n(t,r,o,a,s,c,l){var u;i(this,n),(u=e.call(this,t)).relatedTarget=null,u.screenX=void 0,u.screenY=void 0,u.button=void 0,u.buttons=void 0,u.ctrlKey=void 0,u.shiftKey=void 0,u.altKey=void 0,u.metaKey=void 0,u.page=void 0,u.client=void 0,u.delta=void 0,u.rect=void 0,u.x0=void 0,u.y0=void 0,u.t0=void 0,u.dt=void 0,u.duration=void 0,u.clientX0=void 0,u.clientY0=void 0,u.velocity=void 0,u.speed=void 0,u.swipe=void 0,u.axes=void 0,u.preEnd=void 0,s=s||t.element;var h=t.interactable,d=(h&&h.options||Pe).deltaSource,p=$(h,s,o),v="start"===a,g="end"===a,y=v?f(u):t.prevEvent,m=v?t.coords.start:g?{page:y.page,client:y.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;return u.page=W({},m.page),u.client=W({},m.client),u.rect=W({},t.rect),u.timeStamp=m.timeStamp,g||(u.page.x-=p.x,u.page.y-=p.y,u.client.x-=p.x,u.client.y-=p.y),u.ctrlKey=r.ctrlKey,u.altKey=r.altKey,u.shiftKey=r.shiftKey,u.metaKey=r.metaKey,u.button=r.button,u.buttons=r.buttons,u.target=s,u.currentTarget=s,u.preEnd=c,u.type=l||o+(a||""),u.interactable=h,u.t0=v?t.pointers[t.pointers.length-1].downTime:y.t0,u.x0=t.coords.start.page.x-p.x,u.y0=t.coords.start.page.y-p.y,u.clientX0=t.coords.start.client.x-p.x,u.clientY0=t.coords.start.client.y-p.y,u.delta=v||g?{x:0,y:0}:{x:u[d].x-y[d].x,y:u[d].y-y[d].y},u.dt=t.coords.delta.timeStamp,u.duration=u.timeStamp-u.t0,u.velocity=W({},t.coords.velocity[d]),u.speed=tt(u.velocity.x,u.velocity.y),u.swipe=g||"inertiastart"===a?u.getSwipe():null,u}return s(n,[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5;return{up:r,down:!r&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),n}(gt);Object.defineProperties(Oe.prototype,{pageX:{get:function(){return this.page.x},set:function(t){this.page.x=t}},pageY:{get:function(){return this.page.y},set:function(t){this.page.y=t}},clientX:{get:function(){return this.client.x},set:function(t){this.client.x=t}},clientY:{get:function(){return this.client.y},set:function(t){this.client.y=t}},dx:{get:function(){return this.delta.x},set:function(t){this.delta.x=t}},dy:{get:function(){return this.delta.y},set:function(t){this.delta.y=t}},velocityX:{get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},velocityY:{get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}});var Ce=s((function t(e,n,r,o,a){i(this,t),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=e,this.pointer=n,this.event=r,this.downTime=o,this.downTarget=a})),Te=function(t){return t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy="",t}({}),Ee=function(t){return t.start="",t.move="",t.end="",t.stop="",t.interacting="",t}({}),Ae=0,je=function(){function t(e){var n=this,r=e.pointerType,o=e.scopeFire;i(this,t),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Kt((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=Ae++,this._scopeFire=o,this.pointerType=r;var a=this;this._proxy={};var s=function(t){Object.defineProperty(n._proxy,t,{get:function(){return a[t]}})};for(var c in Te)s(c);var l=function(t){Object.defineProperty(n._proxy,t,{value:function(){return a[t].apply(a,arguments)}})};for(var u in Ee)l(u);this._scopeFire("interactions:new",{interaction:this})}return s(t,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(t,e,n){var r=this.updatePointer(t,e,n,!0),i=this.pointers[r];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(qt(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?W({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);var r,i,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=tt(r,i)>this.pointerMoveTolerance);var a,s,c,l=this.getPointerIndex(t),u={pointer:t,pointerIndex:l,pointerInfo:this.pointers[l],event:e,type:"move",eventTarget:n,dx:r,dy:i,duplicate:o,interaction:this};o||(a=this.coords.velocity,s=this.coords.delta,c=Math.max(s.timeStamp/1e3,.001),a.page.x=s.page.x/c,a.page.y=s.page.y/c,a.client.x=s.client.x/c,a.client.y=s.client.y/c,a.timeStamp=c),this._scopeFire("interactions:move",u),o||this.simulation||(this.interacting()&&(u.type=null,this.move(u)),this.pointerWasMoved&&rt(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||it(this.coords.delta),(t=W({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,n,r){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,n,!1));var o=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:n,type:o,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=ct(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:bt(this.pointers,(function(t){return t.id===e}))}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,n,r){var i,o,a,s=ct(t),c=this.getPointerIndex(t),l=this.pointers[c];return r=!1!==r&&(r||/(down|start)$/i.test(e.type)),l?l.pointer=t:(l=new Ce(s,t,e,null,null),c=this.pointers.length,this.pointers.push(l)),function(t,e,n){var r=e.length>1?ut(e):e[0];st(r,t.page),function(t,e){e=e||{},M.isOperaMobile&&ot(t)?at("screen",t,e):at("client",t,e)}(r,t.client),t.timeStamp=n}(this.coords.cur,this.pointers.map((function(t){return t.pointer})),this._now()),i=this.coords.delta,o=this.coords.prev,a=this.coords.cur,i.page.x=a.page.x-o.page.x,i.page.y=a.page.y-o.page.y,i.client.x=a.client.x-o.client.x,i.client.y=a.client.y-o.client.y,i.timeStamp=a.timeStamp-o.timeStamp,r&&(this.pointerIsDown=!0,l.downTime=this.coords.cur.timeStamp,l.downTarget=n,nt(this.downPointer,t),this.interacting()||(rt(this.coords.start,this.coords.cur),rt(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:r,pointerInfo:l,pointerIndex:c,interaction:this}),c}},{key:"removePointer",value:function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,n,r){return new Oe(this,t,this.prepared.name,e,this.element,n,r)}},{key:"_fireEvent",value:function(t){var e;null==(e=this.interactable)||e.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,n=t.phase,r=t.preEnd,i=t.type,o=this.rect;if(o&&"move"===n&&(Q(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(n),t))return!1;var a=t.iEvent=this._createPreparedEvent(e,n,r,i);return this._scopeFire("interactions:action-".concat(n),t),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),t),!0}},{key:"_now",value:function(){return Date.now()}}]),t}();function Me(t){De(t.interaction)}function De(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;var e=t.offset.pending;return Fe(t.coords.cur,e),Fe(t.coords.delta,e),Q(t.edges,t.rect,e),e.x=0,e.y=0,!0}function Re(t){var e=t.x,n=t.y;this.offset.pending.x+=e,this.offset.pending.y+=n,this.offset.total.x+=e,this.offset.total.y+=n}function Fe(t,e){var n=t.page,r=t.client,i=e.x,o=e.y;n.x+=i,n.y+=o,r.x+=i,r.y+=o}Ee.offsetBy="";var Ie={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(t){t.Interaction.prototype.offsetBy=Re},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return function(t){t.pointerIsDown&&(Fe(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}(t.interaction)},"interactions:before-action-start":Me,"interactions:before-action-move":Me,"interactions:before-action-end":function(t){var e=t.interaction;if(De(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}},Ge=Ie,Ne=function(){function t(e){i(this,t),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=e}return s(t,[{key:"start",value:function(t){var e=this.interaction,n=Le(e);if(!n||!n.enabled)return!1;var r=e.coords.velocity.client,i=tt(r.x,r.y),o=this.modification||(this.modification=new be(e));if(o.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg=o.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-e.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,n=Le(this.interaction),r=n.resistance,i=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(e.x-i)/r,y:(e.y-i)/r},this.te=i,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.onNextFrame((function(){return t.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return t.smoothEndTick()}))}},{key:"onNextFrame",value:function(t){var e=this;this.timeout=Bt((function(){e.active&&t()}))}},{key:"inertiaTick",value:function(){var t,e,n,r,i,o=this,a=this.interaction,s=Le(a).resistance,c=(a._now()-this.t0)/1e3;if(c<this.te){var l,u=1-(Math.exp(-s*c)-this.lambda_v0)/this.one_ve_v0;this.isModified?(t=this.targetOffset.x,e=this.targetOffset.y,n=this.modifiedOffset.x,r=this.modifiedOffset.y,l={x:Be(i=u,0,t,n),y:Be(i,0,e,r)}):l={x:this.targetOffset.x*u,y:this.targetOffset.y*u};var h={x:l.x-this.currentOffset.x,y:l.y-this.currentOffset.y};this.currentOffset.x+=h.x,this.currentOffset.y+=h.y,a.offsetBy(h),a.move(),this.onNextFrame((function(){return o.inertiaTick()}))}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,n=e._now()-this.t0,r=Le(e).smoothEndDuration;if(n<r){var i={x:ze(n,0,this.targetOffset.x,r),y:ze(n,0,this.targetOffset.y,r)},o={x:i.x-this.currentOffset.x,y:i.y-this.currentOffset.y};this.currentOffset.x+=o.x,this.currentOffset.y+=o.y,e.offsetBy(o),e.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return t.smoothEndTick()}))}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,n=t.event,r=t.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(e,n,r,!0),i._doPhase({interaction:i,event:n,phase:"resume"}),rt(i.coords.prev,i.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,zt(this.timeout)}}]),t}();function Le(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}var Ue={id:"inertia",before:["modifiers","actions"],install:function(t){var e=t.defaults;t.usePlugin(Ge),t.usePlugin(ke),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new Ne(e)},"interactions:before-action-end":function(t){var e=t.interaction,n=t.event;return(!e._interacting||e.simulation||!e.inertia.start(n))&&null},"interactions:down":function(t){var e=t.interaction,n=t.eventTarget,r=e.inertia;if(r.active)for(var i=n;x.element(i);){if(i===e.element){r.resume(t);break}i=F(i)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":Se,"interactions:action-inertiastart":Se,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};function Be(t,e,n,r){var i=1-t;return i*i*e+2*i*t*n+t*t*r}function ze(t,e,n,r){return-n*(t/=r)*(t-2)+e}var Ve=Ue;function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t.immediatePropagationStopped)break;r(t)}}var We=function(){function t(e){i(this,t),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=W({},e||{})}return s(t,[{key:"fire",value:function(t){var e,n=this.global;(e=this.types[t.type])&&He(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&He(t,e)}},{key:"on",value:function(t,e){var n=J(t,e);for(t in n)this.types[t]=yt(this.types[t]||[],n[t])}},{key:"off",value:function(t,e){var n=J(t,e);for(t in n){var r=this.types[t];if(r&&r.length)for(var i=0,o=n[t];i<o.length;i++){var a=o[i],s=r.indexOf(a);-1!==s&&r.splice(s,1)}}}},{key:"getRect",value:function(t){return null}}]),t}(),Ye=function(){function t(e){i(this,t),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=e,nt(this,e)}return s(t,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),t}();function Xe(t){return x.object(t)?{capture:!!t.capture,passive:!!t.passive}:{capture:!!t,passive:!1}}function Ke(t,e){return t===e||("boolean"==typeof t?!!e.capture===t&&0==!!e.passive:!!t.capture==!!e.capture&&!!t.passive==!!e.passive)}var qe={id:"events",install:function(t){var e,n=[],r={},i=[],o={add:a,remove:s,addDelegate:function(t,e,n,o,s){var u=Xe(s);if(!r[n]){r[n]=[];for(var h=0;h<i.length;h++){var f=i[h];a(f,n,c),a(f,n,l,!0)}}var d=r[n],p=_t(d,(function(n){return n.selector===t&&n.context===e}));p||(p={selector:t,context:e,listeners:[]},d.push(p)),p.listeners.push({func:o,options:u})},removeDelegate:function(t,e,n,i,o){var a,u=Xe(o),h=r[n],f=!1;if(h)for(a=h.length-1;a>=0;a--){var d=h[a];if(d.selector===t&&d.context===e){for(var p=d.listeners,v=p.length-1;v>=0;v--){var g=p[v];if(g.func===i&&Ke(g.options,u)){p.splice(v,1),p.length||(h.splice(a,1),s(e,n,c),s(e,n,l,!0)),f=!0;break}}if(f)break}}},delegateListener:c,delegateUseCapture:l,delegatedEvents:r,documents:i,targets:n,supportsOptions:!1,supportsPassive:!1};function a(t,e,r,i){if(t.addEventListener){var a=Xe(i),s=_t(n,(function(e){return e.eventTarget===t}));s||(s={eventTarget:t,events:{}},n.push(s)),s.events[e]||(s.events[e]=[]),_t(s.events[e],(function(t){return t.func===r&&Ke(t.options,a)}))||(t.addEventListener(e,r,o.supportsOptions?a:a.capture),s.events[e].push({func:r,options:a}))}}function s(t,e,r,i){if(t.addEventListener&&t.removeEventListener){var a=bt(n,(function(e){return e.eventTarget===t})),c=n[a];if(c&&c.events)if("all"!==e){var l=!1,u=c.events[e];if(u){if("all"===r){for(var h=u.length-1;h>=0;h--){var f=u[h];s(t,e,f.func,f.options)}return}for(var d=Xe(i),p=0;p<u.length;p++){var v=u[p];if(v.func===r&&Ke(v.options,d)){t.removeEventListener(e,r,o.supportsOptions?d:d.capture),u.splice(p,1),0===u.length&&(delete c.events[e],l=!0);break}}}l&&!Object.keys(c.events).length&&n.splice(a,1)}else for(e in c.events)c.events.hasOwnProperty(e)&&s(t,e,"all")}}function c(t,e){for(var n=Xe(e),i=new Ye(t),o=r[t.type],a=vt(t)[0],s=a;x.element(s);){for(var c=0;c<o.length;c++){var l=o[c],u=l.selector,h=l.context;if(I(s,u)&&D(h,a)&&D(h,s)){var f=l.listeners;i.currentTarget=s;for(var d=0;d<f.length;d++){var p=f[d];Ke(p.options,n)&&p.func(i)}}}s=F(s)}}function l(t){return c(t,!0)}return null==(e=t.document)||e.createElement("div").addEventListener("test",null,{get capture(){return o.supportsOptions=!0},get passive(){return o.supportsPassive=!0}}),t.events=o,o}},Qe={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0,n=Qe.methodOrder;e<n.length;e++){var r=n[e],i=Qe[r](t);if(i)return i}return null},simulationResume:function(t){var e=t.pointerType,n=t.eventType,r=t.eventTarget,i=t.scope;if(!/down|start/i.test(n))return null;for(var o=0,a=i.interactions.list;o<a.length;o++){var s=a[o],c=r;if(s.simulation&&s.simulation.allowResume&&s.pointerType===e)for(;c;){if(c===s.element)return s;c=F(c)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,r=t.pointerType,i=t.eventType,o=t.scope;if("mouse"!==r&&"pen"!==r)return null;for(var a=0,s=o.interactions.list;a<s.length;a++){var c=s[a];if(c.pointerType===r){if(c.simulation&&!$e(c,n))continue;if(c.interacting())return c;e||(e=c)}}if(e)return e;for(var l=0,u=o.interactions.list;l<u.length;l++){var h=u[l];if(!(h.pointerType!==r||/down/i.test(i)&&h.simulation))return h}return null},hasPointer:function(t){for(var e=t.pointerId,n=0,r=t.scope.interactions.list;n<r.length;n++){var i=r[n];if($e(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,n=0,r=t.scope.interactions.list;n<r.length;n++){var i=r[n];if(1===i.pointers.length){var o=i.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function $e(t,e){return t.pointers.some((function(t){return t.id===e}))}var Je=Qe,Ze=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function tn(t,e){return function(n){var r=e.interactions.list,i=pt(n),o=vt(n),a=o[0],s=o[1],c=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(var l=0,u=n.changedTouches;l<u.length;l++){var h=u[l],f={pointer:h,pointerId:ct(h),pointerType:i,eventType:n.type,eventTarget:a,curEventTarget:s,scope:e},d=en(f);c.push([f.pointer,f.eventTarget,f.curEventTarget,d])}}else{var p=!1;if(!M.supportsPointerEvent&&/mouse/.test(n.type)){for(var v=0;v<r.length&&!p;v++)p="mouse"!==r[v].pointerType&&r[v].pointerIsDown;p=p||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!p){var g={pointer:n,pointerId:ct(n),pointerType:i,eventType:n.type,curEventTarget:s,eventTarget:a,scope:e},y=en(g);c.push([g.pointer,g.eventTarget,g.curEventTarget,y])}}for(var m=0;m<c.length;m++){var b=c[m],_=b[0],w=b[1],S=b[2];b[3][t](_,n,w,S)}}}function en(t){var e=t.pointerType,n=t.scope,r={interaction:Je.search(t),searchDetails:t};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:e})}function nn(t,e){var n=t.doc,r=t.scope,i=t.options,o=r.interactions.docEvents,a=r.events,s=a[e];for(var c in r.browser.isIOS&&!i.events&&(i.events={passive:!1}),a.delegatedEvents)s(n,c,a.delegateListener),s(n,c,a.delegateUseCapture,!0);for(var l=i&&i.events,u=0;u<o.length;u++){var h=o[u];s(n,h.type,h.listener,l)}}var rn={id:"core/interactions",install:function(t){for(var e={},n=0;n<Ze.length;n++){var r=Ze[n];e[r]=tn(r,t)}var o,a=M.pEventTypes;function c(){for(var e=0,n=t.interactions.list;e<n.length;e++){var r=n[e];if(r.pointerIsDown&&"touch"===r.pointerType&&!r._interacting)for(var i=function(){var e=a[o];t.documents.some((function(t){return D(t.doc,e.downTarget)}))||r.removePointer(e.pointer,e.event)},o=0,a=r.pointers;o<a.length;o++)i()}}(o=A.PointerEvent?[{type:a.down,listener:c},{type:a.down,listener:e.pointerDown},{type:a.move,listener:e.pointerMove},{type:a.up,listener:e.pointerUp},{type:a.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:c},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var n=0,r=t.interactions.list;n<r.length;n++)r[n].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(e){l(r,e);var n=d(r);function r(){return i(this,r),n.apply(this,arguments)}return s(r,[{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}},{key:"_now",value:function(){return t.now()}}]),r}(je),t.interactions={list:[],new:function(e){e.scopeFire=function(e,n){return t.fire(e,n)};var n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:o,pointerMoveTolerance:1},t.usePlugin(ge)},listeners:{"scope:add-document":function(t){return nn(t,"add")},"scope:remove-document":function(t){return nn(t,"remove")},"interactable:unset":function(t,e){for(var n=t.interactable,r=e.interactions.list.length-1;r>=0;r--){var i=e.interactions.list[r];i.interactable===n&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(r,1))}}},onDocSignal:nn,doOnInteractions:tn,methodNames:Ze},on=rn,an=function(t){return t[t.On=0]="On",t[t.Off=1]="Off",t}(an||{}),sn=function(){function t(e,n,r,o){i(this,t),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new We,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=n.actions,this.target=e,this._context=n.context||r,this._win=_(H(e)?this._context:e),this._doc=this._win.document,this._scopeEvents=o,this.set(n)}return s(t,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(t,e){return x.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),x.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),x.func(e.onend)&&this.on("".concat(t,"end"),e.onend),x.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,n){var r,i=this,o=null==(r=this._actions.map[t])?void 0:r.filterEventType,a=function(t){return(null==o||o(t))&&ye(t,i._actions)};(x.array(e)||x.object(e))&&this._onOff(an.Off,t,e,void 0,a),(x.array(n)||x.object(n))&&this._onOff(an.On,t,n,void 0,a)}},{key:"setPerAction",value:function(t,e){var n=this._defaults;for(var r in e){var i=r,o=this.options[t],a=e[i];"listeners"===i&&this.updatePerActionListeners(t,o.listeners,a),x.array(a)?o[i]=mt(a):x.plainObject(a)?(o[i]=W(o[i]||{},me(a)),x.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(o[i].enabled=!1!==a.enabled)):x.bool(a)&&x.object(n.perAction[i])?o[i].enabled=a:o[i]=a}}},{key:"getRect",value:function(t){return t=t||(x.element(this.target)?this.target:null),x.string(this.target)&&(t=t||this._context.querySelector(this.target)),z(t)}},{key:"rectChecker",value:function(t){var e=this;return x.func(t)?(this.getRect=function(n){var r=W({},t.apply(e,n));return"width"in r||(r.width=r.right-r.left,r.height=r.bottom-r.top),r},this):null===t?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if(H(e)||x.object(e)){for(var n in this.options[t]=e,this._actions.map)this.options[n][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var t=this.target;return x.string(t)?Array.from(this._context.querySelectorAll(t)):x.func(t)&&t.getAllElements?t.getAllElements():x.element(t)?[t]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||D(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)}},{key:"testAllow",value:function(t,e,n){return!t||!!x.element(n)&&(x.string(t)?L(n,t,e):!!x.element(t)&&D(t,n))}},{key:"testIgnore",value:function(t,e,n){return!(!t||!x.element(n))&&(x.string(t)?L(n,t,e):!!x.element(t)&&D(t,n))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,n,r,i){x.object(e)&&!x.array(e)&&(r=n,n=null);var o=J(e,n,i);for(var a in o){"wheel"===a&&(a=M.wheelEvent);for(var s=0,c=o[a];s<c.length;s++){var l=c[s];ye(a,this._actions)?this.events[t===an.On?"on":"off"](a,l):x.string(this.target)?this._scopeEvents[t===an.On?"addDelegate":"removeDelegate"](this.target,this._context,a,l,r):this._scopeEvents[t===an.On?"add":"remove"](this.target,a,l,r)}}return this}},{key:"on",value:function(t,e,n){return this._onOff(an.On,t,e,n)}},{key:"off",value:function(t,e,n){return this._onOff(an.Off,t,e,n)}},{key:"set",value:function(t){var e=this._defaults;for(var n in x.object(t)||(t={}),this.options=me(e.base),this._actions.methodDict){var r=n,i=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,W(W({},e.perAction),e.actions[r])),this[i](t[r])}for(var o in t)"getRect"!==o?x.func(this[o])&&this[o](t[o]):this.rectChecker(t.getRect);return this}},{key:"unset",value:function(){if(x.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],n=e.length-1;n>=0;n--){var r=e[n],i=r.selector,o=r.context,a=r.listeners;i===this.target&&o===this._context&&e.splice(n,1);for(var s=a.length-1;s>=0;s--)this._scopeEvents.removeDelegate(this.target,this._context,t,a[s][0],a[s][1])}else this._scopeEvents.remove(this.target,"all")}}]),t}(),cn=function(){function t(e){var n=this;i(this,t),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=e,e.addListeners({"interactable:unset":function(t){var e=t.interactable,r=e.target,i=x.string(r)?n.selectorMap[r]:r[n.scope.id],o=bt(i,(function(t){return t===e}));i.splice(o,1)}})}return s(t,[{key:"new",value:function(t,e){e=W(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events);return this.scope.addDocument(n._doc),this.list.push(n),x.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n}},{key:"getExisting",value:function(t,e){var n=e&&e.context||this.scope.document,r=x.string(t),i=r?this.selectorMap[t]:t[this.scope.id];if(i)return _t(i,(function(e){return e._context===n&&(r||e.inContext(t))}))}},{key:"forEachMatch",value:function(t,e){for(var n=0,r=this.list;n<r.length;n++){var i=r[n],o=void 0;if((x.string(i.target)?x.element(t)&&I(t,i.target):t===i.target)&&i.inContext(t)&&(o=e(i)),void 0!==o)return o}}}]),t}(),ln=function(){function t(){var e=this;i(this,t),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=M,this.defaults=me(Pe),this.Eventable=We,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(t){var e=function e(n,r){var i=t.interactables.getExisting(n,r);return i||((i=t.interactables.new(n,r)).events.global=e.globalEvents),i};return e.getPointerAverage=ut,e.getTouchBBox=ht,e.getTouchDistance=ft,e.getTouchAngle=dt,e.getElementRect=z,e.getElementClientRect=B,e.matchesSelector=I,e.closest=R,e.globalEvents={},e.version="1.10.26",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=Kt((function(t,e,n){if(x.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),x.array(t)){for(var r=0,i=t;r<i.length;r++){var o=i[r];this.on(o,e,n)}return this}if(x.object(t)){for(var a in t)this.on(a,t[a],e);return this}return ye(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}),"The interact.on() method is being deprecated"),e.off=Kt((function(t,e,n){if(x.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),x.array(t)){for(var r=0,i=t;r<i.length;r++){var o=i[r];this.off(o,e,n)}return this}if(x.object(t)){for(var a in t)this.off(a,t[a],e);return this}var s;return ye(t,this.scope.actions)?t in this.globalEvents&&-1!==(s=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(s,1):this.scope.events.remove(this.scope.document,t,e,n),this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return M.supportsTouch},e.supportsPointerEvent=function(){return M.supportsPointerEvent},e.stop=function(){for(var t=0,e=this.scope.interactions.list;t<e.length;t++)e[t].stop();return this},e.pointerMoveTolerance=function(t){return x.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e}(this),this.InteractEvent=Oe,this.Interactable=void 0,this.interactables=new cn(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(t){return e.removeDocument(t.target)};var n=this;this.Interactable=function(t){l(r,t);var e=d(r);function r(){return i(this,r),e.apply(this,arguments)}return s(r,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(t){return p(u(r.prototype),"set",this).call(this,t),n.fire("interactable:set",{options:t,interactable:this}),this}},{key:"unset",value:function(){p(u(r.prototype),"unset",this).call(this);var t=n.interactables.list.indexOf(this);t<0||(n.interactables.list.splice(t,1),n.fire("interactable:unset",{interactable:this}))}}]),r}(sn)}return s(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var n=0,r=this.listenerMaps;n<r.length;n++){var i=r[n].map[t];if(i&&!1===i(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:function(t,e){return t.isInitialized=!0,x.window(e)&&b(e),A.init(e),M.init(e),function(t){if(Ft=t.requestAnimationFrame,It=t.cancelAnimationFrame,!Ft)for(var e=["ms","moz","webkit","o"],n=0;n<e.length;n++){var r=e[n];Ft=t["".concat(r,"RequestAnimationFrame")],It=t["".concat(r,"CancelAnimationFrame")]||t["".concat(r,"CancelRequestAnimationFrame")]}Ft=Ft&&Ft.bind(t),It=It&&It.bind(t),Ft||(Ft=function(e){var n=Date.now(),r=Math.max(0,16-(n-Ut)),i=t.setTimeout((function(){e(n+r)}),r);return Ut=n+r,i},It=function(t){return clearTimeout(t)})}(e),t.window=e,t.document=e.document,t.usePlugin(on),t.usePlugin(qe),t}(this,t)}},{key:"pluginIsInstalled",value:function(t){var e=t.id;return e?!!this._plugins.map[e]:-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var n=0,r=this.listenerMaps.length,i=t.before.reduce((function(t,e){return t[e]=!0,t[un(e)]=!0,t}),{});n<r;n++){var o=this.listenerMaps[n].id;if(o&&(i[o]||i[un(o)]))break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var n=_(t);e=e?W({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:n,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),n=_(t),r=this.documents[e].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:n,scope:this,options:r})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function un(t){return t&&t.replace(/\/.*$/,"")}var hn=new ln,fn=hn.interactStatic,dn="undefined"!=typeof globalThis?globalThis:window;hn.init(dn);var pn=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(t){var e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(e){var n=e[0],r=e[1];return n in t||r in t})),n=function(n,r){for(var i=t.range,o=t.limits,a=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,s=t.offset,c=void 0===s?{x:0,y:0}:s,l={range:i,grid:t,x:null,y:null},u=0;u<e.length;u++){var h=e[u],f=h[0],d=h[1],p=Math.round((n-c.x)/t[f]),v=Math.round((r-c.y)/t[d]);l[f]=Math.max(a.left,Math.min(a.right,p*t[f]+c.x)),l[d]=Math.max(a.top,Math.min(a.bottom,v*t[d]+c.y))}return l};return n.grid=t,n.coordFields=e,n}}),vn={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=W(e.snappers||{},pn),e.createSnapGrid=e.snappers.grid}},gn=vn,yn={start:function(t){var e=t.state,r=t.rect,i=t.edges,o=t.pageCoords,a=e.options,s=a.ratio,c=a.enabled,l=e.options,u=l.equalDelta,h=l.modifiers;"preserve"===s&&(s=r.width/r.height),e.startCoords=W({},o),e.startRect=W({},r),e.ratio=s,e.equalDelta=u;var f=e.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(e.xIsPrimaryAxis=!(!i.left&&!i.right),e.equalDelta){var d=(f.left?1:-1)*(f.top?1:-1);e.edgeSign={x:d,y:d}}else e.edgeSign={x:f.left?-1:1,y:f.top?-1:1};if(!1!==c&&W(i,f),null!=h&&h.length){var p=new be(t.interaction);p.copyFrom(t.interaction.modification),p.prepareStates(h),e.subModification=p,p.startAll(n({},t))}},set:function(t){var e=t.state,r=t.rect,i=t.coords,o=e.linkedEdges,a=W({},i),s=e.equalDelta?mn:bn;if(W(t.edges,o),s(e,e.xIsPrimaryAxis,i,r),!e.subModification)return null;var c=W({},r);Q(o,c,{x:i.x-a.x,y:i.y-a.y});var l=e.subModification.setAll(n(n({},t),{},{rect:c,edges:o,pageCoords:i,prevCoords:i,prevRect:c})),u=l.delta;return l.changed&&(s(e,Math.abs(u.x)>Math.abs(u.y),l.coords,l.rect),W(i,l.coords)),l.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function mn(t,e,n){var r=t.startCoords,i=t.edgeSign;e?n.y=r.y+(n.x-r.x)*i.y:n.x=r.x+(n.y-r.y)*i.x}function bn(t,e,n,r){var i=t.startRect,o=t.startCoords,a=t.ratio,s=t.edgeSign;if(e){var c=r.width/a;n.y=o.y+(c-i.height)*s.y}else{var l=r.height*a;n.x=o.x+(l-i.width)*s.x}}var _n=we(yn,"aspectRatio"),wn=function(){};wn._defaults={};var Sn=wn;function xn(t,e,n){return x.func(t)?X(t,e.interactable,e.element,[n.x,n.y,e]):X(t,e.interactable,e.element)}var kn={start:function(t){var e=t.rect,n=t.startOffset,r=t.state,i=t.interaction,o=t.pageCoords,a=r.options,s=a.elementRect,c=W({left:0,top:0,right:0,bottom:0},a.offset||{});if(e&&s){var l=xn(a.restriction,i,o);if(l){var u=l.right-l.left-e.width,h=l.bottom-l.top-e.height;u<0&&(c.left+=u,c.right+=u),h<0&&(c.top+=h,c.bottom+=h)}c.left+=n.left-e.width*s.left,c.top+=n.top-e.height*s.top,c.right+=n.right-e.width*(1-s.right),c.bottom+=n.bottom-e.height*(1-s.bottom)}r.offset=c},set:function(t){var e=t.coords,n=t.interaction,r=t.state,i=r.options,o=r.offset,a=xn(i.restriction,n,e);if(a){var s=function(t){return!t||"left"in t&&"top"in t||((t=W({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t}(a);e.x=Math.max(Math.min(s.right-o.right,e.x),s.left+o.left),e.y=Math.max(Math.min(s.bottom-o.bottom,e.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},Pn=we(kn,"restrict"),On={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Cn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Tn(t,e){for(var n=0,r=["top","left","bottom","right"];n<r.length;n++){var i=r[n];i in t||(t[i]=e[i])}return t}var En={noInner:On,noOuter:Cn,start:function(t){var e,n=t.interaction,r=t.startOffset,i=t.state,o=i.options;o&&(e=K(xn(o.offset,n,n.coords.start.page))),e=e||{x:0,y:0},i.offset={top:e.y+r.top,left:e.x+r.left,bottom:e.y-r.bottom,right:e.x-r.right}},set:function(t){var e=t.coords,n=t.edges,r=t.interaction,i=t.state,o=i.offset,a=i.options;if(n){var s=W({},e),c=xn(a.inner,r,s)||{},l=xn(a.outer,r,s)||{};Tn(c,On),Tn(l,Cn),n.top?e.y=Math.min(Math.max(l.top+o.top,s.y),c.top+o.top):n.bottom&&(e.y=Math.max(Math.min(l.bottom+o.bottom,s.y),c.bottom+o.bottom)),n.left?e.x=Math.min(Math.max(l.left+o.left,s.x),c.left+o.left):n.right&&(e.x=Math.max(Math.min(l.right+o.right,s.x),c.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},An=we(En,"restrictEdges"),jn=W({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},kn.defaults),Mn=we({start:kn.start,set:kn.set,defaults:jn},"restrictRect"),Dn={width:-1/0,height:-1/0},Rn={width:1/0,height:1/0},Fn=we({start:function(t){return En.start(t)},set:function(t){var e=t.interaction,n=t.state,r=t.rect,i=t.edges,o=n.options;if(i){var a=q(xn(o.min,e,t.coords))||Dn,s=q(xn(o.max,e,t.coords))||Rn;n.options={endOnly:o.endOnly,inner:W({},En.noInner),outer:W({},En.noOuter)},i.top?(n.options.inner.top=r.bottom-a.height,n.options.outer.top=r.bottom-s.height):i.bottom&&(n.options.inner.bottom=r.top+a.height,n.options.outer.bottom=r.top+s.height),i.left?(n.options.inner.left=r.right-a.width,n.options.outer.left=r.right-s.width):i.right&&(n.options.inner.right=r.left+a.width,n.options.outer.right=r.left+s.width),En.set(t),n.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),In={start:function(t){var e,n=t.interaction,r=t.interactable,i=t.element,o=t.rect,a=t.state,s=t.startOffset,c=a.options,l=c.offsetWithOrigin?function(t){var e=t.interaction.element;return K(X(t.state.options.origin,null,null,[e]))||$(t.interactable,e,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===c.offset)e={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var u=X(c.offset,r,i,[n]);(e=K(u)||{x:0,y:0}).x+=l.x,e.y+=l.y}var h=c.relativePoints;a.offsets=o&&h&&h.length?h.map((function(t,n){return{index:n,relativePoint:t,x:s.left-o.width*t.x+e.x,y:s.top-o.height*t.y+e.y}})):[{index:0,relativePoint:null,x:e.x,y:e.y}]},set:function(t){var e=t.interaction,n=t.coords,r=t.state,i=r.options,o=r.offsets,a=$(e.interactable,e.element,e.prepared.name),s=W({},n),c=[];i.offsetWithOrigin||(s.x-=a.x,s.y-=a.y);for(var l=0,u=o;l<u.length;l++)for(var h=u[l],f=s.x-h.x,d=s.y-h.y,p=0,v=i.targets.length;p<v;p++){var g,y=i.targets[p];(g=x.func(y)?y(f,d,e._proxy,h,p):y)&&c.push({x:(x.number(g.x)?g.x:f)+h.x,y:(x.number(g.y)?g.y:d)+h.y,range:x.number(g.range)?g.range:i.range,source:y,index:p,offset:h})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<c.length;b++){var _=c[b],w=_.range,S=_.x-s.x,k=_.y-s.y,P=tt(S,k),O=P<=w;w===1/0&&m.inRange&&m.range!==1/0&&(O=!1),m.target&&!(O?m.inRange&&w!==1/0?P/w<m.distance/m.range:w===1/0&&m.range!==1/0||P<m.distance:!m.inRange&&P<m.distance)||(m.target=_,m.distance=P,m.range=w,m.inRange=O,m.delta.x=S,m.delta.y=k)}return m.inRange&&(n.x=m.target.x,n.y=m.target.y),r.closest=m,m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},Gn=we(In,"snap"),Nn={start:function(t){var e=t.state,n=t.edges,r=e.options;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],In.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e=t.interaction,n=t.state,r=t.coords,i=n.options,o=n.offsets,a={x:r.x-o[0].x,y:r.y-o[0].y};n.options=W({},i),n.options.targets=[];for(var s=0,c=i.targets||[];s<c.length;s++){var l=c[s],u=void 0;if(u=x.func(l)?l(a.x,a.y,e):l){for(var h=0,f=n.targetFields;h<f.length;h++){var d=f[h],p=d[0],v=d[1];if(p in u||v in u){u.x=u[p],u.y=u[v];break}}n.options.targets.push(u)}}var g=In.set(t);return n.options=i,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},Ln=we(Nn,"snapSize"),Un={aspectRatio:_n,restrictEdges:An,restrict:Pn,restrictRect:Mn,restrictSize:Fn,snapEdges:we({start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],Nn.start(t)):null},set:Nn.set,defaults:W(me(Nn.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:Gn,snapSize:Ln,spring:Sn,avoid:Sn,transform:Sn,rubberband:Sn},Bn={id:"modifiers",install:function(t){var e=t.interactStatic;for(var n in t.usePlugin(ke),t.usePlugin(gn),e.modifiers=Un,Un){var r=Un[n],i=r._defaults,o=r._methods;i._methods=o,t.defaults.perAction[n]=i}}},zn=Bn,Vn=function(t){l(n,t);var e=d(n);function n(t,r,o,a,s,c){var l;if(i(this,n),nt(f(l=e.call(this,s)),o),o!==r&&nt(f(l),r),l.timeStamp=c,l.originalEvent=o,l.type=t,l.pointerId=ct(r),l.pointerType=pt(r),l.target=a,l.currentTarget=null,"tap"===t){var u=s.getPointerIndex(r);l.dt=l.timeStamp-s.pointers[u].downTime;var h=l.timeStamp-s.tapTime;l.double=!!s.prevTap&&"doubletap"!==s.prevTap.type&&s.prevTap.target===l.target&&h<500}else"doubletap"===t&&(l.dt=r.timeStamp-s.tapTime,l.double=!0);return l}return s(n,[{key:"_subtractOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this}},{key:"_addOrigin",value:function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),n}(gt),Hn={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=Hn,t.defaults.actions.pointerEvents=Hn.defaults,W(t.actions.phaselessTypes,Hn.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget;t.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Xn(t),Wn({interaction:n,pointer:r,event:i,eventTarget:o,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget,a=t.pointerIndex,s=n.pointers[a].hold,c=V(o),l={interaction:n,pointer:r,event:i,eventTarget:o,type:"hold",targets:[],path:c,node:null},u=0;u<c.length;u++){var h=c[u];l.node=h,e.fire("pointerEvents:collect-targets",l)}if(l.targets.length){for(var f=1/0,d=0,p=l.targets;d<p.length;d++){var v=p[d].eventable.options.holdDuration;v<f&&(f=v)}s.duration=f,s.timeout=setTimeout((function(){Wn({interaction:n,eventTarget:o,pointer:r,event:i,type:"hold"},e)}),f)}}(t,e),Wn(t,e)},"interactions:up":function(t,e){Xn(t),Wn(t,e),function(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget;n.pointerWasMoved||Wn({interaction:n,eventTarget:o,pointer:r,event:i,type:"tap"},e)}(t,e)},"interactions:cancel":function(t,e){Xn(t),Wn(t,e)}},PointerEvent:Vn,fire:Wn,collectEventTargets:Yn,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Wn(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=t.targets,c=void 0===s?Yn(t,e):s,l=new Vn(a,r,i,o,n,e.now());e.fire("pointerEvents:new",{pointerEvent:l});for(var u={interaction:n,pointer:r,event:i,eventTarget:o,targets:c,type:a,pointerEvent:l},h=0;h<c.length;h++){var f=c[h];for(var d in f.props||{})l[d]=f.props[d];var p=$(f.eventable,f.node);if(l._subtractOrigin(p),l.eventable=f.eventable,l.currentTarget=f.node,f.eventable.fire(l),l._addOrigin(p),l.immediatePropagationStopped||l.propagationStopped&&h+1<c.length&&c[h+1].node!==l.currentTarget)break}if(e.fire("pointerEvents:fired",u),"tap"===a){var v=l.double?Wn({interaction:n,pointer:r,event:i,eventTarget:o,type:"doubletap"},e):l;n.prevTap=v,n.tapTime=v.timeStamp}return l}function Yn(t,e){var n=t.interaction,r=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=n.getPointerIndex(r),c=n.pointers[s];if("tap"===a&&(n.pointerWasMoved||!c||c.downTarget!==o))return[];for(var l=V(o),u={interaction:n,pointer:r,event:i,eventTarget:o,type:a,path:l,targets:[],node:null},h=0;h<l.length;h++){var f=l[h];u.node=f,e.fire("pointerEvents:collect-targets",u)}return"hold"===a&&(u.targets=u.targets.filter((function(t){var e,r;return t.eventable.options.holdDuration===(null==(e=n.pointers[s])||null==(r=e.hold)?void 0:r.duration)}))),u.targets}function Xn(t){var e=t.interaction,n=t.pointerIndex,r=e.pointers[n].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var Kn=Object.freeze({__proto__:null,default:Hn});function qn(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var Qn={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(Hn);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(t,e){return t["pointerEvents:".concat(e)]=qn,t}),{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var n=t.interaction,r=t.pointerEvent,i=t.eventTarget,o=t.targets;if("hold"===r.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout((function(){e.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:r,event:r},e)}),a))}}})},$n=Qn,Jn={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=function(t){return W(this.events.options,t),this};var n=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var r=n.call(this,t,e);return r===this&&(this.events.options[t]=e),r}},listeners:{"pointerEvents:collect-targets":function(t,e){var n=t.targets,r=t.node,i=t.type,o=t.eventTarget;e.interactables.forEachMatch(r,(function(t){var e=t.events,a=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(a,r,o)&&n.push({node:r,eventable:e,props:{interactable:t}})}))},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var n=t.interactable,r=t.options;W(n.events.options,e.pointerEvents.defaults),W(n.events.options,r.pointerEvents||{})}}},Zn=Jn,tr={id:"pointer-events",install:function(t){t.usePlugin(Kn),t.usePlugin($n),t.usePlugin(Zn)}},er=tr,nr={id:"reflow",install:function(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,n){for(var r=t.getAllElements(),i=n.window.Promise,o=i?[]:null,a=function(){var a=r[s],c=t.getRect(a);if(!c)return 1;var l,u=_t(n.interactions.list,(function(n){return n.interacting()&&n.interactable===t&&n.element===a&&n.prepared.name===e.name}));if(u)u.move(),o&&(l=u._reflowPromise||new i((function(t){u._reflowResolve=t})));else{var h=q(c),f=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:h.x,y:h.y},client:{x:h.x,y:h.y},timeStamp:n.now()});l=function(t,e,n,r,i){var o=t.interactions.new({pointerType:"reflow"}),a={interaction:o,event:i,pointer:i,eventTarget:n,phase:"reflow"};o.interactable=e,o.element=n,o.prevEvent=i,o.updatePointer(i,i,n,!0),it(o.coords.delta),qt(o.prepared,r),o._doPhase(a);var s=t.window.Promise,c=s?new s((function(t){o._reflowResolve=t})):void 0;return o._reflowPromise=c,o.start(r,e,n),o._interacting?(o.move(a),o.end(i)):(o.stop(),o._reflowResolve()),o.removePointer(i,i),c}(n,t,a,e,f)}o&&o.push(l)},s=0;s<r.length&&!a();s++);return o&&i.all(o).then((function(){return t}))}(this,e,t)}},listeners:{"interactions:stop":function(t,e){var n=t.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),function(t,e){t.splice(t.indexOf(e),1)}(e.interactions.list,n))}}},rr=nr;if(fn.use(ge),fn.use(Ge),fn.use(er),fn.use(Ve),fn.use(zn),fn.use(de),fn.use(Lt),fn.use(Xt),fn.use(rr),fn.default=fn,"object"===r(t)&&t)try{t.exports=fn}catch(e){}return fn.default=fn,fn},"object"==a(e)?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},1893:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var a=n(9552),s=n(7103),c=a.glob.performance&&a.glob.performance.now?function(){return a.glob.performance.now()}:function(){return(new Date).getTime()},l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:c(),frameRate:0},this.func=e,this.setLayers(n)}var e,n,r;return e=t,r=[{key:"_addAnimation",value:function(t){this.animations.push(t),this._handleAnimation()}},{key:"_removeAnimation",value:function(t){for(var e=t.id,n=this.animations,r=n.length,i=0;i<r;i++)if(n[i].id===e){this.animations.splice(i,1);break}}},{key:"_runFrames",value:function(){for(var t={},e=this.animations,n=0;n<e.length;n++){var r=e[n],i=r.layers,o=r.func;r._updateFrameObject(c());var a=i.length;if(!o||!1!==o.call(r,r.frame))for(var s=0;s<a;s++){var l=i[s];void 0!==l._id&&(t[l._id]=l)}}for(var u in t)t.hasOwnProperty(u)&&t[u].batchDraw()}},{key:"_animationLoop",value:function(){var e=t;e.animations.length?(e._runFrames(),s.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}},{key:"_handleAnimation",value:function(){this.animRunning||(this.animRunning=!0,s.Util.requestAnimFrame(this._animationLoop))}}],(n=[{key:"setLayers",value:function(t){var e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}},{key:"getLayers",value:function(){return this.layers}},{key:"addLayer",value:function(t){for(var e=this.layers,n=e.length,r=0;r<n;r++)if(e[r]._id===t._id)return!1;return this.layers.push(t),!0}},{key:"isRunning",value:function(){for(var e=t.animations,n=e.length,r=0;r<n;r++)if(e[r].id===this.id)return!0;return!1}},{key:"start",value:function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=c(),t._addAnimation(this),this}},{key:"stop",value:function(){return t._removeAnimation(this),this}},{key:"_updateFrameObject",value:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Animation=l,l.animations=[],l.animIdCounter=0,l.animRunning=!1},9503:(t,e)=>{"use strict";function n(t,e,n){var i=r(1,n,t),o=r(1,n,e),a=i*i+o*o;return Math.sqrt(a)}Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],e.getCubicArcLength=function(t,r,i){var o,a,s;o=i/2,a=0;for(var c=0;c<20;c++)s=o*e.tValues[20][c]+o,a+=e.cValues[20][c]*n(t,r,s);return o*a},e.getQuadraticArcLength=function(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],a=2*e[1]-2*e[0],s=4*(r*r+i*i),c=4*(r*o+i*a),l=o*o+a*a;if(0===s)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var u=c/(2*s),h=n+u,f=l/s-u*u,d=h*h+f>0?Math.sqrt(h*h+f):0,p=u*u+f>0?Math.sqrt(u*u+f):0,v=u+Math.sqrt(u*u+f)!==0?f*Math.log(Math.abs((h+d)/(u+p))):0;return Math.sqrt(s)/2*(h*d-u*p+v)};var r=function t(n,r,i){var o,a,s=i.length-1;if(0===s)return 0;if(0===n){a=0;for(var c=0;c<=s;c++)a+=e.binomialCoefficients[s][c]*Math.pow(1-r,s-c)*Math.pow(r,c)*i[c];return a}o=new Array(s);for(var l=0;l<s;l++)o[l]=s*(i[l+1]-i[l]);return t(n-1,r,o)};e.t2length=function(t,e,n){for(var r=1,i=t/e,o=(t-n(i))/e,a=0;r>.001;){var s=n(i+o),c=Math.abs(t-s)/e;if(c<r)r=c,i+=o;else{var l=n(i-o),u=Math.abs(t-l)/e;u<r?(r=u,i-=o):o/=2}if(++a>500)break}return i}},4895:(t,e,n)=>{"use strict";function r(t,e,n){return e=o(e),function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}(t,i()?Reflect.construct(e,n||[],o(t).constructor):e.apply(t,n))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;var p,v=n(7103),g=n(3060),y=n(9552),m=n(1157),b=n(544),_=function(){function t(e){u(this,t),this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=(e||{}).pixelRatio||y.Konva.pixelRatio||function(){if(p)return p;var t=v.Util.createCanvasElement(),e=t.getContext("2d");return p=(y.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),v.Util.releaseCanvas(t),p}();this.pixelRatio=n,this._canvas=v.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return f(t,[{key:"getContext",value:function(){return this.context}},{key:"getPixelRatio",value:function(){return this.pixelRatio}},{key:"setPixelRatio",value:function(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}},{key:"setWidth",value:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"setHeight",value:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"setSize",value:function(t,e){this.setWidth(t||0),this.setHeight(e||0)}},{key:"toDataURL",value:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(t){try{return this._canvas.toDataURL()}catch(t){return v.Util.error("Unable to get data URL. "+t.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}]),t}();e.Canvas=_,m.Factory.addGetterSetter(_,"pixelRatio",void 0,(0,b.getNumberValidator)());var w=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0,willReadFrequently:!1};return u(this,e),(t=r(this,e,[n])).context=new g.SceneContext(a(t),{willReadFrequently:n.willReadFrequently}),t.setSize(n.width,n.height),t}return s(e,t),f(e)}(_);e.SceneCanvas=w;var S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:0,height:0};return u(this,e),(t=r(this,e,[n])).hitCanvas=!0,t.context=new g.HitContext(a(t)),t.setSize(n.width,n.height),t}return s(e,t),f(e)}(_);e.HitCanvas=S},3152:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function s(t,e,n){return e=u(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},l.apply(this,arguments)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var f=n(1157),d=n(7087),p=n(544),v=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,e,arguments)).children=[],t}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,r=[{key:"getChildren",value:function(t){if(!t)return this.children||[];var e=this.children||[],n=[];return e.forEach((function(e){t(e)&&n.push(e)})),n}},{key:"hasChildren",value:function(){return this.getChildren().length>0}},{key:"removeChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}},{key:"destroyChildren",value:function(){return this.getChildren().forEach((function(t){t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}},{key:"add",value:function(){if(0===arguments.length)return this;if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(t<0||arguments.length<=t?void 0:arguments[t]);return this}var e=arguments.length<=0?void 0:arguments[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}},{key:"destroy",value:function(){return this.hasChildren()&&this.destroyChildren(),l(u(e.prototype),"destroy",this).call(this),this}},{key:"find",value:function(t){return this._generalFind(t,!1)}},{key:"findOne",value:function(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}},{key:"_generalFind",value:function(t,e){var n=[];return this._descendants((function(r){var i=r._isMatch(t);return i&&n.push(r),!(!i||!e)})),n}},{key:"_descendants",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(this.getChildren());try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t(r))return!0;if(r.hasChildren()&&r._descendants(t))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"toObject",value:function(){var t=d.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((function(e){t.children.push(e.toObject())})),t}},{key:"isAncestorOf",value:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}},{key:"clone",value:function(t){var e=d.Node.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}},{key:"getAllIntersections",value:function(t){var e=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(t)&&e.push(n)})),e}},{key:"_clearSelfAndDescendantCache",value:function(t){var n;l(u(e.prototype),"_clearSelfAndDescendantCache",this).call(this,t),this.isCached()||null===(n=this.children)||void 0===n||n.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}},{key:"_setChildrenIndices",value:function(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}},{key:"drawScene",value:function(t,e,n){var r=this.getLayer(),i=t||r&&r.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),s=a&&a.scene,c=i&&i.isCache;if(!this.isVisible()&&!c)return this;if(s){o.save();var l=this.getAbsoluteTransform(e).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,e,n);return this}},{key:"drawHit",value:function(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),r=t||n&&n.hitCanvas,i=r&&r.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();var a=this.getAbsoluteTransform(e).getMatrix();i.transform(a[0],a[1],a[2],a[3],a[4],a[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",r,e);return this}},{key:"_drawChildren",value:function(t,e,n,r){var i,o=e&&e.getContext(),a=this.clipWidth(),s=this.clipHeight(),c=this.clipFunc(),l=a&&s||c,u=n===this;if(l){o.save();var h,f=this.getAbsoluteTransform(n),d=f.getMatrix();if(o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.beginPath(),c)h=c.call(this,o,this);else{var p=this.clipX(),v=this.clipY();o.rect(p,v,a,s)}o.clip.apply(o,h),d=f.copy().invert().getMatrix(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}var g=!u&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;g&&(o.save(),o._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach((function(i){i[t](e,n,r)})),g&&o.restore(),l&&o.restore()}},{key:"getClientRect",value:function(){var t,e,n,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.skipTransform,c=a.relativeTo,l=this;null===(t=this.children)||void 0===t||t.forEach((function(t){if(t.visible()){var o=t.getClientRect({relativeTo:l,skipShadow:a.skipShadow,skipStroke:a.skipStroke});0===o.width&&0===o.height||(void 0===e?(e=o.x,n=o.y,r=o.x+o.width,i=o.y+o.height):(e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)))}}));for(var u=this.find("Shape"),h=!1,f=0;f<u.length;f++)if(u[f]._isVisible(this)){h=!0;break}return o=h&&void 0!==e?{x:e,y:n,width:r-e,height:i-n}:{x:0,y:0,width:0,height:0},s?o:this._transformedRect(o,c)}}],r&&o(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(d.Node);e.Container=v,f.Factory.addComponentsGetterSetter(v,"clip",["x","y","width","height"]),f.Factory.addGetterSetter(v,"clipX",void 0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(v,"clipY",void 0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(v,"clipWidth",void 0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(v,"clipHeight",void 0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(v,"clipFunc")},3060:(t,e,n)=>{"use strict";function r(t,e,n){return e=o(e),function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,n||[],o(t).constructor):e.apply(t,n))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;var d=n(7103),p=n(9552),v=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=function(){function t(e){l(this,t),this.canvas=e,p.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return h(t,[{key:"fillShape",value:function(t){t.fillEnabled()&&this._fill(t)}},{key:"_fill",value:function(t){}},{key:"strokeShape",value:function(t){t.hasStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){}},{key:"fillStrokeShape",value:function(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}},{key:"getTrace",value:function(t,e){var n,r,i,o,a=this.traceArr,s=a.length,c="";for(n=0;n<s;n++)(i=(r=a[n]).method)?(o=r.args,c+=i,t?c+="()":d.Util._isArray(o[0])?c+="(["+o.join(",")+"])":(e&&(o=o.map((function(t){return"number"==typeof t?Math.floor(t):t}))),c+="("+o.join(",")+")")):(c+=r.property,t||(c+="="+r.val)),c+=";";return c}},{key:"clearTrace",value:function(){this.traceArr=[]}},{key:"_trace",value:function(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}},{key:"reset",value:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"clear",value:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}},{key:"_applyLineCap",value:function(t){var e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}},{key:"_applyOpacity",value:function(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}},{key:"_applyLineJoin",value:function(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}},{key:"setAttr",value:function(t,e){this._context[t]=e}},{key:"arc",value:function(t,e,n,r,i,o){this._context.arc(t,e,n,r,i,o)}},{key:"arcTo",value:function(t,e,n,r,i){this._context.arcTo(t,e,n,r,i)}},{key:"beginPath",value:function(){this._context.beginPath()}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){this._context.bezierCurveTo(t,e,n,r,i,o)}},{key:"clearRect",value:function(t,e,n,r){this._context.clearRect(t,e,n,r)}},{key:"clip",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._context.clip.apply(this._context,e)}},{key:"closePath",value:function(){this._context.closePath()}},{key:"createImageData",value:function(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0}},{key:"createLinearGradient",value:function(t,e,n,r){return this._context.createLinearGradient(t,e,n,r)}},{key:"createPattern",value:function(t,e){return this._context.createPattern(t,e)}},{key:"createRadialGradient",value:function(t,e,n,r,i,o){return this._context.createRadialGradient(t,e,n,r,i,o)}},{key:"drawImage",value:function(t,e,n,r,i,o,a,s,c){var l=arguments,u=this._context;3===l.length?u.drawImage(t,e,n):5===l.length?u.drawImage(t,e,n,r,i):9===l.length&&u.drawImage(t,e,n,r,i,o,a,s,c)}},{key:"ellipse",value:function(t,e,n,r,i,o,a,s){this._context.ellipse(t,e,n,r,i,o,a,s)}},{key:"isPointInPath",value:function(t,e,n,r){return n?this._context.isPointInPath(n,t,e,r):this._context.isPointInPath(t,e,r)}},{key:"fill",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._context.fill.apply(this._context,e)}},{key:"fillRect",value:function(t,e,n,r){this._context.fillRect(t,e,n,r)}},{key:"strokeRect",value:function(t,e,n,r){this._context.strokeRect(t,e,n,r)}},{key:"fillText",value:function(t,e,n,r){r?this._context.fillText(t,e,n,r):this._context.fillText(t,e,n)}},{key:"measureText",value:function(t){return this._context.measureText(t)}},{key:"getImageData",value:function(t,e,n,r){return this._context.getImageData(t,e,n,r)}},{key:"lineTo",value:function(t,e){this._context.lineTo(t,e)}},{key:"moveTo",value:function(t,e){this._context.moveTo(t,e)}},{key:"rect",value:function(t,e,n,r){this._context.rect(t,e,n,r)}},{key:"roundRect",value:function(t,e,n,r,i){this._context.roundRect(t,e,n,r,i)}},{key:"putImageData",value:function(t,e,n){this._context.putImageData(t,e,n)}},{key:"quadraticCurveTo",value:function(t,e,n,r){this._context.quadraticCurveTo(t,e,n,r)}},{key:"restore",value:function(){this._context.restore()}},{key:"rotate",value:function(t){this._context.rotate(t)}},{key:"save",value:function(){this._context.save()}},{key:"scale",value:function(t,e){this._context.scale(t,e)}},{key:"setLineDash",value:function(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}},{key:"getLineDash",value:function(){return this._context.getLineDash()}},{key:"setTransform",value:function(t,e,n,r,i,o){this._context.setTransform(t,e,n,r,i,o)}},{key:"stroke",value:function(t){t?this._context.stroke(t):this._context.stroke()}},{key:"strokeText",value:function(t,e,n,r){this._context.strokeText(t,e,n,r)}},{key:"transform",value:function(t,e,n,r,i,o){this._context.transform(t,e,n,r,i,o)}},{key:"translate",value:function(t,e){this._context.translate(t,e)}},{key:"_enableTrace",value:function(){var t,e,n=this,r=v.length,i=this.setAttr,o=function(t){var r,i=n[t];n[t]=function(){return e=function(t){var e,n,r=[],i=t.length,o=d.Util;for(e=0;e<i;e++)n=t[e],o._isNumber(n)?n=Math.round(1e3*n)/1e3:o._isString(n)||(n+=""),r.push(n);return r}(Array.prototype.slice.call(arguments,0)),r=i.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)o(v[t]);n.setAttr=function(){i.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}},{key:"_applyGlobalCompositeOperation",value:function(t){var e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}]),t}();e.Context=g,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(g.prototype,t,{get:function(){return this._context[t]},set:function(e){this._context[t]=e}})}));var y=function(t){function e(t){var n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).willReadFrequently,o=void 0!==i&&i;return l(this,e),(n=r(this,e,[t]))._context=t._canvas.getContext("2d",{willReadFrequently:o}),n}return a(e,t),h(e,[{key:"_fillColor",value:function(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}},{key:"_fillPattern",value:function(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}},{key:"_fillLinearGradient",value:function(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fillRadialGradient",value:function(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}},{key:"_fill",value:function(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var r=t.getFillPatternImage();if(r&&"pattern"===n)this._fillPattern(t);else{var i=t.getFillLinearGradientColorStops();if(i&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):r?this._fillPattern(t):i?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}}},{key:"_strokeLinearGradient",value:function(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(e.x,e.y,n.x,n.y);if(r){for(var o=0;o<r.length;o+=2)i.addColorStop(r[o],r[o+1]);this.setAttr("strokeStyle",i)}}},{key:"_stroke",value:function(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}},{key:"_applyShadow",value:function(t){var e,n,r,i=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",o=null!==(n=t.getShadowBlur())&&void 0!==n?n:5,a=null!==(r=t.getShadowOffset())&&void 0!==r?r:{x:0,y:0},s=t.getAbsoluteScale(),c=this.canvas.getPixelRatio(),l=s.x*c,u=s.y*c;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(l),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*l),this.setAttr("shadowOffsetY",a.y*u)}}]),e}(g);e.SceneContext=y;var m=function(t){function e(t){var n;return l(this,e),(n=r(this,e,[t]))._context=t._canvas.getContext("2d",{willReadFrequently:!0}),n}return a(e,t),h(e,[{key:"_fill",value:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}},{key:"strokeShape",value:function(t){t.hasHitStroke()&&this._stroke(t)}},{key:"_stroke",value:function(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),i="auto"===r?t.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}]),e}(g);e.HitContext=m},1337:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;var r=n(9552),i=n(7103);e.DD={get isDragging(){var t=!1;return e.DD._dragElements.forEach((function(e){"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return e.DD._dragElements.forEach((function(e){t=e.node})),t},_dragElements:new Map,_drag:function(t){var n=[];e.DD._dragElements.forEach((function(e,r){var o=e.node,a=o.getStage();a.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=i.Util._getFirstPointerId(t));var s=a._changedPointerPositions.find((function(t){return t.id===e.pointerId}));if(s){if("dragging"!==e.dragStatus){var c=o.dragDistance();if(Math.max(Math.abs(s.x-e.startPointerPos.x),Math.abs(s.y-e.startPointerPos.y))<c)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,e),n.push(o)}})),n.forEach((function(e){e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore:function(t){var n=[];e.DD._dragElements.forEach((function(i){var o=i.node.getStage();if(t&&o.setPointersPositions(t),o._changedPointerPositions.find((function(t){return t.id===i.pointerId}))){"dragging"!==i.dragStatus&&"stopped"!==i.dragStatus||(e.DD.justDragged=!0,r.Konva._mouseListenClick=!1,r.Konva._touchListenClick=!1,r.Konva._pointerListenClick=!1,i.dragStatus="stopped");var a=i.node.getLayer()||i.node instanceof r.Konva.Stage&&i.node;a&&-1===n.indexOf(a)&&n.push(a)}})),n.forEach((function(t){t.draw()}))},_endDragAfter:function(t){e.DD._dragElements.forEach((function(n,r){"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:t},!0),"dragging"!==n.dragStatus&&e.DD._dragElements.delete(r)}))}},r.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1))},1157:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;var r=n(7103),i=n(544),o="get",a="set";e.Factory={addGetterSetter:function(t,n,r,i,o){e.Factory.addGetter(t,n,r),e.Factory.addSetter(t,n,i,o),e.Factory.addOverloadedGetterSetter(t,n)},addGetter:function(t,e,n){var i=o+r.Util._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter:function(t,n,i,o){var s=a+r.Util._capitalize(n);t.prototype[s]||e.Factory.overWriteSetter(t,n,i,o)},overWriteSetter:function(t,e,n,i){var o=a+r.Util._capitalize(e);t.prototype[o]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter:function(t,n,s,c,l){var u,h,f=s.length,d=r.Util._capitalize,p=o+d(n),v=a+d(n);t.prototype[p]=function(){var t={};for(u=0;u<f;u++)t[h=s[u]]=this.getAttr(n+d(h));return t};var g=(0,i.getComponentValidator)(s);t.prototype[v]=function(t){var e,r=this,i=this.attrs[n];for(e in c&&(t=c.call(this,t)),g&&g.call(this,t,n),t)t.hasOwnProperty(e)&&this._setAttr(n+d(e),t[e]);return t||s.forEach((function(t){r._setAttr(n+d(t),void 0)})),this._fireChangeEvent(n,i,t),l&&l.call(this),this},e.Factory.addOverloadedGetterSetter(t,n)},addOverloadedGetterSetter:function(t,e){var n=r.Util._capitalize(e),i=a+n,s=o+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter:function(t,n,i,a){r.Util.error("Adding deprecated "+n);var s=o+r.Util._capitalize(n),c=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){r.Util.error(c);var t=this.attrs[n];return void 0===t?i:t},e.Factory.addSetter(t,n,a,(function(){r.Util.error(c)})),e.Factory.addOverloadedGetterSetter(t,n)},backCompat:function(t,e){r.Util.each(e,(function(e,n){var i=t.prototype[n],s=o+r.Util._capitalize(e),c=a+r.Util._capitalize(e);function l(){i.apply(this,arguments),r.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=l,t.prototype[s]=l,t.prototype[c]=l}))},afterSetFilter:function(){this._filterUpToDate=!1}}},1812:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e,n){return e=a(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,n||[],a(t).constructor):e.apply(t,n))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;var c=n(7103),l=n(3250),u=n(9552),h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,e,[t])).listening(!1),c.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(l.Layer);e.FastLayer=h,h.prototype.nodeType="FastLayer",(0,u._registerNode)(h)},9552:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;var r=Math.PI/180;e.glob=void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.3",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:function(t){return e.Konva.angleDeg?t*r:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return e.Konva.DD.isDragging},isDragReady:function(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal:function(t){e.glob.Konva=t}},e._registerNode=function(t){e.Konva[t.prototype.getClassName()]=t},e.Konva._injectGlobal(e.Konva)},2836:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var u=n(7103),h=n(3152),f=n(9552),d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&u.Util.throw("You may only add groups and shapes to groups.")}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Container);e.Group=d,d.prototype.nodeType="Group",(0,f._registerNode)(d)},3250:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;var h=n(7103),f=n(3152),d=n(7087),p=n(1157),v=n(4895),g=n(544),y=n(5762),m=n(9552),b=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],_=b.length,w=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t])).canvas=new v.SceneCanvas,n.hitCanvas=new v.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"createPNGStream",value:function(){return this.canvas._canvas.createPNGStream()}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getNativeCanvasElement",value:function(){return this.canvas._canvas}},{key:"getHitCanvas",value:function(){return this.hitCanvas}},{key:"getContext",value:function(){return this.getCanvas().getContext()}},{key:"clear",value:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}},{key:"setZIndex",value:function(t){c(l(e.prototype),"setZIndex",this).call(this,t);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}},{key:"moveToTop",value:function(){d.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}},{key:"moveUp",value:function(){if(!d.Node.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content||(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),0))}},{key:"moveDown",value:function(){if(d.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}},{key:"moveToBottom",value:function(){if(d.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}},{key:"getLayer",value:function(){return this}},{key:"remove",value:function(){var t=this.getNativeCanvasElement();return d.Node.prototype.remove.call(this),t&&t.parentNode&&h.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}},{key:"getStage",value:function(){return this.parent}},{key:"setSize",value:function(t){var e=t.width,n=t.height;return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}},{key:"_validateAdd",value:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&h.Util.throw("You may only add groups and shapes to a layer.")}},{key:"_toKonvaCanvas",value:function(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),d.Node.prototype._toKonvaCanvas.call(this,t)}},{key:"_checkVisibility",value:function(){var t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}},{key:"_setSmoothEnabled",value:function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}},{key:"getWidth",value:function(){if(this.parent)return this.parent.width()}},{key:"setWidth",value:function(){h.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}},{key:"getHeight",value:function(){if(this.parent)return this.parent.height()}},{key:"setHeight",value:function(){h.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}},{key:"batchDraw",value:function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,h.Util.requestAnimFrame((function(){t.draw(),t._waitingForDraw=!1}))),this}},{key:"getIntersection",value:function(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(var r=0;r<_;r++){var i=b[r],o=this._getIntersection({x:t.x+i.x*e,y:t.y+i.y*e}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(!n)return null;e+=1}}},{key:"_getIntersection",value:function(t){var e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){var i=h.Util._rgbToHex(n[0],n[1],n[2]),o=y.shapes["#"+i];return o?{shape:o}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}},{key:"drawScene",value:function(t,e){var n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),f.Container.prototype.drawScene.call(this,r,e),this._fire("draw",{node:this}),this}},{key:"drawHit",value:function(t,e){var n=this.getLayer(),r=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),f.Container.prototype.drawHit.call(this,r,e),this}},{key:"enableHitGraph",value:function(){return this.hitGraphEnabled(!0),this}},{key:"disableHitGraph",value:function(){return this.hitGraphEnabled(!1),this}},{key:"setHitGraphEnabled",value:function(t){h.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}},{key:"getHitGraphEnabled",value:function(t){return h.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}},{key:"toggleHitCanvas",value:function(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}},{key:"destroy",value:function(){return h.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),c(l(e.prototype),"destroy",this).call(this)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(f.Container);e.Layer=w,w.prototype.nodeType="Layer",(0,m._registerNode)(w),p.Factory.addGetterSetter(w,"imageSmoothingEnabled",!0),p.Factory.addGetterSetter(w,"clearBeforeDraw",!0),p.Factory.addGetterSetter(w,"hitGraphEnabled",!0,(0,g.getBooleanValidator)())},7087:(t,e,n)=>{"use strict";var r=["x","y"];function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var c=n(7103),l=n(1157),u=n(4895),h=n(9552),f=n(1337),d=n(544),p="absoluteOpacity",v="allEventListeners",g="absoluteTransform",y="absoluteScale",m="canvas",b="listening",_="mouseenter",w="mouseleave",S="Shape",x=" ",k="stage",P="transform",O="visible",C=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(x),T=1,E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=T++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}var e,n,s;return e=t,n=[{key:"hasChildren",value:function(){return!1}},{key:"_clearCache",value:function(t){t!==P&&t!==g||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}},{key:"_getCache",value:function(t,e){var n=this._cache.get(t);return(void 0===n||(t===P||t===g)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n}},{key:"_calculate",value:function(t,e,n){var r=this;if(!this._attachedDepsListeners.get(t)){var i=e.map((function(t){return t+"Change.konva"})).join(x);this.on(i,(function(){r._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}},{key:"_getCanvasCache",value:function(){return this._cache.get(m)}},{key:"_clearSelfAndDescendantCache",value:function(t){this._clearCache(t),t===g&&this.fire("absoluteTransformChange")}},{key:"clearCache",value:function(){if(this._cache.has(m)){var t=this._cache.get(m),e=t.scene,n=t.filter,r=t.hit;c.Util.releaseCanvas(e,n,r),this._cache.delete(m)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}},{key:"cache",value:function(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var r=Math.ceil(e.width||n.width),i=Math.ceil(e.height||n.height),o=e.pixelRatio,a=void 0===e.x?Math.floor(n.x):e.x,s=void 0===e.y?Math.floor(n.y):e.y,l=e.offset||0,h=e.drawBorder||!1,f=e.hitCanvasPixelRatio||1;if(r&&i){r+=2*l+(Math.abs(Math.round(n.x)-a)>.5?1:0),i+=2*l+(Math.abs(Math.round(n.y)-s)>.5?1:0),a-=l,s-=l;var d=new u.SceneCanvas({pixelRatio:o,width:r,height:i}),v=new u.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),g=new u.HitCanvas({pixelRatio:f,width:r,height:i}),b=d.getContext(),_=g.getContext();return g.isCache=!0,d.isCache=!0,this._cache.delete(m),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(d.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),b.save(),_.save(),b.translate(-a,-s),_.translate(-a,-s),this._isUnderCache=!0,this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(y),this.drawScene(d,this),this.drawHit(g,this),this._isUnderCache=!1,b.restore(),_.restore(),h&&(b.save(),b.beginPath(),b.rect(0,0,r,i),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(m,{scene:d,filter:v,hit:g,x:a,y:s}),this._requestDraw(),this}c.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}},{key:"isCached",value:function(){return this._cache.has(m)}},{key:"getClientRect",value:function(t){throw new Error('abstract "getClientRect" method call')}},{key:"_transformedRect",value:function(t,e){var n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],r=1/0,i=1/0,o=-1/0,a=-1/0,s=this.getAbsoluteTransform(e);return n.forEach((function(t){var e=s.point(t);void 0===r&&(r=o=e.x,i=a=e.y),r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y)})),{x:r,y:i,width:o-r,height:a-i}}},{key:"_drawCachedSceneCanvas",value:function(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);var e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),r=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/r,n.height/r),t.restore()}},{key:"_drawCachedHitCanvas",value:function(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}},{key:"_getCachedSceneCanvas",value:function(){var t,e,n,r,i=this.filters(),a=this._getCanvasCache(),s=a.scene,l=a.filter,u=l.getContext();if(i){if(!this._filterUpToDate){var h=s.pixelRatio;l.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio);try{for(t=i.length,u.clear(),u.drawImage(s._canvas,0,0,s.getWidth()/h,s.getHeight()/h),e=u.getImageData(0,0,l.getWidth(),l.getHeight()),n=0;n<t;n++)"function"==typeof(r=i[n])?(r.call(this,e),u.putImageData(e,0,0)):c.Util.error("Filter should be type of function, but got "+o(r)+" instead. Please check correct filters")}catch(t){c.Util.error("Unable to apply filter. "+t.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return s}},{key:"on",value:function(t,e){if(this._cache&&this._cache.delete(v),3===arguments.length)return this._delegate.apply(this,arguments);var n,r,i,o,a=t.split(x),s=a.length;for(n=0;n<s;n++)i=(r=a[n].split("."))[0],o=r[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:o,handler:e});return this}},{key:"off",value:function(t,e){var n,r,i,o,a,s=(t||"").split(x),c=s.length;if(this._cache&&this._cache.delete(v),!t)for(r in this.eventListeners)this._off(r);for(n=0;n<c;n++)if(o=(i=s[n].split("."))[0],a=i[1],o)this.eventListeners[o]&&this._off(o,a,e);else for(r in this.eventListeners)this._off(r,a,e);return this}},{key:"dispatchEvent",value:function(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}},{key:"addEventListener",value:function(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}},{key:"removeEventListener",value:function(t){return this.off(t),this}},{key:"_delegate",value:function(t,e,n){var r=this;this.on(t,(function(t){for(var i=t.target.findAncestors(e,!0,r),o=0;o<i.length;o++)(t=c.Util.cloneObject(t)).currentTarget=i[o],n.call(i[o],t)}))}},{key:"remove",value:function(){return this.isDragging()&&this.stopDrag(),f.DD._dragElements.delete(this._id),this._remove(),this}},{key:"_clearCaches",value:function(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(y),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(O),this._clearSelfAndDescendantCache(b)}},{key:"_remove",value:function(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}},{key:"destroy",value:function(){return this.remove(),this.clearCache(),this}},{key:"getAttr",value:function(t){var e="get"+c.Util._capitalize(t);return c.Util._isFunction(this[e])?this[e]():this.attrs[t]}},{key:"getAncestors",value:function(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}},{key:"getAttrs",value:function(){return this.attrs||{}}},{key:"setAttrs",value:function(t){var e=this;return this._batchTransformChanges((function(){var n,r;if(!t)return e;for(n in t)"children"!==n&&(r="set"+c.Util._capitalize(n),c.Util._isFunction(e[r])?e[r](t[n]):e._setAttr(n,t[n]))})),this}},{key:"isListening",value:function(){return this._getCache(b,this._isListening)}},{key:"_isListening",value:function(t){if(!this.listening())return!1;var e=this.getParent();return!e||e===t||this===t||e._isListening(t)}},{key:"isVisible",value:function(){return this._getCache(O,this._isVisible)}},{key:"_isVisible",value:function(t){if(!this.visible())return!1;var e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}},{key:"shouldDrawHit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),r=!1;f.DD._dragElements.forEach((function(t){"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(r=!0)}));var i=!e&&!h.Konva.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!i}},{key:"show",value:function(){return this.visible(!0),this}},{key:"hide",value:function(){return this.visible(!1),this}},{key:"getZIndex",value:function(){return this.index||0}},{key:"getAbsoluteZIndex",value:function(){var t,e,n,r,i=this.getDepth(),o=this,a=0,s=this.getStage();return"Stage"!==o.nodeType&&s&&function s(c){for(t=[],e=c.length,n=0;n<e;n++)r=c[n],a++,r.nodeType!==S&&(t=t.concat(r.getChildren().slice())),r._id===o._id&&(n=e);t.length>0&&t[0].getDepth()<=i&&s(t)}(s.getChildren()),a}},{key:"getDepth",value:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}},{key:"_batchTransformChanges",value:function(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(P),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}},{key:"setPosition",value:function(t){var e=this;return this._batchTransformChanges((function(){e.x(t.x),e.y(t.y)})),this}},{key:"getPosition",value:function(){return{x:this.x(),y:this.y()}}},{key:"getRelativePointerPosition",value:function(){var t=this.getStage();if(!t)return null;var e=t.getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}},{key:"getAbsolutePosition",value:function(t){for(var e=!1,n=this.parent;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var r=this.getAbsoluteTransform(t).getMatrix(),i=new c.Transform,o=this.offset();return i.m=r.slice(),i.translate(o.x,o.y),i.getTranslation()}},{key:"setAbsolutePosition",value:function(t){var e=this._clearTransform(),n=e.x,i=e.y,o=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,r);this.attrs.x=n,this.attrs.y=i,this._clearCache(P);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(t.x,t.y),t={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(o),this.setPosition({x:t.x,y:t.y}),this._clearCache(P),this._clearSelfAndDescendantCache(g),this}},{key:"_setTransform",value:function(t){var e;for(e in t)this.attrs[e]=t[e]}},{key:"_clearTransform",value:function(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}},{key:"move",value:function(t){var e=t.x,n=t.y,r=this.x(),i=this.y();return void 0!==e&&(r+=e),void 0!==n&&(i+=n),this.setPosition({x:r,y:i}),this}},{key:"_eachAncestorReverse",value:function(t,e){var n,r,i=[],o=this.getParent();if(!e||e._id!==this._id){for(i.unshift(this);o&&(!e||o._id!==e._id);)i.unshift(o),o=o.parent;for(n=i.length,r=0;r<n;r++)t(i[r])}}},{key:"rotate",value:function(t){return this.rotation(this.rotation()+t),this}},{key:"moveToTop",value:function(){if(!this.parent)return c.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}},{key:"moveUp",value:function(){if(!this.parent)return c.Util.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveDown",value:function(){if(!this.parent)return c.Util.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}},{key:"moveToBottom",value:function(){if(!this.parent)return c.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}},{key:"setZIndex",value:function(t){if(!this.parent)return c.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&c.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}},{key:"getAbsoluteOpacity",value:function(){return this._getCache(p,this._getAbsoluteOpacity)}},{key:"_getAbsoluteOpacity",value:function(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}},{key:"moveTo",value:function(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}},{key:"toObject",value:function(){var t,e,n,r,i=this.getAttrs(),o={attrs:{},className:this.getClassName()};for(t in i)e=i[t],c.Util.isObject(e)&&!c.Util._isPlainObject(e)&&!c.Util._isArray(e)||(n="function"==typeof this[t]&&this[t],delete i[t],r=n?n.call(this):null,i[t]=e,r!==e&&(o.attrs[t]=e));return c.Util._prepareToStringify(o)}},{key:"toJSON",value:function(){return JSON.stringify(this.toObject())}},{key:"getParent",value:function(){return this.parent}},{key:"findAncestors",value:function(t,e,n){var r=[];e&&this._isMatch(t)&&r.push(this);for(var i=this.parent;i;){if(i===n)return r;i._isMatch(t)&&r.push(i),i=i.parent}return r}},{key:"isAncestorOf",value:function(t){return!1}},{key:"findAncestor",value:function(t,e,n){return this.findAncestors(t,e,n)[0]}},{key:"_isMatch",value:function(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,r=t.replace(/ /g,"").split(","),i=r.length;for(e=0;e<i;e++)if(n=r[e],c.Util.isValidSelector(n)||(c.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),c.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),c.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}},{key:"getLayer",value:function(){var t=this.getParent();return t?t.getLayer():null}},{key:"getStage",value:function(){return this._getCache(k,this._getStage)}},{key:"_getStage",value:function(){var t=this.getParent();return t?t.getStage():null}},{key:"fire",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}},{key:"getAbsoluteTransform",value:function(t){return t?this._getAbsoluteTransform(t):this._getCache(g,this._getAbsoluteTransform)}},{key:"_getAbsoluteTransform",value:function(t){var e;if(t)return e=new c.Transform,this._eachAncestorReverse((function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(g)||new c.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();if("all"===n)e.multiply(this.getTransform());else if("position"===n){var r=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;e.translate(r-o,i-a)}return e.dirty=!1,e}},{key:"getAbsoluteScale",value:function(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();var n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}},{key:"getAbsoluteRotation",value:function(){return this.getAbsoluteTransform().decompose().rotation}},{key:"getTransform",value:function(){return this._getCache(P,this._getTransform)}},{key:"_getTransform",value:function(){var t,e,n=this._cache.get(P)||new c.Transform;n.reset();var r=this.x(),i=this.y(),o=h.Konva.getAngle(this.rotation()),a=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,s=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,l=this.attrs.skewX||0,u=this.attrs.skewY||0,f=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return 0===r&&0===i||n.translate(r,i),0!==o&&n.rotate(o),0===l&&0===u||n.skew(l,u),1===a&&1===s||n.scale(a,s),0===f&&0===d||n.translate(-1*f,-1*d),n.dirty=!1,n}},{key:"clone",value:function(t){var e,n,r,i,o,a=c.Util.cloneObject(this.attrs);for(e in t)a[e]=t[e];var s=new this.constructor(a);for(e in this.eventListeners)for(r=(n=this.eventListeners[e]).length,i=0;i<r;i++)(o=n[i]).name.indexOf("konva")<0&&(s.eventListeners[e]||(s.eventListeners[e]=[]),s.eventListeners[e].push(o));return s}},{key:"_toKonvaCanvas",value:function(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),r=void 0!==t.x?t.x:Math.floor(e.x),i=void 0!==t.y?t.y:Math.floor(e.y),o=t.pixelRatio||1,a=new u.SceneCanvas({width:t.width||Math.ceil(e.width)||(n?n.width():0),height:t.height||Math.ceil(e.height)||(n?n.height():0),pixelRatio:o}),s=a.getContext(),c=new u.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(r),height:a.height/a.pixelRatio+Math.abs(i),pixelRatio:a.pixelRatio});return!1===t.imageSmoothingEnabled&&(s._context.imageSmoothingEnabled=!1),s.save(),(r||i)&&s.translate(-1*r,-1*i),this.drawScene(a,void 0,c),s.restore(),a}},{key:"toCanvas",value:function(t){return this._toKonvaCanvas(t)._canvas}},{key:"toDataURL",value:function(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(r),r}},{key:"toImage",value:function(t){var e=this;return new Promise((function(n,r){try{var i=null==t?void 0:t.callback;i&&delete t.callback,c.Util._urlToImage(e.toDataURL(t),(function(t){n(t),null==i||i(t)}))}catch(t){r(t)}}))}},{key:"toBlob",value:function(t){var e=this;return new Promise((function(n,r){try{var i=null==t?void 0:t.callback;i&&delete t.callback,e.toCanvas(t).toBlob((function(t){n(t),null==i||i(t)}),null==t?void 0:t.mimeType,null==t?void 0:t.quality)}catch(t){r(t)}}))}},{key:"setSize",value:function(t){return this.width(t.width),this.height(t.height),this}},{key:"getSize",value:function(){return{width:this.width(),height:this.height()}}},{key:"getClassName",value:function(){return this.className||this.nodeType}},{key:"getType",value:function(){return this.nodeType}},{key:"getDragDistance",value:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():h.Konva.dragDistance}},{key:"_off",value:function(t,e,n){var r,i,o,a=this.eventListeners[t];for(r=0;r<a.length;r++)if(i=a[r].name,o=a[r].handler,!("konva"===i&&"konva"!==e||e&&i!==e||n&&n!==o)){if(a.splice(r,1),0===a.length){delete this.eventListeners[t];break}r--}}},{key:"_fireChangeEvent",value:function(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})}},{key:"addName",value:function(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.name(n)}return this}},{key:"hasName",value:function(t){if(!t)return!1;var e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}},{key:"removeName",value:function(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name(e.join(" "))),this}},{key:"setAttr",value:function(t,e){var n=this["set"+c.Util._capitalize(t)];return c.Util._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}},{key:"_requestDraw",value:function(){if(h.Konva.autoDrawEnabled){var t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}},{key:"_setAttr",value:function(t,e){var n=this.attrs[t];(n!==e||c.Util.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}},{key:"_setComponentAttr",value:function(t,e,n){var r;void 0!==n&&((r=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,r,n))}},{key:"_fireAndBubble",value:function(t,e,n){if(e&&this.nodeType===S&&(e.target=this),t!==_&&t!==w||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(t,e);var r=(t===_||t===w)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}},{key:"_getProtoListeners",value:function(t){var e,n,r,o,a=null!==(e=this._cache.get(v))&&void 0!==e?e:{},s=null==a?void 0:a[t];if(void 0===s){s=[];for(var c=Object.getPrototypeOf(this);c;){var l,u=null!==(r=null===(n=c.eventListeners)||void 0===n?void 0:n[t])&&void 0!==r?r:[];(l=s).push.apply(l,function(t){if(Array.isArray(t))return i(t)}(o=u)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=Object.getPrototypeOf(c)}a[t]=s,this._cache.set(v,a)}return s}},{key:"_fire",value:function(t,e){(e=e||{}).currentTarget=this,e.type=t;var n=this._getProtoListeners(t);if(n)for(var r=0;r<n.length;r++)n[r].handler.call(this,e);var i=this.eventListeners[t];if(i)for(r=0;r<i.length;r++)i[r].handler.call(this,e)}},{key:"draw",value:function(){return this.drawScene(),this.drawHit(),this}},{key:"_createDragElement",value:function(t){var e=t?t.pointerId:void 0,n=this.getStage(),r=this.getAbsolutePosition();if(n){var i=n._getPointerById(e)||n._changedPointerPositions[0]||r;f.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-r.x,y:i.y-r.y},dragStatus:"ready",pointerId:e})}}},{key:"startDrag",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.DD._dragElements.has(this._id)||this._createDragElement(t),f.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}},{key:"_setDragPosition",value:function(t,e){var n=this.getStage()._getPointerById(e.pointerId);if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y},i=this.dragBoundFunc();if(void 0!==i){var o=i.call(this,r,t);o?r=o:c.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}},{key:"stopDrag",value:function(t){var e=f.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),f.DD._endDragBefore(t),f.DD._endDragAfter(t)}},{key:"setDraggable",value:function(t){this._setAttr("draggable",t),this._dragChange()}},{key:"isDragging",value:function(){var t=f.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}},{key:"_listenDrag",value:function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){var e=this;if((void 0===t.evt.button||h.Konva.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var n=!1;f.DD._dragElements.forEach((function(t){e.isAncestorOf(t.node)&&(n=!0)})),n||this._createDragElement(t)}}))}},{key:"_dragChange",value:function(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;var t=f.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,n=t&&"ready"===t.dragStatus;e?this.stopDrag():n&&f.DD._dragElements.delete(this._id)}}},{key:"_dragCleanup",value:function(){this.off("mousedown.konva"),this.off("touchstart.konva")}},{key:"isClientRectOnScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=this.getStage();if(!e)return!1;var n={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return c.Util.haveIntersection(n,this.getClientRect())}}],s=[{key:"create",value:function(t,e){return c.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}},{key:"_createNode",value:function(e,n){var r,i,o,a=t.prototype.getClassName.call(e),s=e.children;if(n&&(e.attrs.container=n),h.Konva[a]||(c.Util.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape"),r=new(0,h.Konva[a])(e.attrs),s)for(i=s.length,o=0;o<i;o++)r.add(t._createNode(s[o]));return r}}],n&&a(e.prototype,n),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,C,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(P),this._clearSelfAndDescendantCache(g))})),E.prototype.on.call(E.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(O)})),E.prototype.on.call(E.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(b)})),E.prototype.on.call(E.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(p)}));var A=l.Factory.addGetterSetter;A(E,"zIndex"),A(E,"absolutePosition"),A(E,"position"),A(E,"x",0,(0,d.getNumberValidator)()),A(E,"y",0,(0,d.getNumberValidator)()),A(E,"globalCompositeOperation","source-over",(0,d.getStringValidator)()),A(E,"opacity",1,(0,d.getNumberValidator)()),A(E,"name","",(0,d.getStringValidator)()),A(E,"id","",(0,d.getStringValidator)()),A(E,"rotation",0,(0,d.getNumberValidator)()),l.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),A(E,"scaleX",1,(0,d.getNumberValidator)()),A(E,"scaleY",1,(0,d.getNumberValidator)()),l.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),A(E,"skewX",0,(0,d.getNumberValidator)()),A(E,"skewY",0,(0,d.getNumberValidator)()),l.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),A(E,"offsetX",0,(0,d.getNumberValidator)()),A(E,"offsetY",0,(0,d.getNumberValidator)()),A(E,"dragDistance",null,(0,d.getNumberValidator)()),A(E,"width",0,(0,d.getNumberValidator)()),A(E,"height",0,(0,d.getNumberValidator)()),A(E,"listening",!0,(0,d.getBooleanValidator)()),A(E,"preventDefault",!0,(0,d.getBooleanValidator)()),A(E,"filters",null,(function(t){return this._filterUpToDate=!1,t})),A(E,"visible",!0,(0,d.getBooleanValidator)()),A(E,"transformsEnabled","all",(0,d.getStringValidator)()),A(E,"size"),A(E,"dragBoundFunc"),A(E,"draggable",!1,(0,d.getBooleanValidator)()),l.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},9283:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.releaseCapture=e.setPointerCapture=e.hasPointerCapture=e.createEvent=e.getCapturedShape=void 0;var r=n(9552),i=new Map,o=void 0!==r.Konva._global.PointerEvent;function a(t){return{evt:t,pointerId:t.pointerId}}function s(t,e){var n=i.get(t);if(n){var r=n.getStage();r&&r.content,i.delete(t),o&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}}e.getCapturedShape=function(t){return i.get(t)},e.createEvent=a,e.hasPointerCapture=function(t,e){return i.get(t)===e},e.setPointerCapture=function(t,e){s(t),e.getStage()&&(i.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))},e.releaseCapture=s},5762:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;var h,f=n(9552),d=n(7103),p=n(1157),v=n(7087),g=n(544),y=n(9552),m=n(9283),b="hasShadow",_="shadowRGBA",w="patternImage",S="linearGradient",x="radialGradient";function k(){return h||(h=d.Util.createCanvasElement().getContext("2d"))}e.shapes={};var P=function(t){function n(t){var r,i;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),r=a(this,n,[t]);!(i=d.Util.getRandomColor())||i in e.shapes;);return r.colorKey=i,e.shapes[i]=l(r),r}var r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(n,t),r=n,o=[{key:"getContext",value:function(){return d.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}},{key:"getCanvas",value:function(){return d.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}},{key:"getSceneFunc",value:function(){return this.attrs.sceneFunc||this._sceneFunc}},{key:"getHitFunc",value:function(){return this.attrs.hitFunc||this._hitFunc}},{key:"hasShadow",value:function(){return this._getCache(b,this._hasShadow)}},{key:"_hasShadow",value:function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}},{key:"_getFillPattern",value:function(){return this._getCache(w,this.__getFillPattern)}},{key:"__getFillPattern",value:function(){if(this.fillPatternImage()){var t=k().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){var e=new d.Transform;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(f.Konva.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());var n=e.getMatrix(),r="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);t.setTransform(r)}return t}}},{key:"_getLinearGradient",value:function(){return this._getCache(S,this.__getLinearGradient)}},{key:"__getLinearGradient",value:function(){var t=this.fillLinearGradientColorStops();if(t){for(var e=k(),n=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),i=e.createLinearGradient(n.x,n.y,r.x,r.y),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}},{key:"_getRadialGradient",value:function(){return this._getCache(x,this.__getRadialGradient)}},{key:"__getRadialGradient",value:function(){var t=this.fillRadialGradientColorStops();if(t){for(var e=k(),n=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),i=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)i.addColorStop(t[o],t[o+1]);return i}}},{key:"getShadowRGBA",value:function(){return this._getCache(_,this._getShadowRGBA)}},{key:"_getShadowRGBA",value:function(){if(this.hasShadow()){var t=d.Util.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}}},{key:"hasFill",value:function(){var t=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(function(){return t.fillEnabled()&&!!(t.fill()||t.fillPatternImage()||t.fillLinearGradientColorStops()||t.fillRadialGradientColorStops())}))}},{key:"hasStroke",value:function(){var t=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(function(){return t.strokeEnabled()&&t.strokeWidth()&&!(!t.stroke()&&!t.strokeLinearGradientColorStops())}))}},{key:"hasHitStroke",value:function(){var t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}},{key:"intersects",value:function(t){var e=this.getStage();if(!e)return!1;var n=e.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}},{key:"destroy",value:function(){return v.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}},{key:"_useBufferCanvas",value:function(t){var e;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;var n=t||this.hasFill(),r=this.hasStroke(),i=1!==this.getAbsoluteOpacity();if(n&&r&&i)return!0;var o=this.hasShadow(),a=this.shadowForStrokeEnabled();return!!(n&&r&&o&&a)}},{key:"setStrokeHitEnabled",value:function(t){d.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}},{key:"getStrokeHitEnabled",value:function(){return 0!==this.hitStrokeWidth()}},{key:"getSelfRect",value:function(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}},{key:"getClientRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.skipTransform,n=t.relativeTo,r=this.getSelfRect(),i=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+i,a=r.height+i,s=!t.skipShadow&&this.hasShadow(),c=s?this.shadowOffsetX():0,l=s?this.shadowOffsetY():0,u=o+Math.abs(c),h=a+Math.abs(l),f=s&&this.shadowBlur()||0,d={width:u+2*f,height:h+2*f,x:-(i/2+f)+Math.min(c,0)+r.x,y:-(i/2+f)+Math.min(l,0)+r.y};return e?d:this._transformedRect(d,n)}},{key:"drawScene",value:function(t,e,n){var r,i,o=this.getLayer(),a=t||o.getCanvas(),s=a.getContext(),c=this._getCanvasCache(),l=this.getSceneFunc(),u=this.hasShadow(),h=a.isCache,f=e===this;if(!this.isVisible()&&!f)return this;if(c){s.save();var d=this.getAbsoluteTransform(e).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!l)return this;if(s.save(),this._useBufferCanvas()&&!h){r=this.getStage();var p=n||r.bufferCanvas;(i=p.getContext()).clear(),i.save(),i._applyLineJoin(this);var v=this.getAbsoluteTransform(e).getMatrix();i.transform(v[0],v[1],v[2],v[3],v[4],v[5]),l.call(this,i,this),i.restore();var g=p.pixelRatio;u&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(p._canvas,0,0,p.width/g,p.height/g)}else s._applyLineJoin(this),f||(v=this.getAbsoluteTransform(e).getMatrix(),s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)),u&&s._applyShadow(this),l.call(this,s,this);return s.restore(),this}},{key:"drawHit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.shouldDrawHit(e,n))return this;var r=this.getLayer(),i=t||r.hitCanvas,o=i&&i.getContext(),a=this.hitFunc()||this.sceneFunc(),s=this._getCanvasCache(),c=s&&s.hit;if(this.colorKey||d.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){o.save();var l=this.getAbsoluteTransform(e).getMatrix();return o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),this!==e){var u=this.getAbsoluteTransform(e).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return a.call(this,o,this),o.restore(),this}},{key:"drawHitFromCache",value:function(){var t,e,n,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this._getCanvasCache(),s=this._getCachedSceneCanvas(),c=a.hit,l=c.getContext(),u=c.getWidth(),h=c.getHeight();l.clear(),l.drawImage(s._canvas,0,0,u,h);try{for(n=(e=(t=l.getImageData(0,0,u,h)).data).length,r=d.Util._hexToRgb(this.colorKey),i=0;i<n;i+=4)e[i+3]>o?(e[i]=r.r,e[i+1]=r.g,e[i+2]=r.b,e[i+3]=255):e[i+3]=0;l.putImageData(t,0,0)}catch(t){d.Util.error("Unable to draw hit graph from cached scene canvas. "+t.message)}return this}},{key:"hasPointerCapture",value:function(t){return m.hasPointerCapture(t,this)}},{key:"setPointerCapture",value:function(t){m.setPointerCapture(t,this)}},{key:"releaseCapture",value:function(t){m.releaseCapture(t,this)}}],o&&i(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}(v.Node);e.Shape=P,P.prototype._fillFunc=function(t){var e=this.attrs.fillRule;e?t.fill(e):t.fill()},P.prototype._strokeFunc=function(t){t.stroke()},P.prototype._fillFuncHit=function(t){t.fill()},P.prototype._strokeFuncHit=function(t){t.stroke()},P.prototype._centroid=!1,P.prototype.nodeType="Shape",(0,y._registerNode)(P),P.prototype.eventListeners={},P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(b)})),P.prototype.on.call(P.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(_)})),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(w)})),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(S)})),P.prototype.on.call(P.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(x)})),p.Factory.addGetterSetter(P,"stroke",void 0,(0,g.getStringOrGradientValidator)()),p.Factory.addGetterSetter(P,"strokeWidth",2,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillAfterStrokeEnabled",!1),p.Factory.addGetterSetter(P,"hitStrokeWidth","auto",(0,g.getNumberOrAutoValidator)()),p.Factory.addGetterSetter(P,"strokeHitEnabled",!0,(0,g.getBooleanValidator)()),p.Factory.addGetterSetter(P,"perfectDrawEnabled",!0,(0,g.getBooleanValidator)()),p.Factory.addGetterSetter(P,"shadowForStrokeEnabled",!0,(0,g.getBooleanValidator)()),p.Factory.addGetterSetter(P,"lineJoin"),p.Factory.addGetterSetter(P,"lineCap"),p.Factory.addGetterSetter(P,"sceneFunc"),p.Factory.addGetterSetter(P,"hitFunc"),p.Factory.addGetterSetter(P,"dash"),p.Factory.addGetterSetter(P,"dashOffset",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"shadowColor",void 0,(0,g.getStringValidator)()),p.Factory.addGetterSetter(P,"shadowBlur",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"shadowOpacity",1,(0,g.getNumberValidator)()),p.Factory.addComponentsGetterSetter(P,"shadowOffset",["x","y"]),p.Factory.addGetterSetter(P,"shadowOffsetX",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"shadowOffsetY",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillPatternImage"),p.Factory.addGetterSetter(P,"fill",void 0,(0,g.getStringOrGradientValidator)()),p.Factory.addGetterSetter(P,"fillPatternX",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillPatternY",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillLinearGradientColorStops"),p.Factory.addGetterSetter(P,"strokeLinearGradientColorStops"),p.Factory.addGetterSetter(P,"fillRadialGradientStartRadius",0),p.Factory.addGetterSetter(P,"fillRadialGradientEndRadius",0),p.Factory.addGetterSetter(P,"fillRadialGradientColorStops"),p.Factory.addGetterSetter(P,"fillPatternRepeat","repeat"),p.Factory.addGetterSetter(P,"fillEnabled",!0),p.Factory.addGetterSetter(P,"strokeEnabled",!0),p.Factory.addGetterSetter(P,"shadowEnabled",!0),p.Factory.addGetterSetter(P,"dashEnabled",!0),p.Factory.addGetterSetter(P,"strokeScaleEnabled",!0),p.Factory.addGetterSetter(P,"fillPriority","color"),p.Factory.addComponentsGetterSetter(P,"fillPatternOffset",["x","y"]),p.Factory.addGetterSetter(P,"fillPatternOffsetX",0,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillPatternOffsetY",0,(0,g.getNumberValidator)()),p.Factory.addComponentsGetterSetter(P,"fillPatternScale",["x","y"]),p.Factory.addGetterSetter(P,"fillPatternScaleX",1,(0,g.getNumberValidator)()),p.Factory.addGetterSetter(P,"fillPatternScaleY",1,(0,g.getNumberValidator)()),p.Factory.addComponentsGetterSetter(P,"fillLinearGradientStartPoint",["x","y"]),p.Factory.addComponentsGetterSetter(P,"strokeLinearGradientStartPoint",["x","y"]),p.Factory.addGetterSetter(P,"fillLinearGradientStartPointX",0),p.Factory.addGetterSetter(P,"strokeLinearGradientStartPointX",0),p.Factory.addGetterSetter(P,"fillLinearGradientStartPointY",0),p.Factory.addGetterSetter(P,"strokeLinearGradientStartPointY",0),p.Factory.addComponentsGetterSetter(P,"fillLinearGradientEndPoint",["x","y"]),p.Factory.addComponentsGetterSetter(P,"strokeLinearGradientEndPoint",["x","y"]),p.Factory.addGetterSetter(P,"fillLinearGradientEndPointX",0),p.Factory.addGetterSetter(P,"strokeLinearGradientEndPointX",0),p.Factory.addGetterSetter(P,"fillLinearGradientEndPointY",0),p.Factory.addGetterSetter(P,"strokeLinearGradientEndPointY",0),p.Factory.addComponentsGetterSetter(P,"fillRadialGradientStartPoint",["x","y"]),p.Factory.addGetterSetter(P,"fillRadialGradientStartPointX",0),p.Factory.addGetterSetter(P,"fillRadialGradientStartPointY",0),p.Factory.addComponentsGetterSetter(P,"fillRadialGradientEndPoint",["x","y"]),p.Factory.addGetterSetter(P,"fillRadialGradientEndPointX",0),p.Factory.addGetterSetter(P,"fillRadialGradientEndPointY",0),p.Factory.addGetterSetter(P,"fillPatternRotation",0),p.Factory.addGetterSetter(P,"fillRule",void 0,(0,g.getStringValidator)()),p.Factory.backCompat(P,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},3013:(t,e,n)=>{"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function c(t,e,n){return e=f(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(t,l()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},h.apply(this,arguments)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function p(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;var g=n(7103),y=n(1157),m=n(3152),b=n(9552),_=n(4895),w=n(1337),S=n(9552),x=n(9283),k="mouseleave",P="mouseover",O="mouseenter",C="mousemove",T="mousedown",E="mouseup",A="pointermove",j="pointerdown",M="pointerup",D="pointercancel",R="pointerout",F="pointerleave",I="pointerover",G="pointerenter",N="contextmenu",L="touchstart",U="touchend",B="touchmove",z="touchcancel",V="wheel",H=[[O,"_pointerenter"],[T,"_pointerdown"],[C,"_pointermove"],[E,"_pointerup"],[k,"_pointerleave"],[L,"_pointerdown"],[B,"_pointermove"],[U,"_pointerup"],[z,"_pointercancel"],[P,"_pointerover"],[V,"_wheel"],[N,"_contextmenu"],[j,"_pointerdown"],[A,"_pointermove"],[M,"_pointerup"],[D,"_pointercancel"],["lostpointercapture","_lostpointercapture"]],W={mouse:p(p(p(p(p(p(p(p(p(p({},R,"mouseout"),F,k),I,P),G,O),A,C),j,T),M,E),D,"mousecancel"),"pointerclick","click"),"pointerdblclick","dblclick"),touch:p(p(p(p(p(p(p(p(p(p({},R,"touchout"),F,"touchleave"),I,"touchover"),G,"touchenter"),A,B),j,L),M,U),D,z),"pointerclick","tap"),"pointerdblclick","dbltap"),pointer:p(p(p(p(p(p(p(p(p(p({},R,R),F,F),I,I),G,G),A,A),j,j),M,M),D,D),"pointerclick","pointerclick"),"pointerdblclick","pointerdblclick")},Y=function(t){return t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse"},X=function(t){var e=Y(t);return"pointer"===e?b.Konva.pointerEventsEnabled&&W.pointer:"touch"===e?W.touch:"mouse"===e?W.mouse:void 0};function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t.clipFunc||t.clipWidth||t.clipHeight)&&g.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}e.stages=[];var q=function(t){function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=c(this,n,[K(t)]))._pointerPositions=[],r._changedPointerPositions=[],r._buildDOM(),r._bindContentEvents(),e.stages.push(u(r)),r.on("widthChange.konva heightChange.konva",r._resizeDOM),r.on("visibleChange.konva",r._checkVisibility),r.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){K(r.attrs)})),r._checkVisibility(),r}var r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(n,t),r=n,l=[{key:"_validateAdd",value:function(t){var e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||g.Util.throw("You may only add layers to the stage.")}},{key:"_checkVisibility",value:function(){if(this.content){var t=this.visible()?"":"none";this.content.style.display=t}}},{key:"setContainer",value:function(t){if("string"===a(t)){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}},{key:"shouldDrawHit",value:function(){return!0}},{key:"clear",value:function(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this}},{key:"clone",value:function(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),m.Container.prototype.clone.call(this,t)}},{key:"destroy",value:function(){h(f(n.prototype),"destroy",this).call(this);var t=this.content;t&&g.Util._isInDocument(t)&&this.container().removeChild(t);var r=e.stages.indexOf(this);return r>-1&&e.stages.splice(r,1),g.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}},{key:"getPointerPosition",value:function(){var t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(g.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}},{key:"_getPointerById",value:function(t){return this._pointerPositions.find((function(e){return e.id===t}))}},{key:"getPointersPositions",value:function(){return this._pointerPositions}},{key:"getStage",value:function(){return this}},{key:"getContent",value:function(){return this.content}},{key:"_toKonvaCanvas",value:function(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new _.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,r=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),r.forEach((function(e){if(e.isVisible()){var r=e._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),e}},{key:"getIntersection",value:function(t){if(!t)return null;var e,n=this.children;for(e=n.length-1;e>=0;e--){var r=n[e].getIntersection(t);if(r)return r}return null}},{key:"_resizeDOM",value:function(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((function(n){n.setSize({width:t,height:e}),n.draw()}))}},{key:"add",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}h(f(n.prototype),"add",this).call(this,t);var a=this.children.length;return a>5&&g.Util.warn("The stage has "+a+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),b.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}},{key:"getParent",value:function(){return null}},{key:"getLayer",value:function(){return null}},{key:"hasPointerCapture",value:function(t){return x.hasPointerCapture(t,this)}},{key:"setPointerCapture",value:function(t){x.setPointerCapture(t,this)}},{key:"releaseCapture",value:function(t){x.releaseCapture(t,this)}},{key:"getLayers",value:function(){return this.children}},{key:"_bindContentEvents",value:function(){var t=this;b.Konva.isBrowser&&H.forEach((function(e){var n,r,i=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(n,r)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],s=i[1];t.content.addEventListener(a,(function(e){t[s](e)}),{passive:!1})}))}},{key:"_pointerenter",value:function(t){this.setPointersPositions(t);var e=X(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}},{key:"_pointerover",value:function(t){this.setPointersPositions(t);var e=X(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}},{key:"_getTargetShape",value:function(t){var e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}},{key:"_pointerleave",value:function(t){var e=X(t.type),n=Y(t.type);if(e){this.setPointersPositions(t);var r=this._getTargetShape(n),i=!w.DD.isDragging||b.Konva.hitOnDragEnabled;r&&i?(r._fireAndBubble(e.pointerout,{evt:t}),r._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):i&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}},{key:"_pointerdown",value:function(t){var e=this,n=X(t.type),r=Y(t.type);if(n){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach((function(o){var a=e.getIntersection(o);if(w.DD.justDragged=!1,b.Konva["_"+r+"ListenClick"]=!0,a&&a.isListening()){b.Konva.capturePointerEventsEnabled&&a.setPointerCapture(o.id),e[r+"ClickStartShape"]=a,a._fireAndBubble(n.pointerdown,{evt:t,pointerId:o.id}),i=!0;var s=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&s&&t.preventDefault()}})),i||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}},{key:"_pointermove",value:function(t){var e=this,n=X(t.type),r=Y(t.type);if(n&&(w.DD.isDragging&&w.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!w.DD.isDragging||b.Konva.hitOnDragEnabled)){var o={},a=!1,s=this._getTargetShape(r);this._changedPointerPositions.forEach((function(c){var l=x.getCapturedShape(c.id)||e.getIntersection(c),u=c.id,h={evt:t,pointerId:u},f=s!==l;if(f&&s&&(s._fireAndBubble(n.pointerout,i({},h),l),s._fireAndBubble(n.pointerleave,i({},h),l)),l){if(o[l._id])return;o[l._id]=!0}l&&l.isListening()?(a=!0,f&&(l._fireAndBubble(n.pointerover,i({},h),s),l._fireAndBubble(n.pointerenter,i({},h),s),e[r+"targetShape"]=l),l._fireAndBubble(n.pointermove,i({},h))):s&&(e._fire(n.pointerover,{evt:t,target:e,currentTarget:e,pointerId:u}),e[r+"targetShape"]=null)})),a||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}}},{key:"_pointerup",value:function(t){var e=this,n=X(t.type),r=Y(t.type);if(n){this.setPointersPositions(t);var o=this[r+"ClickStartShape"],a=this[r+"ClickEndShape"],s={},c=!1;this._changedPointerPositions.forEach((function(l){var u=x.getCapturedShape(l.id)||e.getIntersection(l);if(u){if(u.releaseCapture(l.id),s[u._id])return;s[u._id]=!0}var h=l.id,f={evt:t,pointerId:h},d=!1;b.Konva["_"+r+"InDblClickWindow"]?(d=!0,clearTimeout(e[r+"DblTimeout"])):w.DD.justDragged||(b.Konva["_"+r+"InDblClickWindow"]=!0,clearTimeout(e[r+"DblTimeout"])),e[r+"DblTimeout"]=setTimeout((function(){b.Konva["_"+r+"InDblClickWindow"]=!1}),b.Konva.dblClickWindow),u&&u.isListening()?(c=!0,e[r+"ClickEndShape"]=u,u._fireAndBubble(n.pointerup,i({},f)),b.Konva["_"+r+"ListenClick"]&&o&&o===u&&(u._fireAndBubble(n.pointerclick,i({},f)),d&&a&&a===u&&u._fireAndBubble(n.pointerdblclick,i({},f)))):(e[r+"ClickEndShape"]=null,b.Konva["_"+r+"ListenClick"]&&e._fire(n.pointerclick,{evt:t,target:e,currentTarget:e,pointerId:h}),d&&e._fire(n.pointerdblclick,{evt:t,target:e,currentTarget:e,pointerId:h}))})),c||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),b.Konva["_"+r+"ListenClick"]=!1,t.cancelable&&"touch"!==r&&t.preventDefault()}}},{key:"_contextmenu",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(N,{evt:t}):this._fire(N,{evt:t,target:this,currentTarget:this})}},{key:"_wheel",value:function(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(V,{evt:t}):this._fire(V,{evt:t,target:this,currentTarget:this})}},{key:"_pointercancel",value:function(t){this.setPointersPositions(t);var e=x.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(M,x.createEvent(t)),x.releaseCapture(t.pointerId)}},{key:"_lostpointercapture",value:function(t){x.releaseCapture(t.pointerId)}},{key:"setPointersPositions",value:function(t){var e=this,n=this._getContentPosition(),r=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(function(t){e._pointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(function(t){e._changedPointerPositions.push({id:t.identifier,x:(t.clientX-n.left)/n.scaleX,y:(t.clientY-n.top)/n.scaleY})}))):(r=(t.clientX-n.left)/n.scaleX,i=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:g.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:r,y:i,id:g.Util._getFirstPointerId(t)}])}},{key:"_setPointerPosition",value:function(t){g.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}},{key:"_getContentPosition",value:function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}},{key:"_buildDOM",value:function(){if(this.bufferCanvas=new _.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new _.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),b.Konva.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}},{key:"cache",value:function(){return g.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}},{key:"clearCache",value:function(){return this}},{key:"batchDraw",value:function(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}],l&&s(r.prototype,l),Object.defineProperty(r,"prototype",{writable:!1}),n}(m.Container);e.Stage=q,q.prototype.nodeType="Stage",(0,S._registerNode)(q),y.Factory.addGetterSetter(q,"container")},5672:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;var c=n(7103),l=n(1893),u=n(7087),h=n(9552),f={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d=0,p=["fill","stroke","shadowColor"],v=function(){function t(e,n,r,o,a,s,c){i(this,t),this.prop=e,this.propFunc=n,this.begin=o,this._pos=o,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=c,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=a-this.begin,this.pause()}return a(t,[{key:"fire",value:function(t){var e=this[t];e&&e()}},{key:"setTime",value:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}},{key:"getTime",value:function(){return this._time}},{key:"setPosition",value:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}},{key:"getPosition",value:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}},{key:"play",value:function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}},{key:"reverse",value:function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}},{key:"seek",value:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}},{key:"reset",value:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")}},{key:"finish",value:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}},{key:"update",value:function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}},{key:"onEnterFrame",value:function(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}},{key:"pause",value:function(){this.state=1,this.fire("onPause")}},{key:"getTimer",value:function(){return(new Date).getTime()}}]),t}(),g=function(){function t(n){i(this,t);var r,o,a=this,s=n.node,u=s._id,p=n.easing||e.Easings.Linear,g=!!n.yoyo;r=void 0===n.duration?.3:0===n.duration?.001:n.duration,this.node=s,this._id=d++;var y=s.getLayer()||(s instanceof h.Konva.Stage?s.getLayers():null);for(o in y||c.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new l.Animation((function(){a.tween.onEnterFrame()}),y),this.tween=new v(o,(function(t){a._tweenFunc(t)}),p,0,1,1e3*r,g),this._addListeners(),t.attrs[u]||(t.attrs[u]={}),t.attrs[u][this._id]||(t.attrs[u][this._id]={}),t.tweens[u]||(t.tweens[u]={}),n)void 0===f[o]&&this._addAttr(o,n[o]);this.reset(),this.onFinish=n.onFinish,this.onReset=n.onReset,this.onUpdate=n.onUpdate}return a(t,[{key:"_addAttr",value:function(e,n){var r,i,o,a,s,l,u,h,f=this.node,d=f._id;if((o=t.tweens[d][e])&&delete t.attrs[d][o][e],r=f.getAttr(e),c.Util._isArray(n))if(i=[],s=Math.max(n.length,r.length),"points"===e&&n.length!==r.length&&(n.length>r.length?(u=r,r=c.Util._prepareArrayForTween(r,n,f.closed())):(l=n,n=c.Util._prepareArrayForTween(n,r,f.closed()))),0===e.indexOf("fill"))for(a=0;a<s;a++)if(a%2==0)i.push(n[a]-r[a]);else{var v=c.Util.colorToRGBA(r[a]);h=c.Util.colorToRGBA(n[a]),r[a]=v,i.push({r:h.r-v.r,g:h.g-v.g,b:h.b-v.b,a:h.a-v.a})}else for(a=0;a<s;a++)i.push(n[a]-r[a]);else-1!==p.indexOf(e)?(r=c.Util.colorToRGBA(r),i={r:(h=c.Util.colorToRGBA(n)).r-r.r,g:h.g-r.g,b:h.b-r.b,a:h.a-r.a}):i=n-r;t.attrs[d][this._id][e]={start:r,diff:i,end:n,trueEnd:l,trueStart:u},t.tweens[d][e]=this._id}},{key:"_tweenFunc",value:function(e){var n,r,i,o,a,s,l,u,h=this.node,f=t.attrs[h._id][this._id];for(n in f){if(i=(r=f[n]).start,o=r.diff,u=r.end,c.Util._isArray(i))if(a=[],l=Math.max(i.length,u.length),0===n.indexOf("fill"))for(s=0;s<l;s++)s%2==0?a.push((i[s]||0)+o[s]*e):a.push("rgba("+Math.round(i[s].r+o[s].r*e)+","+Math.round(i[s].g+o[s].g*e)+","+Math.round(i[s].b+o[s].b*e)+","+(i[s].a+o[s].a*e)+")");else for(s=0;s<l;s++)a.push((i[s]||0)+o[s]*e);else a=-1!==p.indexOf(n)?"rgba("+Math.round(i.r+o.r*e)+","+Math.round(i.g+o.g*e)+","+Math.round(i.b+o.b*e)+","+(i.a+o.a*e)+")":i+o*e;h.setAttr(n,a)}}},{key:"_addListeners",value:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueEnd&&n.setAttr("points",r.points.trueEnd),e.onFinish&&e.onFinish.call(e)},this.tween.onReset=function(){var n=e.node,r=t.attrs[n._id][e._id];r.points&&r.points.trueStart&&n.points(r.points.trueStart),e.onReset&&e.onReset()},this.tween.onUpdate=function(){e.onUpdate&&e.onUpdate.call(e)}}},{key:"play",value:function(){return this.tween.play(),this}},{key:"reverse",value:function(){return this.tween.reverse(),this}},{key:"reset",value:function(){return this.tween.reset(),this}},{key:"seek",value:function(t){return this.tween.seek(1e3*t),this}},{key:"pause",value:function(){return this.tween.pause(),this}},{key:"finish",value:function(){return this.tween.finish(),this}},{key:"destroy",value:function(){var e,n=this.node._id,r=this._id,i=t.tweens[n];for(e in this.pause(),i)delete t.tweens[n][e];delete t.attrs[n][r]}}]),t}();e.Tween=g,g.attrs={},g.tweens={},u.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new g(t).play()},e.Easings={BackEaseIn:function(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut:function(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e},ElasticEaseIn:function(t,e,n,r,i,o){var a=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)+e)},ElasticEaseOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:1==(t/=r)?e+n:(o||(o=.3*r),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut:function(t,e,n,r,i,o){var a=0;return 0===t?e:2==(t/=r/2)?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,a=o/4):a=o/(2*Math.PI)*Math.asin(n/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*-.5+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,n,r,i){return r-e.Easings.BounceEaseOut(i-t,0,r,i)+n},BounceEaseInOut:function(t,n,r,i){return t<i/2?.5*e.Easings.BounceEaseIn(2*t,0,r,i)+n:.5*e.Easings.BounceEaseOut(2*t-i,0,r,i)+.5*r+n},EaseIn:function(t,e,n,r){return n*(t/=r)*t+e},EaseOut:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,n,r){return n*t/r+e}}},7103:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;var s=n(9552),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}var n,r;return n=t,(r=[{key:"reset",value:function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}},{key:"copy",value:function(){return new t(this.m)}},{key:"copyInto",value:function(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}},{key:"point",value:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}},{key:"translate",value:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}},{key:"scale",value:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,a=this.m[1]*-n+this.m[3]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=a,this}},{key:"getTranslation",value:function(){return{x:this.m[4],y:this.m[5]}}},{key:"skew",value:function(t,e){var n=this.m[0]+this.m[2]*e,r=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this}},{key:"multiply",value:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"invert",value:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,r=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=o,this.m[5]=a,this}},{key:"getMatrix",value:function(){return this.m}},{key:"decompose",value:function(){var t=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],o=t*i-n*r,a={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=n){var s=Math.sqrt(t*t+n*n);a.rotation=n>0?Math.acos(t/s):-Math.acos(t/s),a.scaleX=s,a.scaleY=o/s,a.skewX=(t*r+n*i)/o,a.skewY=0}else if(0!=r||0!=i){var c=Math.sqrt(r*r+i*i);a.rotation=Math.PI/2-(i>0?Math.acos(-r/c):-Math.acos(r/c)),a.scaleX=o/c,a.scaleY=c,a.skewX=0,a.skewY=(t*r+n*i)/o}return a.rotation=e.Util._getRotation(a.rotation),a}}])&&o(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();e.Transform=c;var l=Math.PI/180,u=180/Math.PI,h="Konva error: ",f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,p=[],v="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject:function(t){return!!t&&t.constructor===Object},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t)},_isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},_isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isObject:function(t){return t instanceof Object},isValidSelector:function(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:function(t){return 0===t||t>0?1:-1},requestAnimFrame:function(t){p.push(t),1===p.length&&v((function(){var t=p;p=[],t.forEach((function(t){t()}))}))},createCanvasElement:function(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(t){}return t},createImageElement:function(){return document.createElement("img")},_isInDocument:function(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage:function(t,n){var r=e.Util.createImageElement();r.onload=function(){n(r)},r.src=t},_rgbToHex:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB:function(t){var e;return t in f?{r:(e=f[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=d.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA:function(t){var e=f[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA:function(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA:function(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((function(t,e){return"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)}));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA:function(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA:function(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA:function(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA:function(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA:function(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){var e,n,i,o=function(t){if(Array.isArray(t))return t}(d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(d)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=(o[0],o.slice(1)),s=Number(a[0])/360,c=Number(a[1])/100,l=Number(a[2])/100;if(0===c)return i=255*l,{r:Math.round(i),g:Math.round(i),b:Math.round(i),a:1};for(var u=2*l-(e=l<.5?l*(1+c):l+c-l*c),h=[0,0,0],f=0;f<3;f++)(n=s+1/3*-(f-1))<0&&n++,n>1&&n--,i=6*n<1?u+6*(e-u)*n:2*n<1?e:3*n<2?u+(e-u)*(2/3-n)*6:u,h[f]=255*i;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}var d},haveIntersection:function(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject:function(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:function(t){return t.slice(0)},degToRad:function(t){return t*l},radToDeg:function(t){return t*u},_degToRad:function(t){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)},_radToDeg:function(t){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)},_getRotation:function(t){return s.Konva.angleDeg?e.Util.radToDeg(t):t},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw:function(t){throw new Error(h+t)},error:function(t){console.error(h+t)},warn:function(t){s.Konva.showWarnings&&console.warn("Konva warning: "+t)},each:function(t,e){for(var n in t)e(n,t[n])},_inRange:function(t,e,n){return e<=t&&t<n},_getProjectionToSegment:function(t,e,n,r,i,o){var a,s,c,l=(t-n)*(t-n)+(e-r)*(e-r);if(0==l)a=t,s=e,c=(i-n)*(i-n)+(o-r)*(o-r);else{var u=((i-t)*(n-t)+(o-e)*(r-e))/l;u<0?(a=t,s=e,c=(t-i)*(t-i)+(e-o)*(e-o)):u>1?(a=n,s=r,c=(n-i)*(n-i)+(r-o)*(r-o)):c=((a=t+u*(n-t))-i)*(a-i)+((s=e+u*(r-e))-o)*(s-o)}return[a,s,c]},_getProjectionToLine:function(t,n,r){var i=e.Util.cloneObject(t),o=Number.MAX_VALUE;return n.forEach((function(a,s){if(r||s!==n.length-1){var c=n[(s+1)%n.length],l=e.Util._getProjectionToSegment(a.x,a.y,c.x,c.y,t.x,t.y),u=l[0],h=l[1],f=l[2];f<o&&(i.x=u,i.y=h,o=f)}})),i},_prepareArrayForTween:function(t,n,r){var i,o=[],a=[];if(t.length>n.length){var s=n;n=t,t=s}for(i=0;i<t.length;i+=2)o.push({x:t[i],y:t[i+1]});for(i=0;i<n.length;i+=2)a.push({x:n[i],y:n[i+1]});var c=[];return a.forEach((function(t){var n=e.Util._getProjectionToLine(t,o,r);c.push(n.x),c.push(n.y)})),c},_prepareToStringify:function(t){var n;for(var r in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(r)&&t[r]&&"object"==i(t[r]))if(n=Object.getOwnPropertyDescriptor(t,r),t[r].visitedByCircularReferenceRemoval||e.Util._isElement(t[r])){if(!n.configurable)return null;delete t[r]}else if(null===e.Util._prepareToStringify(t[r])){if(!n.configurable)return null;delete t[r]}return delete t.visitedByCircularReferenceRemoval,t},_assign:function(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:function(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas:function(){if(s.Konva.releaseCanvasOnDestroy){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){t.width=0,t.height=0}))}},drawRoundedRectPath:function(t,e,n,r){var i=0,o=0,a=0,s=0;"number"==typeof r?i=o=a=s=Math.min(r,e/2,n/2):(i=Math.min(r[0]||0,e/2,n/2),o=Math.min(r[1]||0,e/2,n/2),s=Math.min(r[2]||0,e/2,n/2),a=Math.min(r[3]||0,e/2,n/2)),t.moveTo(i,0),t.lineTo(e-o,0),t.arc(e-o,o,o,3*Math.PI/2,0,!1),t.lineTo(e,n-s),t.arc(e-s,n-s,s,0,Math.PI/2,!1),t.lineTo(a,n),t.arc(a,n-a,a,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}}},544:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentValidator=e.getBooleanValidator=e.getNumberArrayValidator=e.getFunctionValidator=e.getStringOrGradientValidator=e.getStringValidator=e.getNumberOrAutoValidator=e.getNumberOrArrayOfNumbersValidator=e.getNumberValidator=e.alphaComponent=e.RGBComponent=void 0;var r=n(9552),i=n(7103);function o(t){return i.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||i.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}e.RGBComponent=function(t){return t>255?255:t<0?0:Math.round(t)},e.alphaComponent=function(t){return t>1?1:t<1e-4?1e-4:t},e.getNumberValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}},e.getNumberOrArrayOfNumbersValidator=function(t){if(r.Konva.isUnminified)return function(e,n){var r=i.Util._isNumber(e),a=i.Util._isArray(e)&&e.length==t;return r||a||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}},e.getNumberOrAutoValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isNumber(t)||"auto"===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}},e.getStringValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isString(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}},e.getStringOrGradientValidator=function(){if(r.Konva.isUnminified)return function(t,e){var n=i.Util._isString(t),r="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||r||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}},e.getFunctionValidator=function(){if(r.Konva.isUnminified)return function(t,e){return i.Util._isFunction(t)||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}},e.getNumberArrayValidator=function(){if(r.Konva.isUnminified)return function(t,e){var n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(i.Util._isArray(t)?t.forEach((function(t){i.Util._isNumber(t)||i.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}},e.getBooleanValidator=function(){if(r.Konva.isUnminified)return function(t,e){return!0===t||!1===t||i.Util.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}},e.getComponentValidator=function(t){if(r.Konva.isUnminified)return function(e,n){return null==e||i.Util.isObject(e)||i.Util.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}},3347:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var r=n(9552),i=n(7103),o=n(7087),a=n(3152),s=n(3013),c=n(3250),l=n(1812),u=n(2836),h=n(1337),f=n(5762),d=n(1893),p=n(5672),v=n(3060),g=n(4895);e.Konva=i.Util._assign(r.Konva,{Util:i.Util,Transform:i.Transform,Node:o.Node,Container:a.Container,Stage:s.Stage,stages:s.stages,Layer:c.Layer,FastLayer:l.FastLayer,Group:u.Group,DD:h.DD,Shape:f.Shape,shapes:f.shapes,Animation:d.Animation,Tween:p.Tween,Easings:p.Easings,Context:v.Context,Canvas:g.Canvas}),e.default=e.Konva},4265:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var r=n(3347),i=n(7902),o=n(9847),a=n(5528),s=n(9772),c=n(5999),l=n(184),u=n(1906),h=n(4347),f=n(9646),d=n(1202),p=n(4430),v=n(4597),g=n(2668),y=n(9275),m=n(2e3),b=n(9185),_=n(2978),w=n(9018),S=n(9876),x=n(3309),k=n(1156),P=n(4253),O=n(1044),C=n(1948),T=n(2270),E=n(1171),A=n(6714),j=n(3351),M=n(7389),D=n(9279),R=n(7462),F=n(5200),I=n(9425),G=n(5394),N=n(2218),L=n(5568);e.Konva=r.Konva.Util._assign(r.Konva,{Arc:i.Arc,Arrow:o.Arrow,Circle:a.Circle,Ellipse:s.Ellipse,Image:c.Image,Label:l.Label,Tag:l.Tag,Line:u.Line,Path:h.Path,Rect:f.Rect,RegularPolygon:d.RegularPolygon,Ring:p.Ring,Sprite:v.Sprite,Star:g.Star,Text:y.Text,TextPath:m.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:w.Blur,Brighten:S.Brighten,Contrast:x.Contrast,Emboss:k.Emboss,Enhance:P.Enhance,Grayscale:O.Grayscale,HSL:C.HSL,HSV:T.HSV,Invert:E.Invert,Kaleidoscope:A.Kaleidoscope,Mask:j.Mask,Noise:M.Noise,Pixelate:D.Pixelate,Posterize:R.Posterize,RGB:F.RGB,RGBA:I.RGBA,Sepia:G.Sepia,Solarize:N.Solarize,Threshold:L.Threshold}})},9018:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;var r=n(1157),i=n(7087),o=n(544);function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];e.Blur=function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,r,i,o,l,u,h,f,d,p,v,g,y,m,b,_,w,S,x,k,P,O,C,T,E=t.data,A=t.width,j=t.height,M=e+e+1,D=A-1,R=j-1,F=e+1,I=F*(F+1)/2,G=new a,N=null,L=G,U=null,B=null,z=s[e],V=c[e];for(i=1;i<M;i++)L=L.next=new a,i===F&&(N=L);for(L.next=G,h=u=0,r=0;r<j;r++){for(_=w=S=x=f=d=p=v=0,g=F*(k=E[u]),y=F*(P=E[u+1]),m=F*(O=E[u+2]),b=F*(C=E[u+3]),f+=I*k,d+=I*P,p+=I*O,v+=I*C,L=G,i=0;i<F;i++)L.r=k,L.g=P,L.b=O,L.a=C,L=L.next;for(i=1;i<F;i++)o=u+((D<i?D:i)<<2),f+=(L.r=k=E[o])*(T=F-i),d+=(L.g=P=E[o+1])*T,p+=(L.b=O=E[o+2])*T,v+=(L.a=C=E[o+3])*T,_+=k,w+=P,S+=O,x+=C,L=L.next;for(U=G,B=N,n=0;n<A;n++)E[u+3]=C=v*z>>V,0!==C?(C=255/C,E[u]=(f*z>>V)*C,E[u+1]=(d*z>>V)*C,E[u+2]=(p*z>>V)*C):E[u]=E[u+1]=E[u+2]=0,f-=g,d-=y,p-=m,v-=b,g-=U.r,y-=U.g,m-=U.b,b-=U.a,o=h+((o=n+e+1)<D?o:D)<<2,f+=_+=U.r=E[o],d+=w+=U.g=E[o+1],p+=S+=U.b=E[o+2],v+=x+=U.a=E[o+3],U=U.next,g+=k=B.r,y+=P=B.g,m+=O=B.b,b+=C=B.a,_-=k,w-=P,S-=O,x-=C,B=B.next,u+=4;h+=A}for(n=0;n<A;n++){for(w=S=x=_=d=p=v=f=0,g=F*(k=E[u=n<<2]),y=F*(P=E[u+1]),m=F*(O=E[u+2]),b=F*(C=E[u+3]),f+=I*k,d+=I*P,p+=I*O,v+=I*C,L=G,i=0;i<F;i++)L.r=k,L.g=P,L.b=O,L.a=C,L=L.next;for(l=A,i=1;i<=e;i++)u=l+n<<2,f+=(L.r=k=E[u])*(T=F-i),d+=(L.g=P=E[u+1])*T,p+=(L.b=O=E[u+2])*T,v+=(L.a=C=E[u+3])*T,_+=k,w+=P,S+=O,x+=C,L=L.next,i<R&&(l+=A);for(u=n,U=G,B=N,r=0;r<j;r++)E[3+(o=u<<2)]=C=v*z>>V,C>0?(C=255/C,E[o]=(f*z>>V)*C,E[o+1]=(d*z>>V)*C,E[o+2]=(p*z>>V)*C):E[o]=E[o+1]=E[o+2]=0,f-=g,d-=y,p-=m,v-=b,g-=U.r,y-=U.g,m-=U.b,b-=U.a,o=n+((o=r+F)<R?o:R)*A<<2,f+=_+=U.r=E[o],d+=w+=U.g=E[o+1],p+=S+=U.b=E[o+2],v+=x+=U.a=E[o+3],U=U.next,g+=k=B.r,y+=P=B.g,m+=O=B.b,b+=C=B.a,_-=k,w-=P,S-=O,x-=C,B=B.next,u+=A}}(t,e)},r.Factory.addGetterSetter(i.Node,"blurRadius",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},9876:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;var r=n(1157),i=n(7087),o=n(544);e.Brighten=function(t){var e,n=255*this.brightness(),r=t.data,i=r.length;for(e=0;e<i;e+=4)r[e]+=n,r[e+1]+=n,r[e+2]+=n},r.Factory.addGetterSetter(i.Node,"brightness",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},3309:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;var r=n(1157),i=n(7087),o=n(544);e.Contrast=function(t){var e,n=Math.pow((this.contrast()+100)/100,2),r=t.data,i=r.length,o=150,a=150,s=150;for(e=0;e<i;e+=4)o=r[e],a=r[e+1],s=r[e+2],o/=255,o-=.5,o*=n,o+=.5,a/=255,a-=.5,a*=n,a+=.5,s/=255,s-=.5,s*=n,s+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,s=(s*=255)<0?0:s>255?255:s,r[e]=o,r[e+1]=a,r[e+2]=s},r.Factory.addGetterSetter(i.Node,"contrast",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},1156:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;var r=n(1157),i=n(7087),o=n(7103),a=n(544);e.Emboss=function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),r=this.embossDirection(),i=this.embossBlend(),a=0,s=0,c=t.data,l=t.width,u=t.height,h=4*l,f=u;switch(r){case"top-left":a=-1,s=-1;break;case"top":a=-1,s=0;break;case"top-right":a=-1,s=1;break;case"right":a=0,s=1;break;case"bottom-right":a=1,s=1;break;case"bottom":a=1,s=0;break;case"bottom-left":a=1,s=-1;break;case"left":a=0,s=-1;break;default:o.Util.error("Unknown emboss direction: "+r)}do{var d=(f-1)*h,p=a;f+p<1&&(p=0),f+p>u&&(p=0);var v=(f-1+p)*l*4,g=l;do{var y=d+4*(g-1),m=s;g+m<1&&(m=0),g+m>l&&(m=0);var b=v+4*(g-1+m),_=c[y]-c[b],w=c[y+1]-c[b+1],S=c[y+2]-c[b+2],x=_,k=x>0?x:-x;if((w>0?w:-w)>k&&(x=w),(S>0?S:-S)>k&&(x=S),x*=e,i){var P=c[y]+x,O=c[y+1]+x,C=c[y+2]+x;c[y]=P>255?255:P<0?0:P,c[y+1]=O>255?255:O<0?0:O,c[y+2]=C>255?255:C<0?0:C}else{var T=n-x;T<0?T=0:T>255&&(T=255),c[y]=c[y+1]=c[y+2]=T}}while(--g)}while(--f)},r.Factory.addGetterSetter(i.Node,"embossStrength",.5,(0,a.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,(0,a.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,r.Factory.afterSetFilter)},4253:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;var r=n(1157),i=n(7087),o=n(544);function a(t,e,n,r,i){var o=n-e,a=i-r;return 0===o?r+a/2:0===a?r:a*((t-e)/o)+r}e.Enhance=function(t){var e,n,r,i,o=t.data,s=o.length,c=o[0],l=c,u=o[1],h=u,f=o[2],d=f,p=this.enhance();if(0!==p){for(i=0;i<s;i+=4)(e=o[i+0])<c?c=e:e>l&&(l=e),(n=o[i+1])<u?u=n:n>h&&(h=n),(r=o[i+2])<f?f=r:r>d&&(d=r);var v,g,y,m,b,_,w,S,x;for(l===c&&(l=255,c=0),h===u&&(h=255,u=0),d===f&&(d=255,f=0),p>0?(g=l+p*(255-l),y=c-p*(c-0),b=h+p*(255-h),_=u-p*(u-0),S=d+p*(255-d),x=f-p*(f-0)):(g=l+p*(l-(v=.5*(l+c))),y=c+p*(c-v),b=h+p*(h-(m=.5*(h+u))),_=u+p*(u-m),S=d+p*(d-(w=.5*(d+f))),x=f+p*(f-w)),i=0;i<s;i+=4)o[i+0]=a(o[i+0],c,l,y,g),o[i+1]=a(o[i+1],u,h,_,b),o[i+2]=a(o[i+2],f,d,x,S)}},r.Factory.addGetterSetter(i.Node,"enhance",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},1044:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0,e.Grayscale=function(t){var e,n,r=t.data,i=r.length;for(e=0;e<i;e+=4)n=.34*r[e]+.5*r[e+1]+.16*r[e+2],r[e]=n,r[e+1]=n,r[e+2]=n}},1948:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;var r=n(1157),i=n(7087),o=n(544);r.Factory.addGetterSetter(i.Node,"hue",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"luminance",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter),e.HSL=function(t){var e,n,r,i,o,a=t.data,s=a.length,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=127*this.luminance(),h=1*c*Math.cos(l*Math.PI/180),f=1*c*Math.sin(l*Math.PI/180),d=.299+.701*h+.167*f,p=.587-.587*h+.33*f,v=.114-.114*h-.497*f,g=.299-.299*h-.328*f,y=.587+.413*h+.035*f,m=.114-.114*h+.293*f,b=.299-.3*h+1.25*f,_=.587-.586*h-1.05*f,w=.114+.886*h-.2*f;for(e=0;e<s;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=d*n+p*r+v*i+u,a[e+1]=g*n+y*r+m*i+u,a[e+2]=b*n+_*r+w*i+u,a[e+3]=o}},2270:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;var r=n(1157),i=n(7087),o=n(544);e.HSV=function(t){var e,n,r,i,o,a=t.data,s=a.length,c=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,h=c*l*Math.cos(u*Math.PI/180),f=c*l*Math.sin(u*Math.PI/180),d=.299*c+.701*h+.167*f,p=.587*c-.587*h+.33*f,v=.114*c-.114*h-.497*f,g=.299*c-.299*h-.328*f,y=.587*c+.413*h+.035*f,m=.114*c-.114*h+.293*f,b=.299*c-.3*h+1.25*f,_=.587*c-.586*h-1.05*f,w=.114*c+.886*h-.2*f;for(e=0;e<s;e+=4)n=a[e+0],r=a[e+1],i=a[e+2],o=a[e+3],a[e+0]=d*n+p*r+v*i,a[e+1]=g*n+y*r+m*i,a[e+2]=b*n+_*r+w*i,a[e+3]=o},r.Factory.addGetterSetter(i.Node,"hue",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"saturation",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"value",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},1171:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0,e.Invert=function(t){var e,n=t.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]}},6714:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;var r=n(1157),i=n(7087),o=n(7103),a=n(544);e.Kaleidoscope=function(t){var e,n,r,i,a,s,c,l,u,h=t.width,f=t.height,d=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),v=Math.floor(h*(p%360)/360);if(!(d<1)){var g=o.Util.createCanvasElement();g.width=h,g.height=f;var y=g.getContext("2d").getImageData(0,0,h,f);o.Util.releaseCanvas(g),function(t,e,n){var r,i,o,a,s=t.data,c=e.data,l=t.width,u=t.height,h=n.polarCenterX||l/2,f=n.polarCenterY||u/2,d=0,p=0,v=0,g=0,y=Math.sqrt(h*h+f*f);i=l-h,o=u-f,y=(a=Math.sqrt(i*i+o*o))>y?a:y;var m,b,_,w,S=u,x=l,k=360/x*Math.PI/180;for(b=0;b<x;b+=1)for(_=Math.sin(b*k),w=Math.cos(b*k),m=0;m<S;m+=1)i=Math.floor(h+y*m/S*w),d=s[0+(r=4*((o=Math.floor(f+y*m/S*_))*l+i))],p=s[r+1],v=s[r+2],g=s[r+3],c[0+(r=4*(b+m*l))]=d,c[r+1]=p,c[r+2]=v,c[r+3]=g}(t,y,{polarCenterX:h/2,polarCenterY:f/2});for(var m=h/Math.pow(2,d);m<=8;)m*=2,d-=1;var b=m=Math.ceil(m),_=0,w=b,S=1;for(v+m>h&&(_=b,w=0,S=-1),n=0;n<f;n+=1)for(e=_;e!==w;e+=S)l=4*(h*n+Math.round(e+v)%h),i=y.data[l+0],a=y.data[l+1],s=y.data[l+2],c=y.data[l+3],u=4*(h*n+e),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=s,y.data[u+3]=c;for(n=0;n<f;n+=1)for(b=Math.floor(m),r=0;r<d;r+=1){for(e=0;e<b+1;e+=1)l=4*(h*n+e),i=y.data[l+0],a=y.data[l+1],s=y.data[l+2],c=y.data[l+3],u=4*(h*n+2*b-e-1),y.data[u+0]=i,y.data[u+1]=a,y.data[u+2]=s,y.data[u+3]=c;b*=2}!function(t,e,n){var r,i,o,a,s,c,l=t.data,u=e.data,h=t.width,f=t.height,d=n.polarCenterX||h/2,p=n.polarCenterY||f/2,v=0,g=0,y=0,m=0,b=Math.sqrt(d*d+p*p);i=h-d,o=f-p,b=(c=Math.sqrt(i*i+o*o))>b?c:b;var _,w,S,x=f,k=h,P=n.polarRotation||0;for(i=0;i<h;i+=1)for(o=0;o<f;o+=1)a=i-d,s=o-p,_=Math.sqrt(a*a+s*s)*x/b,w=(w=(180*Math.atan2(s,a)/Math.PI+360+P)%360)*k/360,S=Math.floor(w),v=l[0+(r=4*(Math.floor(_)*h+S))],g=l[r+1],y=l[r+2],m=l[r+3],u[0+(r=4*(o*h+i))]=v,u[r+1]=g,u[r+2]=y,u[r+3]=m}(y,t,{polarRotation:0})}},r.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,(0,a.getNumberValidator)(),r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,(0,a.getNumberValidator)(),r.Factory.afterSetFilter)},3351:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;var r=n(1157),i=n(7087),o=n(544);function a(t,e,n){var r=4*(n*t.width+e),i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function s(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}e.Mask=function(t){var e=function(t,e){var n=a(t,0,0),r=a(t,t.width-1,0),i=a(t,0,t.height-1),o=a(t,t.width-1,t.height-1),c=e||10;if(s(n,r)<c&&s(r,o)<c&&s(o,i)<c&&s(i,n)<c){for(var l=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([r,n,o,i]),u=[],h=0;h<t.width*t.height;h++){var f=s(l,[t.data[4*h],t.data[4*h+1],t.data[4*h+2]]);u[h]=f<c?0:255}return u}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=c+f-o;if(d>=0&&d<n&&p>=0&&p<e){var v=r[h*i+f];u+=t[d*e+p]*v}}a[l]=u}return a}(e=function(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=c+f-o;if(d>=0&&d<n&&p>=0&&p<e){var v=r[h*i+f];u+=t[d*e+p]*v}}a[l]=u>=1020?255:0}return a}(e=function(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),a=[],s=0;s<n;s++)for(var c=0;c<e;c++){for(var l=s*e+c,u=0,h=0;h<i;h++)for(var f=0;f<i;f++){var d=s+h-o,p=c+f-o;if(d>=0&&d<n&&p>=0&&p<e){var v=r[h*i+f];u+=t[d*e+p]*v}}a[l]=2040===u?255:0}return a}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},r.Factory.addGetterSetter(i.Node,"threshold",0,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},7389:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var r=n(1157),i=n(7087),o=n(544);e.Noise=function(t){var e,n=255*this.noise(),r=t.data,i=r.length,o=n/2;for(e=0;e<i;e+=4)r[e+0]+=o-2*o*Math.random(),r[e+1]+=o-2*o*Math.random(),r[e+2]+=o-2*o*Math.random()},r.Factory.addGetterSetter(i.Node,"noise",.2,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},9279:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;var r=n(1157),i=n(7103),o=n(7087),a=n(544);e.Pixelate=function(t){var e,n,r,o,a,s,c,l,u,h,f,d,p,v,g=Math.ceil(this.pixelSize()),y=t.width,m=t.height,b=Math.ceil(y/g),_=Math.ceil(m/g),w=t.data;if(g<=0)i.Util.error("pixelSize value can not be <= 0");else for(d=0;d<b;d+=1)for(p=0;p<_;p+=1){for(o=0,a=0,s=0,c=0,u=(l=d*g)+g,f=(h=p*g)+g,v=0,e=l;e<u;e+=1)if(!(e>=y))for(n=h;n<f;n+=1)n>=m||(o+=w[0+(r=4*(y*n+e))],a+=w[r+1],s+=w[r+2],c+=w[r+3],v+=1);for(o/=v,a/=v,s/=v,c/=v,e=l;e<u;e+=1)if(!(e>=y))for(n=h;n<f;n+=1)n>=m||(w[0+(r=4*(y*n+e))]=o,w[r+1]=a,w[r+2]=s,w[r+3]=c)}},r.Factory.addGetterSetter(o.Node,"pixelSize",8,(0,a.getNumberValidator)(),r.Factory.afterSetFilter)},7462:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;var r=n(1157),i=n(7087),o=n(544);e.Posterize=function(t){var e,n=Math.round(254*this.levels())+1,r=t.data,i=r.length,o=255/n;for(e=0;e<i;e+=1)r[e]=Math.floor(r[e]/o)*o},r.Factory.addGetterSetter(i.Node,"levels",.5,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},5200:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;var r=n(1157),i=n(7087),o=n(544);e.RGB=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue();for(e=0;e<i;e+=4)n=(.34*r[e]+.5*r[e+1]+.16*r[e+2])/255,r[e]=n*o,r[e+1]=n*a,r[e+2]=n*s,r[e+3]=r[e+3]},r.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter)},9425:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;var r=n(1157),i=n(7087),o=n(544);e.RGBA=function(t){var e,n,r=t.data,i=r.length,o=this.red(),a=this.green(),s=this.blue(),c=this.alpha();for(e=0;e<i;e+=4)n=1-c,r[e]=o*c+r[e]*n,r[e+1]=a*c+r[e+1]*n,r[e+2]=s*c+r[e+2]*n},r.Factory.addGetterSetter(i.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.Factory.addGetterSetter(i.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),r.Factory.addGetterSetter(i.Node,"blue",0,o.RGBComponent,r.Factory.afterSetFilter),r.Factory.addGetterSetter(i.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},5394:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0,e.Sepia=function(t){var e,n,r,i,o=t.data,a=o.length;for(e=0;e<a;e+=4)n=o[e+0],r=o[e+1],i=o[e+2],o[e+0]=Math.min(255,.393*n+.769*r+.189*i),o[e+1]=Math.min(255,.349*n+.686*r+.168*i),o[e+2]=Math.min(255,.272*n+.534*r+.131*i)}},2218:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0,e.Solarize=function(t){var e=t.data,n=t.width,r=4*n,i=t.height;do{var o=(i-1)*r,a=n;do{var s=o+4*(a-1),c=e[s],l=e[s+1],u=e[s+2];c>127&&(c=255-c),l>127&&(l=255-l),u>127&&(u=255-u),e[s]=c,e[s+1]=l,e[s+2]=u}while(--a)}while(--i)}},5568:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;var r=n(1157),i=n(7087),o=n(544);e.Threshold=function(t){var e,n=255*this.threshold(),r=t.data,i=r.length;for(e=0;e<i;e+=1)r[e]=r[e]<n?0:255},r.Factory.addGetterSetter(i.Node,"threshold",.5,(0,o.getNumberValidator)(),r.Factory.afterSetFilter)},5615:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4265);t.exports=r.Konva},7902:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var u=n(1157),h=n(5762),f=n(9552),d=n(544),p=n(9552),v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=f.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}},{key:"getSelfRect",value:function(){var t=this.innerRadius(),e=this.outerRadius(),n=this.clockwise(),r=f.Konva.getAngle(n?360-this.angle():this.angle()),i=Math.cos(Math.min(r,Math.PI)),o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),a=Math.sin(Math.min(r,Math.PI/2)),s=i*(i>0?t:e),c=o*(o>0?t:e),l=a*(a>0?e:t);return{x:s,y:n?-1*l:c,width:1*e-s,height:l-c}}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Arc=v,v.prototype._centroid=!0,v.prototype.className="Arc",v.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,p._registerNode)(v),u.Factory.addGetterSetter(v,"innerRadius",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(v,"outerRadius",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(v,"angle",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(v,"clockwise",!1,(0,d.getBooleanValidator)())},9847:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;var h=n(1157),f=n(1906),d=n(544),p=n(9552),v=n(4347),g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){c(l(e.prototype),"_sceneFunc",this).call(this,t);var n=2*Math.PI,r=this.points(),i=r,o=0!==this.tension()&&r.length>4;o&&(i=this.getTensionPoints());var a,s,u=this.pointerLength(),h=r.length;if(o){var f=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[h-2],r[h-1]],d=v.Path.calcLength(i[i.length-4],i[i.length-3],"C",f),p=v.Path.getPointOnQuadraticBezier(Math.min(1,1-u/d),f[0],f[1],f[2],f[3],f[4],f[5]);a=r[h-2]-p.x,s=r[h-1]-p.y}else a=r[h-2]-r[h-4],s=r[h-1]-r[h-3];var g=(Math.atan2(s,a)+n)%n,y=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(r[h-2],r[h-1]),t.rotate(g),t.moveTo(0,0),t.lineTo(-u,y/2),t.lineTo(-u,-y/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(r[0],r[1]),o?(a=(i[0]+i[2])/2-r[0],s=(i[1]+i[3])/2-r[1]):(a=r[2]-r[0],s=r[3]-r[1]),t.rotate((Math.atan2(-s,-a)+n)%n),t.moveTo(0,0),t.lineTo(-u,y/2),t.lineTo(-u,-y/2),t.closePath(),t.restore(),this.__fillStroke(t))}},{key:"__fillStroke",value:function(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}},{key:"getSelfRect",value:function(){var t=c(l(e.prototype),"getSelfRect",this).call(this),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+2*n,height:t.height+2*n}}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(f.Line);e.Arrow=g,g.prototype.className="Arrow",(0,p._registerNode)(g),h.Factory.addGetterSetter(g,"pointerLength",10,(0,d.getNumberValidator)()),h.Factory.addGetterSetter(g,"pointerWidth",10,(0,d.getNumberValidator)()),h.Factory.addGetterSetter(g,"pointerAtBeginning",!1),h.Factory.addGetterSetter(g,"pointerAtEnding",!0)},5528:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var u=n(1157),h=n(5762),f=n(544),d=n(9552),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius()!==t/2&&this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius()!==t/2&&this.radius(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Circle=p,p.prototype._centroid=!0,p.prototype.className="Circle",p.prototype._attrsAffectingSize=["radius"],(0,d._registerNode)(p),u.Factory.addGetterSetter(p,"radius",0,(0,f.getNumberValidator)())},9772:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;var u=n(1157),h=n(5762),f=n(544),d=n(9552),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radiusX()}},{key:"getHeight",value:function(){return 2*this.radiusY()}},{key:"setWidth",value:function(t){this.radiusX(t/2)}},{key:"setHeight",value:function(t){this.radiusY(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Ellipse=p,p.prototype.className="Ellipse",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,d._registerNode)(p),u.Factory.addComponentsGetterSetter(p,"radius",["x","y"]),u.Factory.addGetterSetter(p,"radiusX",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(p,"radiusY",0,(0,f.getNumberValidator)())},5999:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var h=n(7103),f=n(1157),d=n(5762),p=n(9552),v=n(544),g=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t])).on("imageChange.konva",(function(){n._setImageLoad()})),n._setImageLoad(),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,o=[{key:"fromURL",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=h.Util.createImageElement();i.onload=function(){var t=new e({image:i});n(t)},i.onerror=r,i.crossOrigin="Anonymous",i.src=t}}],(r=[{key:"_setImageLoad",value:function(){var t=this,e=this.image();e&&e.complete||e&&4===e.readyState||e&&e.addEventListener&&e.addEventListener("load",(function(){t._requestDraw()}))}},{key:"_useBufferCanvas",value:function(){return c(l(e.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_sceneFunc",value:function(t){var e,n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image;if(o){var a=this.attrs.cropWidth,s=this.attrs.cropHeight;e=a&&s?[o,this.cropX(),this.cropY(),a,s,0,0,n,r]:[o,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(t.beginPath(),i?h.Util.drawRoundedRectPath(t,n,r,i):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)),o&&(i&&t.clip(),t.drawImage.apply(t,e))}},{key:"_hitFunc",value:function(t){var e=this.width(),n=this.height(),r=this.cornerRadius();t.beginPath(),r?h.Util.drawRoundedRectPath(t,e,n,r):t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}},{key:"getHeight",value:function(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(d.Shape);e.Image=g,g.prototype.className="Image",(0,p._registerNode)(g),f.Factory.addGetterSetter(g,"cornerRadius",0,(0,v.getNumberOrArrayOfNumbersValidator)(4)),f.Factory.addGetterSetter(g,"image"),f.Factory.addComponentsGetterSetter(g,"crop",["x","y","width","height"]),f.Factory.addGetterSetter(g,"cropX",0,(0,v.getNumberValidator)()),f.Factory.addGetterSetter(g,"cropY",0,(0,v.getNumberValidator)()),f.Factory.addGetterSetter(g,"cropWidth",0,(0,v.getNumberValidator)()),f.Factory.addGetterSetter(g,"cropHeight",0,(0,v.getNumberValidator)())},184:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function c(t,e,n){return e=u(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;var d=n(1157),p=n(5762),v=n(2836),g=n(544),y=n(9552),m=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],b="up",_="right",w="down",S="left",x=m.length,k=function(t){function e(t){var n;return i(this,e),(n=c(this,e,[t])).on("add.konva",(function(t){this._addListeners(t.child),this._sync()})),n}return h(e,t),a(e,[{key:"getText",value:function(){return this.find("Text")[0]}},{key:"getTag",value:function(){return this.find("Tag")[0]}},{key:"_addListeners",value:function(t){var e,n=this,r=function(){n._sync()};for(e=0;e<x;e++)t.on(m[e]+"Change.konva",r)}},{key:"getWidth",value:function(){return this.getText().width()}},{key:"getHeight",value:function(){return this.getText().height()}},{key:"_sync",value:function(){var t,e,n,r,i,o,a,s=this.getText(),c=this.getTag();if(s&&c){switch(t=s.width(),e=s.height(),n=c.pointerDirection(),r=c.pointerWidth(),a=c.pointerHeight(),i=0,o=0,n){case b:i=t/2,o=-1*a;break;case _:i=t+r,o=e/2;break;case w:i=t/2,o=e+a;break;case S:i=-1*r,o=e/2}c.setAttrs({x:-1*i,y:-1*o,width:t,height:e}),s.setAttrs({x:-1*i,y:-1*o})}}}]),e}(v.Group);e.Label=k,k.prototype.className="Label",(0,y._registerNode)(k);var P=function(t){function e(){return i(this,e),c(this,e,arguments)}return h(e,t),a(e,[{key:"_sceneFunc",value:function(t){var e=this.width(),n=this.height(),r=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius(),s=0,c=0,l=0,u=0;"number"==typeof a?s=c=l=u=Math.min(a,e/2,n/2):(s=Math.min(a[0]||0,e/2,n/2),c=Math.min(a[1]||0,e/2,n/2),u=Math.min(a[2]||0,e/2,n/2),l=Math.min(a[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(s,0),r===b&&(t.lineTo((e-i)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+i)/2,0)),t.lineTo(e-c,0),t.arc(e-c,c,c,3*Math.PI/2,0,!1),r===_&&(t.lineTo(e,(n-o)/2),t.lineTo(e+i,n/2),t.lineTo(e,(n+o)/2)),t.lineTo(e,n-u),t.arc(e-u,n-u,u,0,Math.PI/2,!1),r===w&&(t.lineTo((e+i)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-i)/2,n)),t.lineTo(l,n),t.arc(l,n-l,l,Math.PI/2,Math.PI,!1),r===S&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*i,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,s),t.arc(s,s,s,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}},{key:"getSelfRect",value:function(){var t=0,e=0,n=this.pointerWidth(),r=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return i===b?(e-=r,a+=r):i===w?a+=r:i===S?(t-=1.5*n,o+=n):i===_&&(o+=1.5*n),{x:t,y:e,width:o,height:a}}}]),e}(p.Shape);e.Tag=P,P.prototype.className="Tag",(0,y._registerNode)(P),d.Factory.addGetterSetter(P,"pointerDirection","none"),d.Factory.addGetterSetter(P,"pointerWidth",0,(0,g.getNumberValidator)()),d.Factory.addGetterSetter(P,"pointerHeight",0,(0,g.getNumberValidator)()),d.Factory.addGetterSetter(P,"cornerRadius",0,(0,g.getNumberOrArrayOfNumbersValidator)(4))},1906:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function s(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var h=n(1157),f=n(5762),d=n(544),p=n(9552);function v(t,e,n,r,i,o,a){var s=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),c=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),l=a*s/(s+c),u=a*c/(s+c);return[n-l*(i-t),r-l*(o-e),n+u*(i-t),r+u*(o-e)]}function g(t,e){var n,r,i=t.length,o=[];for(n=2;n<i-2;n+=2)r=v(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),isNaN(r[0])||(o.push(r[0]),o.push(r[1]),o.push(t[n]),o.push(t[n+1]),o.push(r[2]),o.push(r[3]));return o}var y=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,e,[t])).on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e,n,r,i=this.points(),o=i.length,a=this.tension(),s=this.closed(),c=this.bezier();if(o){if(t.beginPath(),t.moveTo(i[0],i[1]),0!==a&&o>4){for(n=(e=this.getTensionPoints()).length,r=s?0:4,s||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);r<n-2;)t.bezierCurveTo(e[r++],e[r++],e[r++],e[r++],e[r++],e[r++]);s||t.quadraticCurveTo(e[n-2],e[n-1],i[o-2],i[o-1])}else if(c)for(r=2;r<o;)t.bezierCurveTo(i[r++],i[r++],i[r++],i[r++],i[r++],i[r++]);else for(r=2;r<o;r+=2)t.lineTo(i[r],i[r+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}},{key:"getTensionPoints",value:function(){return this._getCache("tensionPoints",this._getTensionPoints)}},{key:"_getTensionPoints",value:function(){return this.closed()?this._getTensionPointsClosed():g(this.points(),this.tension())}},{key:"_getTensionPointsClosed",value:function(){var t=this.points(),e=t.length,n=this.tension(),r=v(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),i=v(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=g(t,n);return[r[2],r[3]].concat(o).concat([i[0],i[1],t[e-2],t[e-1],i[2],i[3],r[0],r[1],t[0],t[1]])}},{key:"getWidth",value:function(){return this.getSelfRect().width}},{key:"getHeight",value:function(){return this.getSelfRect().height}},{key:"getSelfRect",value:function(){var t,e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};for(var n,r,o=(e=0!==this.tension()?[e[0],e[1]].concat((t=this._getTensionPoints(),function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e[e.length-2],e[e.length-1]]):this.points())[0],a=e[0],s=e[1],c=e[1],l=0;l<e.length/2;l++)n=e[2*l],r=e[2*l+1],o=Math.min(o,n),a=Math.max(a,n),s=Math.min(s,r),c=Math.max(c,r);return{x:o,y:s,width:a-o,height:c-s}}}])&&o(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(f.Shape);e.Line=y,y.prototype.className="Line",y.prototype._attrsAffectingSize=["points","bezier","tension"],(0,p._registerNode)(y),h.Factory.addGetterSetter(y,"closed",!1),h.Factory.addGetterSetter(y,"bezier",!1),h.Factory.addGetterSetter(y,"tension",0,(0,d.getNumberValidator)()),h.Factory.addGetterSetter(y,"points",[],(0,d.getNumberArrayValidator)())},4347:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var u=n(1157),h=n(5762),f=n(9552),d=n(9503),p=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t])).dataArray=[],n.pathLength=0,n._readDataAttribute(),n.on("dataChange.konva",(function(){this._readDataAttribute()})),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,o=[{key:"getLineLength",value:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].pathLength;return e}},{key:"getPointAtLengthOfDataArray",value:function(t,n){var r,i=0,o=n.length;if(!o)return null;for(;i<o&&t>n[i].pathLength;)t-=n[i].pathLength,++i;if(i===o)return{x:(r=n[i-1].points.slice(-2))[0],y:r[1]};if(t<.01)return{x:(r=n[i].points.slice(0,2))[0],y:r[1]};var a=n[i],s=a.points;switch(a.command){case"L":return e.getPointOnLine(t,a.start.x,a.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier((0,d.t2length)(t,e.getPathLength(n),(function(t){return(0,d.getCubicArcLength)([a.start.x,s[0],s[2],s[4]],[a.start.y,s[1],s[3],s[5]],t)})),a.start.x,a.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier((0,d.t2length)(t,e.getPathLength(n),(function(t){return(0,d.getQuadraticArcLength)([a.start.x,s[0],s[2]],[a.start.y,s[1],s[3]],t)})),a.start.x,a.start.y,s[0],s[1],s[2],s[3]);case"A":var c=s[0],l=s[1],u=s[2],h=s[3],f=s[4],p=s[5],v=s[6];return f+=p*t/a.pathLength,e.getPointOnEllipticalArc(c,l,u,h,f,v)}return null}},{key:"getPointOnLine",value:function(t,e,n,r,i,o,a){void 0===o&&(o=e),void 0===a&&(a=n);var s=(i-n)/(r-e+1e-8),c=Math.sqrt(t*t/(1+s*s));r<e&&(c*=-1);var l,u=s*c;if(r===e)l={x:o,y:a+u};else if((a-n)/(o-e+1e-8)===s)l={x:o+c,y:a+u};else{var h,f,d=this.getLineLength(e,n,r,i),p=(o-e)*(r-e)+(a-n)*(i-n);h=e+(p/=d*d)*(r-e),f=n+p*(i-n);var v=this.getLineLength(o,a,h,f),g=Math.sqrt(t*t-v*v);c=Math.sqrt(g*g/(1+s*s)),r<e&&(c*=-1),l={x:h+c,y:f+(u=s*c)}}return l}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,o,a,s,c){function l(t){return t*t*t}function u(t){return 3*t*t*(1-t)}function h(t){return 3*t*(1-t)*(1-t)}function f(t){return(1-t)*(1-t)*(1-t)}return{x:s*l(t)+o*u(t)+r*h(t)+e*f(t),y:c*l(t)+a*u(t)+i*h(t)+n*f(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,o,a){function s(t){return t*t}function c(t){return 2*t*(1-t)}function l(t){return(1-t)*(1-t)}return{x:o*s(t)+r*c(t)+e*l(t),y:a*s(t)+i*c(t)+n*l(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,o){var a=Math.cos(o),s=Math.sin(o),c=n*Math.cos(i),l=r*Math.sin(i);return{x:t+(c*a-l*s),y:e+(c*s+l*a)}}},{key:"parsePathData",value:function(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)e=e.replace(new RegExp(n[r],"g"),"|"+n[r]);var i,o=e.split("|"),a=[],s=[],c=0,l=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(r=1;r<o.length;r++){var h=o[r],f=h.charAt(0);for(h=h.slice(1),s.length=0;i=u.exec(h);)s.push(i[0]);for(var d=[],p=0,v=s.length;p<v;p++)if("00"!==s[p]){var g=parseFloat(s[p]);isNaN(g)?d.push(0):d.push(g)}else d.push(0,0);for(;d.length>0&&!isNaN(d[0]);){var y,m,b,_,w,S,x,k,P,O,C="",T=[],E=c,A=l;switch(f){case"l":c+=d.shift(),l+=d.shift(),C="L",T.push(c,l);break;case"L":c=d.shift(),l=d.shift(),T.push(c,l);break;case"m":var j=d.shift(),M=d.shift();if(c+=j,l+=M,C="M",a.length>2&&"z"===a[a.length-1].command)for(var D=a.length-2;D>=0;D--)if("M"===a[D].command){c=a[D].points[0]+j,l=a[D].points[1]+M;break}T.push(c,l),f="l";break;case"M":c=d.shift(),l=d.shift(),C="M",T.push(c,l),f="L";break;case"h":c+=d.shift(),C="L",T.push(c,l);break;case"H":c=d.shift(),C="L",T.push(c,l);break;case"v":l+=d.shift(),C="L",T.push(c,l);break;case"V":l=d.shift(),C="L",T.push(c,l);break;case"C":T.push(d.shift(),d.shift(),d.shift(),d.shift()),c=d.shift(),l=d.shift(),T.push(c,l);break;case"c":T.push(c+d.shift(),l+d.shift(),c+d.shift(),l+d.shift()),c+=d.shift(),l+=d.shift(),C="C",T.push(c,l);break;case"S":m=c,b=l,"C"===(y=a[a.length-1]).command&&(m=c+(c-y.points[2]),b=l+(l-y.points[3])),T.push(m,b,d.shift(),d.shift()),c=d.shift(),l=d.shift(),C="C",T.push(c,l);break;case"s":m=c,b=l,"C"===(y=a[a.length-1]).command&&(m=c+(c-y.points[2]),b=l+(l-y.points[3])),T.push(m,b,c+d.shift(),l+d.shift()),c+=d.shift(),l+=d.shift(),C="C",T.push(c,l);break;case"Q":T.push(d.shift(),d.shift()),c=d.shift(),l=d.shift(),T.push(c,l);break;case"q":T.push(c+d.shift(),l+d.shift()),c+=d.shift(),l+=d.shift(),C="Q",T.push(c,l);break;case"T":m=c,b=l,"Q"===(y=a[a.length-1]).command&&(m=c+(c-y.points[0]),b=l+(l-y.points[1])),c=d.shift(),l=d.shift(),C="Q",T.push(m,b,c,l);break;case"t":m=c,b=l,"Q"===(y=a[a.length-1]).command&&(m=c+(c-y.points[0]),b=l+(l-y.points[1])),c+=d.shift(),l+=d.shift(),C="Q",T.push(m,b,c,l);break;case"A":_=d.shift(),w=d.shift(),S=d.shift(),x=d.shift(),k=d.shift(),P=c,O=l,c=d.shift(),l=d.shift(),C="A",T=this.convertEndpointToCenterParameterization(P,O,c,l,x,k,_,w,S);break;case"a":_=d.shift(),w=d.shift(),S=d.shift(),x=d.shift(),k=d.shift(),P=c,O=l,c+=d.shift(),l+=d.shift(),C="A",T=this.convertEndpointToCenterParameterization(P,O,c,l,x,k,_,w,S)}a.push({command:C||f,points:T,start:{x:E,y:A},pathLength:this.calcLength(E,A,C||f,T)})}"z"!==f&&"Z"!==f||a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}},{key:"calcLength",value:function(t,n,r,i){var o,a,s,c,l=e;switch(r){case"L":return l.getLineLength(t,n,i[0],i[1]);case"C":return(0,d.getCubicArcLength)([t,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,d.getQuadraticArcLength)([t,i[0],i[2]],[n,i[1],i[3]],1);case"A":o=0;var u=i[4],h=i[5],f=i[4]+h,p=Math.PI/180;if(Math.abs(u-f)<p&&(p=Math.abs(u-f)),a=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),h<0)for(c=u-p;c>f;c-=p)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;else for(c=u+p;c<f;c+=p)s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),o+=l.getLineLength(a.x,a.y,s.x,s.y),a=s;return s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0),o+l.getLineLength(a.x,a.y,s.x,s.y)}return 0}},{key:"convertEndpointToCenterParameterization",value:function(t,e,n,r,i,o,a,s,c){var l=c*(Math.PI/180),u=Math.cos(l)*(t-n)/2+Math.sin(l)*(e-r)/2,h=-1*Math.sin(l)*(t-n)/2+Math.cos(l)*(e-r)/2,f=u*u/(a*a)+h*h/(s*s);f>1&&(a*=Math.sqrt(f),s*=Math.sqrt(f));var d=Math.sqrt((a*a*(s*s)-a*a*(h*h)-s*s*(u*u))/(a*a*(h*h)+s*s*(u*u)));i===o&&(d*=-1),isNaN(d)&&(d=0);var p=d*a*h/s,v=d*-s*u/a,g=(t+n)/2+Math.cos(l)*p-Math.sin(l)*v,y=(e+r)/2+Math.sin(l)*p+Math.cos(l)*v,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(u-p)/a,(h-v)/s]),S=[(u-p)/a,(h-v)/s],x=[(-1*u-p)/a,(-1*h-v)/s],k=_(S,x);return b(S,x)<=-1&&(k=Math.PI),b(S,x)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),[g,y,a,s,w,k,l,o]}}],(r=[{key:"_readDataAttribute",value:function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=e.getPathLength(this.dataArray)}},{key:"_sceneFunc",value:function(t){var e=this.dataArray;t.beginPath();for(var n=!1,r=0;r<e.length;r++){var i=e[r].command,o=e[r].points;switch(i){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],s=o[1],c=o[2],l=o[3],u=o[4],h=o[5],f=o[6],d=o[7],p=c>l?c:l,v=c>l?1:c/l,g=c>l?l/c:1;t.translate(a,s),t.rotate(f),t.scale(v,g),t.arc(0,0,p,u,u+h,1-d),t.scale(1/v,1/g),t.rotate(-f),t.translate(-a,-s);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}},{key:"getSelfRect",value:function(){var t=[];this.dataArray.forEach((function(n){if("A"===n.command){var r=n.points[4],i=n.points[5],o=n.points[4]+i,a=Math.PI/180;if(Math.abs(r-o)<a&&(a=Math.abs(r-o)),i<0)for(var s=r-a;s>o;s-=a){var c=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],s,0);t.push(c.x,c.y)}else for(var l=r+a;l<o;l+=a){var u=e.getPointOnEllipticalArc(n.points[0],n.points[1],n.points[2],n.points[3],l,0);t.push(u.x,u.y)}}else if("C"===n.command)for(var h=0;h<=1;h+=.01){var f=e.getPointOnCubicBezier(h,n.start.x,n.start.y,n.points[0],n.points[1],n.points[2],n.points[3],n.points[4],n.points[5]);t.push(f.x,f.y)}else t=t.concat(n.points)}));for(var n,r,i=t[0],o=t[0],a=t[1],s=t[1],c=0;c<t.length/2;c++)n=t[2*c],r=t[2*c+1],isNaN(n)||(i=Math.min(i,n),o=Math.max(o,n)),isNaN(r)||(a=Math.min(a,r),s=Math.max(s,r));return{x:i,y:a,width:o-i,height:s-a}}},{key:"getLength",value:function(){return this.pathLength}},{key:"getPointAtLength",value:function(t){return e.getPointAtLengthOfDataArray(t,this.dataArray)}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Path=p,p.prototype.className="Path",p.prototype._attrsAffectingSize=["data"],(0,f._registerNode)(p),u.Factory.addGetterSetter(p,"data")},9646:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;var u=n(1157),h=n(5762),f=n(9552),d=n(7103),p=n(544),v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this.cornerRadius(),n=this.width(),r=this.height();t.beginPath(),e?d.Util.drawRoundedRectPath(t,n,r,e):t.rect(0,0,n,r),t.closePath(),t.fillStrokeShape(this)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Rect=v,v.prototype.className="Rect",(0,f._registerNode)(v),u.Factory.addGetterSetter(v,"cornerRadius",0,(0,p.getNumberOrArrayOfNumbersValidator)(4))},1202:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;var u=n(1157),h=n(5762),f=n(544),d=n(9552),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)}},{key:"_getPoints",value:function(){for(var t=this.attrs.sides,e=this.attrs.radius||0,n=[],r=0;r<t;r++)n.push({x:e*Math.sin(2*r*Math.PI/t),y:-1*e*Math.cos(2*r*Math.PI/t)});return n}},{key:"getSelfRect",value:function(){var t=this._getPoints(),e=t[0].x,n=t[0].y,r=t[0].x,i=t[0].y;return t.forEach((function(t){e=Math.min(e,t.x),n=Math.max(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)})),{x:e,y:r,width:n-e,height:i-r}}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.RegularPolygon=p,p.prototype.className="RegularPolygon",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["radius"],(0,d._registerNode)(p),u.Factory.addGetterSetter(p,"radius",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(p,"sides",0,(0,f.getNumberValidator)())},4430:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var u=n(1157),h=n(5762),f=n(544),d=n(9552),p=2*Math.PI,v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,p,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),p,0,!0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Ring=v,v.prototype.className="Ring",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,d._registerNode)(v),u.Factory.addGetterSetter(v,"innerRadius",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(v,"outerRadius",0,(0,f.getNumberValidator)())},4597:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var h=n(1157),f=n(5762),d=n(1893),p=n(544),v=n(9552),g=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t]))._updated=!0,n.anim=new d.Animation((function(){var t=n._updated;return n._updated=!1,t})),n.on("animationChange.konva",(function(){this.frameIndex(0)})),n.on("frameIndexChange.konva",(function(){this._updated=!0})),n.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),a=i[r+0],s=i[r+1],c=i[r+2],l=i[r+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,c,l),t.closePath(),t.fillStrokeShape(this)),u)if(o){var h=o[e],f=2*n;t.drawImage(u,a,s,c,l,h[f+0],h[f+1],c,l)}else t.drawImage(u,a,s,c,l,0,0,c,l)}},{key:"_hitFunc",value:function(t){var e=this.animation(),n=this.frameIndex(),r=4*n,i=this.animations()[e],o=this.frameOffsets(),a=i[r+2],s=i[r+3];if(t.beginPath(),o){var c=o[e],l=2*n;t.rect(c[l+0],c[l+1],a,s)}else t.rect(0,0,a,s);t.closePath(),t.fillShape(this)}},{key:"_useBufferCanvas",value:function(){return c(l(e.prototype),"_useBufferCanvas",this).call(this,!0)}},{key:"_setInterval",value:function(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}},{key:"start",value:function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}},{key:"stop",value:function(){this.anim.stop(),clearInterval(this.interval)}},{key:"isRunning",value:function(){return this.anim.isRunning()}},{key:"_updateIndex",value:function(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(f.Shape);e.Sprite=g,g.prototype.className="Sprite",(0,v._registerNode)(g),h.Factory.addGetterSetter(g,"animation"),h.Factory.addGetterSetter(g,"animations"),h.Factory.addGetterSetter(g,"frameOffsets"),h.Factory.addGetterSetter(g,"image"),h.Factory.addGetterSetter(g,"frameIndex",0,(0,p.getNumberValidator)()),h.Factory.addGetterSetter(g,"frameRate",17,(0,p.getNumberValidator)()),h.Factory.backCompat(g,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},2668:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;var u=n(1157),h=n(5762),f=n(544),d=n(9552),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var i=1;i<2*r;i++){var o=i%2==0?n:e,a=o*Math.sin(i*Math.PI/r),s=-1*o*Math.cos(i*Math.PI/r);t.lineTo(a,s)}t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.outerRadius()}},{key:"getHeight",value:function(){return 2*this.outerRadius()}},{key:"setWidth",value:function(t){this.outerRadius(t/2)}},{key:"setHeight",value:function(t){this.outerRadius(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Star=p,p.prototype.className="Star",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,d._registerNode)(p),u.Factory.addGetterSetter(p,"numPoints",5,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(p,"innerRadius",0,(0,f.getNumberValidator)()),u.Factory.addGetterSetter(p,"outerRadius",0,(0,f.getNumberValidator)())},9275:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Text=e.stringToArray=void 0;var h=n(7103),f=n(1157),d=n(5762),p=n(544),v=n(9552);function g(t){return Array.from(t)}e.stringToArray=g;var y,m="auto",b="inherit",_="justify",w="left",S="middle",x="normal",k=" ",P="none",O=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],C=O.length;function T(){return y||(y=h.Util.createCanvasElement().getContext("2d"))}function E(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}var A=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[E(t)]))._partialTextX=0,n._partialTextY=0;for(var r=0;r<C;r++)n.on(O[r]+"Change.konva",n._setTextData);return n._setTextData(),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){var e=this.textArr,n=e.length;if(this.text()){var r,i=this.padding(),o=this.fontSize(),a=this.lineHeight()*o,s=this.verticalAlign(),c=this.direction(),l=0,u=this.align(),h=this.getWidth(),f=this.letterSpacing(),d=this.fill(),p=this.textDecoration(),v=-1!==p.indexOf("underline"),y=-1!==p.indexOf("line-through"),m=0,x=(m=a/2,0),k=0;for("rtl"===(c=c===b?t.direction:c)&&t.setAttr("direction",c),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",S),t.setAttr("textAlign",w),s===S?l=(this.getHeight()-n*a-2*i)/2:"bottom"===s&&(l=this.getHeight()-n*a-2*i),t.translate(i,l+i),r=0;r<n;r++){x=0,k=0;var P,O,C,T=e[r],E=T.text,A=T.width,j=T.lastInParagraph;if(t.save(),"right"===u?x+=h-A-2*i:"center"===u&&(x+=(h-A-2*i)/2),v){t.save(),t.beginPath(),t.moveTo(x,m+k+Math.round(o/2)),O=0==(P=E.split(" ").length-1),C=u!==_||j?A:h-2*i,t.lineTo(x+Math.round(C),m+k+Math.round(o/2)),t.lineWidth=o/15;var M=this._getLinearGradient();t.strokeStyle=M||d,t.stroke(),t.restore()}if(y){t.save(),t.beginPath(),t.moveTo(x,m+k),O=0==(P=E.split(" ").length-1),C=u===_&&j&&!O?h-2*i:A,t.lineTo(x+Math.round(C),m+k),t.lineWidth=o/15;var D=this._getLinearGradient();t.strokeStyle=D||d,t.stroke(),t.restore()}if("rtl"===c||0===f&&u!==_)0!==f&&t.setAttr("letterSpacing","".concat(f,"px")),this._partialTextX=x,this._partialTextY=m+k,this._partialText=E,t.fillStrokeShape(this);else{P=E.split(" ").length-1;for(var R=g(E),F=0;F<R.length;F++){var I=R[F];" "!==I||j||u!==_||(x+=(h-2*i-A)/P),this._partialTextX=x,this._partialTextY=m+k,this._partialText=I,t.fillStrokeShape(this),x+=this.measureSize(I).width+f}}t.restore(),n>1&&(m+=a)}}}},{key:"_hitFunc",value:function(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}},{key:"setText",value:function(t){var e=h.Util._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}},{key:"getWidth",value:function(){return this.attrs.width===m||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}},{key:"getHeight",value:function(){return this.attrs.height===m||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return h.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"measureSize",value:function(t){var e,n=T(),r=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:r}}},{key:"_getContextFont",value:function(){return this.fontStyle()+k+this.fontVariant()+k+(this.fontSize()+"px ")+this.fontFamily().split(",").map((function(t){var e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t='"'.concat(t,'"')),t})).join(", ")}},{key:"_addTextLine",value:function(t){this.align()===_&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}},{key:"_getTextWidth",value:function(t){var e=this.letterSpacing(),n=t.length;return T().measureText(t).width+(n?e*(n-1):0)}},{key:"_setTextData",value:function(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,r=this.lineHeight()*e,i=this.attrs.width,o=this.attrs.height,a=i!==m&&void 0!==i,s=o!==m&&void 0!==o,c=this.padding(),l=i-2*c,u=o-2*c,h=0,f=this.wrap(),d="char"!==f&&f!==P,p=this.ellipsis();this.textArr=[],T().font=this._getContextFont();for(var v=p?this._getTextWidth("…"):0,g=0,y=t.length;g<y;++g){var b=t[g],_=this._getTextWidth(b);if(a&&_>l)for(;b.length>0;){for(var w=0,S=b.length,x="",O=0;w<S;){var C=w+S>>>1,E=b.slice(0,C+1),A=this._getTextWidth(E)+v;A<=l?(w=C+1,x=E,O=A):S=C}if(!x)break;if(d){var j,M=b[x.length];(j=(M===k||"-"===M)&&O<=l?x.length:Math.max(x.lastIndexOf(k),x.lastIndexOf("-"))+1)>0&&(w=j,x=x.slice(0,w),O=this._getTextWidth(x))}if(x=x.trimRight(),this._addTextLine(x),n=Math.max(n,O),h+=r,this._shouldHandleEllipsis(h)){this._tryToAddEllipsisToLastLine();break}if((b=(b=b.slice(w)).trimLeft()).length>0&&(_=this._getTextWidth(b))<=l){this._addTextLine(b),h+=r,n=Math.max(n,_);break}}else this._addTextLine(b),h+=r,n=Math.max(n,_),this._shouldHandleEllipsis(h)&&g<y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&h+r>u)break}this.textHeight=e,this.textWidth=n}},{key:"_shouldHandleEllipsis",value:function(t){var e=+this.fontSize(),n=this.lineHeight()*e,r=this.attrs.height,i=r!==m&&void 0!==r,o=r-2*this.padding();return!(this.wrap()!==P)||i&&t+n>o}},{key:"_tryToAddEllipsisToLastLine",value:function(){var t=this.attrs.width,e=t!==m&&void 0!==t,n=t-2*this.padding(),r=this.ellipsis(),i=this.textArr[this.textArr.length-1];i&&r&&(e&&(this._getTextWidth(i.text+"…")<n||(i.text=i.text.slice(0,i.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(i.text+"…"))}},{key:"getStrokeScaleEnabled",value:function(){return!0}},{key:"_useBufferCanvas",value:function(){var t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),n=this.hasShadow();return!(!t||!n)||c(l(e.prototype),"_useBufferCanvas",this).call(this)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(d.Shape);e.Text=A,A.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},A.prototype._strokeFunc=function(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},A.prototype.className="Text",A.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,v._registerNode)(A),f.Factory.overWriteSetter(A,"width",(0,p.getNumberOrAutoValidator)()),f.Factory.overWriteSetter(A,"height",(0,p.getNumberOrAutoValidator)()),f.Factory.addGetterSetter(A,"direction",b),f.Factory.addGetterSetter(A,"fontFamily","Arial"),f.Factory.addGetterSetter(A,"fontSize",12,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(A,"fontStyle",x),f.Factory.addGetterSetter(A,"fontVariant",x),f.Factory.addGetterSetter(A,"padding",0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(A,"align",w),f.Factory.addGetterSetter(A,"verticalAlign","top"),f.Factory.addGetterSetter(A,"lineHeight",1,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(A,"wrap","word"),f.Factory.addGetterSetter(A,"ellipsis",!1,(0,p.getBooleanValidator)()),f.Factory.addGetterSetter(A,"letterSpacing",0,(0,p.getNumberValidator)()),f.Factory.addGetterSetter(A,"text","",(0,p.getStringValidator)()),f.Factory.addGetterSetter(A,"textDecoration","")},2e3:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;var h=n(7103),f=n(1157),d=n(5762),p=n(4347),v=n(9275),g=n(544),y=n(9552),m="normal";function b(t){t.fillText(this.partialText,0,0)}function _(t){t.strokeText(this.partialText,0,0)}var w=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t])).dummyCanvas=h.Util.createCanvasElement(),n.dataArray=[],n._readDataAttribute(),n.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",n._setTextData),n._setTextData(),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,(r=[{key:"_getTextPathLength",value:function(){return p.Path.getPathLength(this.dataArray)}},{key:"_getPointAtLength",value:function(t){return this.attrs.data?t-1>this.pathLength?null:p.Path.getPointAtLengthOfDataArray(t,this.dataArray):null}},{key:"_readDataAttribute",value:function(){this.dataArray=p.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}},{key:"_sceneFunc",value:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),r=this.fontSize(),i=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<i.length;o++){t.save();var a=i[o].p0;t.translate(a.x,a.y),t.rotate(i[o].rotation),this.partialText=i[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=r/20,t.stroke()),t.restore()}},{key:"_hitFunc",value:function(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var r=0;r<e.length;r++){var i=e[r].p1;t.lineTo(i.x,i.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}},{key:"getTextWidth",value:function(){return this.textWidth}},{key:"getTextHeight",value:function(){return h.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}},{key:"setText",value:function(t){return v.Text.prototype.setText.call(this,t)}},{key:"_getContextFont",value:function(){return v.Text.prototype._getContextFont.call(this)}},{key:"_getTextSize",value:function(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt("".concat(this.fontSize()),10)}}},{key:"_setTextData",value:function(){var t=this._getTextSize(this.attrs.text),e=t.width,n=t.height;if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;var r=this.letterSpacing(),i=this.align(),o=this.kerningFunc(),a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0),s=0;"center"===i&&(s=Math.max(0,this.pathLength/2-a/2)),"right"===i&&(s=Math.max(0,this.pathLength-a));for(var c=(0,v.stringToArray)(this.text()),l=s,u=0;u<c.length;u++){var h=this._getPointAtLength(l);if(!h)return;var f=this._getTextSize(c[u]).width+r;if(" "===c[u]&&"justify"===i){var d=this.text().split(" ").length-1;f+=(this.pathLength-a)/d}var g=this._getPointAtLength(l+f);if(!g)return;var y=p.Path.getLineLength(h.x,h.y,g.x,g.y),m=0;if(o)try{m=o(c[u-1],c[u])*this.fontSize()}catch(t){m=0}h.x+=m,g.x+=m,this.textWidth+=m;var b=p.Path.getPointOnLine(m+y/2,h.x,h.y,g.x,g.y),_=Math.atan2(g.y-h.y,g.x-h.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:c[u],rotation:_,p0:h,p1:g}),l+=f}}},{key:"getSelfRect",value:function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,n,r=t[0]||0,i=t[0]||0,o=t[1]||0,a=t[1]||0,s=0;s<t.length/2;s++)e=t[2*s],n=t[2*s+1],r=Math.min(r,e),i=Math.max(i,e),o=Math.min(o,n),a=Math.max(a,n);var c=this.fontSize();return{x:r-c/2,y:o-c/2,width:i-r+c,height:a-o+c}}},{key:"destroy",value:function(){return h.Util.releaseCanvas(this.dummyCanvas),c(l(e.prototype),"destroy",this).call(this)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(d.Shape);e.TextPath=w,w.prototype._fillFunc=b,w.prototype._strokeFunc=_,w.prototype._fillFuncHit=b,w.prototype._strokeFuncHit=_,w.prototype.className="TextPath",w.prototype._attrsAffectingSize=["text","fontSize","data"],(0,y._registerNode)(w),f.Factory.addGetterSetter(w,"data"),f.Factory.addGetterSetter(w,"fontFamily","Arial"),f.Factory.addGetterSetter(w,"fontSize",12,(0,g.getNumberValidator)()),f.Factory.addGetterSetter(w,"fontStyle",m),f.Factory.addGetterSetter(w,"align","left"),f.Factory.addGetterSetter(w,"letterSpacing",0,(0,g.getNumberValidator)()),f.Factory.addGetterSetter(w,"textBaseline","middle"),f.Factory.addGetterSetter(w,"fontVariant",m),f.Factory.addGetterSetter(w,"text",""),f.Factory.addGetterSetter(w,"textDecoration",null),f.Factory.addGetterSetter(w,"kerningFunc",null)},9185:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function o(t,e,n){return e=l(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}(t,a()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},c.apply(this,arguments)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){var r,i,o;r=t,i=e,o=n[e],(i=d(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;var p=n(7103),v=n(1157),g=n(7087),y=n(5762),m=n(9646),b=n(2836),_=n(9552),w=n(544),S=n(9552),x="tr-konva",k=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((function(t){return t+".".concat(x)})).join(" "),P="nodesRect",O=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],C={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},T="ontouchstart"in _.Konva._global,E=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function A(t,e,n){var r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return f(f({},t),{},{rotation:t.rotation+e,x:r,y:i})}var j=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,e,[t]))._movingAnchorName=null,n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(s(n)),n._handleMouseUp=n._handleMouseUp.bind(s(n)),n.update=n.update.bind(s(n)),n.on(k,n.update),n.getNode()&&n.update(),n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,r=[{key:"attachTo",value:function(t){return this.setNode(t),this}},{key:"setNode",value:function(t){return p.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}},{key:"getNode",value:function(){return this._nodes&&this._nodes[0]}},{key:"_getEventNamespace",value:function(){return x+this._id}},{key:"setNodes",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._nodes&&this._nodes.length&&this.detach();var n=e.filter((function(e){return!e.isAncestorOf(t)||(p.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)}));return this._nodes=e=n,1===e.length&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((function(e){var n=function(){1===t.nodes().length&&t.useSingleNodeRotation()&&t.rotation(t.nodes()[0].getAbsoluteRotation()),t._resetTransformCache(),t._transforming||t.isDragging()||t.update()},r=e._attrsAffectingSize.map((function(e){return e+"Change."+t._getEventNamespace()})).join(" ");e.on(r,n),e.on(O.map((function(e){return e+".".concat(t._getEventNamespace())})).join(" "),n),e.on("absoluteTransformChange.".concat(t._getEventNamespace()),n),t._proxyDrag(e)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}},{key:"_proxyDrag",value:function(t){var e,n=this;t.on("dragstart.".concat(this._getEventNamespace()),(function(r){e=t.getAbsolutePosition(),n.isDragging()||t===n.findOne(".back")||n.startDrag(r,!1)})),t.on("dragmove.".concat(this._getEventNamespace()),(function(r){if(e){var i=t.getAbsolutePosition(),o=i.x-e.x,a=i.y-e.y;n.nodes().forEach((function(e){if(e!==t&&!e.isDragging()){var n=e.getAbsolutePosition();e.setAbsolutePosition({x:n.x+o,y:n.y+a}),e.startDrag(r)}})),e=null}}))}},{key:"getNodes",value:function(){return this._nodes||[]}},{key:"getActiveAnchor",value:function(){return this._movingAnchorName}},{key:"detach",value:function(){var t=this;this._nodes&&this._nodes.forEach((function(e){e.off("."+t._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}},{key:"_resetTransformCache",value:function(){this._clearCache(P),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}},{key:"_getNodeRect",value:function(){return this._getCache(P,this.__getNodeRect)}},{key:"__getNodeShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rotation(),n=arguments.length>2?arguments[2]:void 0,r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),a=r.x*i.x-t.offsetX()*i.x,s=r.y*i.y-t.offsetY()*i.y,c=(_.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return A({x:o.x+a*Math.cos(c)+s*Math.sin(-c),y:o.y+s*Math.cos(c)+a*Math.sin(c),width:r.width*i.x,height:r.height*i.y,rotation:c},-_.Konva.getAngle(e),{x:0,y:0})}},{key:"__getNodeRect",value:function(){var t=this;if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var e=[];this.nodes().map((function(n){var r=n.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],o=n.getAbsoluteTransform();i.forEach((function(t){var n=o.point(t);e.push(n)}))}));var n=new p.Transform;n.rotate(-_.Konva.getAngle(this.rotation()));var r=1/0,i=1/0,o=-1/0,a=-1/0;e.forEach((function(t){var e=n.point(t);void 0===r&&(r=o=e.x,i=a=e.y),r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y)})),n.invert();var s=n.point({x:r,y:i});return{x:s.x,y:s.y,width:o-r,height:a-i,rotation:_.Konva.getAngle(this.rotation())}}},{key:"getX",value:function(){return this._getNodeRect().x}},{key:"getY",value:function(){return this._getNodeRect().y}},{key:"getWidth",value:function(){return this._getNodeRect().width}},{key:"getHeight",value:function(){return this._getNodeRect().height}},{key:"_createElements",value:function(){var t=this;this._createBack(),E.forEach((function(e){t._createAnchor(e)})),this._createAnchor("rotater")}},{key:"_createAnchor",value:function(t){var e=this,n=new m.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:T?10:"auto"}),r=this;n.on("mousedown touchstart",(function(t){r._handleMouseDown(t)})),n.on("dragstart",(function(t){n.stopDrag(),t.cancelBubble=!0})),n.on("dragend",(function(t){t.cancelBubble=!0})),n.on("mouseenter",(function(){var r=_.Konva.getAngle(e.rotation()),i=e.rotateAnchorCursor(),o=function(t,e,n){if("rotater"===t)return n;e+=p.Util.degToRad(C[t]||0);var r=(p.Util.radToDeg(e)%360+360)%360;return p.Util._inRange(r,337.5,360)||p.Util._inRange(r,0,22.5)?"ns-resize":p.Util._inRange(r,22.5,67.5)?"nesw-resize":p.Util._inRange(r,67.5,112.5)?"ew-resize":p.Util._inRange(r,112.5,157.5)?"nwse-resize":p.Util._inRange(r,157.5,202.5)?"ns-resize":p.Util._inRange(r,202.5,247.5)?"nesw-resize":p.Util._inRange(r,247.5,292.5)?"ew-resize":p.Util._inRange(r,292.5,337.5)?"nwse-resize":(p.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}(t,r,i);n.getStage().content&&(n.getStage().content.style.cursor=o),e._cursorChange=!0})),n.on("mouseout",(function(){n.getStage().content&&(n.getStage().content.style.cursor=""),e._cursorChange=!1})),this.add(n)}},{key:"_createBack",value:function(){var t=this,e=new y.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(t,e){var n=e.getParent(),r=n.padding();t.beginPath(),t.rect(-r,-r,e.width()+2*r,e.height()+2*r),t.moveTo(e.width()/2,-r),n.rotateEnabled()&&n.rotateLineVisible()&&t.lineTo(e.width()/2,-n.rotateAnchorOffset()*p.Util._sign(e.height())-r),t.fillStrokeShape(e)},hitFunc:function(e,n){if(t.shouldOverdrawWholeArea()){var r=t.padding();e.beginPath(),e.rect(-r,-r,n.width()+2*r,n.height()+2*r),e.fillStrokeShape(n)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",(function(t){t.cancelBubble=!0})),e.on("dragmove",(function(t){t.cancelBubble=!0})),e.on("dragend",(function(t){t.cancelBubble=!0})),this.on("dragmove",(function(e){t.update()}))}},{key:"_handleMouseDown",value:function(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,r=e.height,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));this.sin=Math.abs(r/i),this.cos=Math.abs(n/i),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((function(e){e._fire("transformstart",{evt:t.evt,target:e})}))}},{key:"_handleMouseMove",value:function(t){var e,n,r,i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(t);var a=o.getPointerPosition(),s={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},c=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(s=this.anchorDragBoundFunc()(c,s,t)),i.setAbsolutePosition(s);var l=i.getAbsolutePosition();if(c.x!==l.x||c.y!==l.y)if("rotater"!==this._movingAnchorName){var u,h=this.shiftBehavior();u="inverted"===h?this.keepRatio()&&!t.shiftKey:"none"===h?this.keepRatio():this.keepRatio()||t.shiftKey;var f=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(u){var d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(d.y-i.y(),2));var p=this.findOne(".top-left").x()>d.x?-1:1,v=this.findOne(".top-left").y()>d.y?-1:1;e=r*this.cos*p,n=r*this.sin*v,this.findOne(".top-left").x(d.x-e),this.findOne(".top-left").y(d.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(i.y());else if("top-right"===this._movingAnchorName){u&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(d.y-i.y(),2)),p=this.findOne(".top-right").x()<d.x?-1:1,v=this.findOne(".top-right").y()>d.y?-1:1,e=r*this.cos*p,n=r*this.sin*v,this.findOne(".top-right").x(d.x+e),this.findOne(".top-right").y(d.y-n));var g=i.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(i.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(i.x()):"bottom-left"===this._movingAnchorName?(u&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},r=Math.sqrt(Math.pow(d.x-i.x(),2)+Math.pow(i.y()-d.y,2)),p=d.x<i.x()?-1:1,v=i.y()<d.y?-1:1,e=r*this.cos*p,n=r*this.sin*v,i.x(d.x-e),i.y(d.y+n)),g=i.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(i.y()):"bottom-right"===this._movingAnchorName?u&&(d=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},r=Math.sqrt(Math.pow(i.x()-d.x,2)+Math.pow(i.y()-d.y,2)),p=this.findOne(".bottom-right").x()<d.x?-1:1,v=this.findOne(".bottom-right").y()<d.y?-1:1,e=r*this.cos*p,n=r*this.sin*v,this.findOne(".bottom-right").x(d.x+e),this.findOne(".bottom-right").y(d.y+n)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey){var y=this.findOne(".top-left"),m=this.findOne(".bottom-right"),b=y.x(),w=y.y(),S=this.getWidth()-m.x(),x=this.getHeight()-m.y();m.move({x:-b,y:-w}),y.move({x:S,y:x})}var k=this.findOne(".top-left").getAbsolutePosition();e=k.x,n=k.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),O=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:P,height:O,rotation:_.Konva.getAngle(this.rotation())},t)}else{var C=this._getNodeRect();e=i.x()-C.width/2,n=-i.y()+C.height/2;var T=Math.atan2(-n,e)+Math.PI/2;C.height<0&&(T-=Math.PI);var E=_.Konva.getAngle(this.rotation())+T,j=_.Konva.getAngle(this.rotationSnapTolerance()),M=function(t,e,n){for(var r=e,i=0;i<t.length;i++){var o=_.Konva.getAngle(t[i]),a=Math.abs(o-e)%(2*Math.PI);Math.min(a,2*Math.PI-a)<n&&(r=o)}return r}(this.rotationSnaps(),E,j),D=function(t,e){var n=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return A(t,e,n)}(C,M-C.rotation);this._fitNodesInto(D,t)}}},{key:"_handleMouseUp",value:function(t){this._removeEvents(t)}},{key:"getAbsoluteTransform",value:function(){return this.getTransform()}},{key:"_removeEvents",value:function(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((function(e){e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}},{key:"_fitNodesInto",value:function(t,e){var n=this,r=this._getNodeRect();if(p.Util._inRange(t.width,2*-this.padding()-1,1))this.update();else if(p.Util._inRange(t.height,2*-this.padding()-1,1))this.update();else{var i=new p.Transform;if(i.rotate(_.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var o=i.point({x:2*-this.padding(),y:0});t.x+=o.x,t.y+=o.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=o.x,this._anchorDragOffset.y-=o.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var a=i.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=a.x,this._anchorDragOffset.y-=a.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var s=i.point({x:0,y:2*-this.padding()});t.x+=s.x,t.y+=s.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=s.x,this._anchorDragOffset.y-=s.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var c=i.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=c.x,this._anchorDragOffset.y-=c.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){var l=this.boundBoxFunc()(r,t);l?t=l:p.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var u=1e7,h=new p.Transform;h.translate(r.x,r.y),h.rotate(r.rotation),h.scale(r.width/u,r.height/u);var f=new p.Transform,d=t.width/u,v=t.height/u;!1===this.flipEnabled()?(f.translate(t.x,t.y),f.rotate(t.rotation),f.translate(t.width<0?t.width:0,t.height<0?t.height:0),f.scale(Math.abs(d),Math.abs(v))):(f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(d,v));var g=f.multiply(h.invert());this._nodes.forEach((function(t){var r,i=t.getParent().getAbsoluteTransform(),o=t.getTransform().copy();o.translate(t.offsetX(),t.offsetY());var a=new p.Transform;a.multiply(i.copy().invert()).multiply(g).multiply(i).multiply(o);var s=a.decompose();t.setAttrs(s),n._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(r=t.getLayer())||void 0===r||r.batchDraw()})),this.rotation(p.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}}},{key:"forceUpdate",value:function(){this._resetTransformCache(),this.update()}},{key:"_batchChangeChild",value:function(t,e){this.findOne(t).setAttrs(e)}},{key:"update",value:function(){var t,e=this,n=this._getNodeRect();this.rotation(p.Util._getRotation(n.rotation));var r=n.width,i=n.height,o=this.enabledAnchors(),a=this.resizeEnabled(),s=this.padding(),c=this.anchorSize(),l=this.find("._anchor");l.forEach((function(t){t.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+s,offsetY:c/2+s,visible:a&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+s,visible:a&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-s,offsetY:c/2+s,visible:a&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:c/2+s,visible:a&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:c/2-s,visible:a&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:c/2+s,offsetY:c/2-s,visible:a&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:c/2-s,visible:a&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:c/2-s,offsetY:c/2-s,visible:a&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*p.Util._sign(i)-s,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});var u=this.anchorStyleFunc();u&&l.forEach((function(t){u(t)})),null===(t=this.getLayer())||void 0===t||t.batchDraw()}},{key:"isTransforming",value:function(){return this._transforming}},{key:"stopTransform",value:function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}},{key:"destroy",value:function(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),b.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}},{key:"toObject",value:function(){return g.Node.prototype.toObject.call(this)}},{key:"clone",value:function(t){return g.Node.prototype.clone.call(this,t)}},{key:"getClientRect",value:function(){return this.nodes().length>0?c(l(e.prototype),"getClientRect",this).call(this):{x:0,y:0,width:0,height:0}}}],r&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(b.Group);e.Transformer=j,j.prototype.className="Transformer",(0,S._registerNode)(j),v.Factory.addGetterSetter(j,"enabledAnchors",E,(function(t){return t instanceof Array||p.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===E.indexOf(t)&&p.Util.warn("Unknown anchor name: "+t+". Available names are: "+E.join(", "))})),t||[]})),v.Factory.addGetterSetter(j,"flipEnabled",!0,(0,w.getBooleanValidator)()),v.Factory.addGetterSetter(j,"resizeEnabled",!0),v.Factory.addGetterSetter(j,"anchorSize",10,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"rotateEnabled",!0),v.Factory.addGetterSetter(j,"rotateLineVisible",!0),v.Factory.addGetterSetter(j,"rotationSnaps",[]),v.Factory.addGetterSetter(j,"rotateAnchorOffset",50,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"rotateAnchorCursor","crosshair"),v.Factory.addGetterSetter(j,"rotationSnapTolerance",5,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"borderEnabled",!0),v.Factory.addGetterSetter(j,"anchorStroke","rgb(0, 161, 255)"),v.Factory.addGetterSetter(j,"anchorStrokeWidth",1,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"anchorFill","white"),v.Factory.addGetterSetter(j,"anchorCornerRadius",0,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"borderStroke","rgb(0, 161, 255)"),v.Factory.addGetterSetter(j,"borderStrokeWidth",1,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"borderDash"),v.Factory.addGetterSetter(j,"keepRatio",!0),v.Factory.addGetterSetter(j,"shiftBehavior","default"),v.Factory.addGetterSetter(j,"centeredScaling",!1),v.Factory.addGetterSetter(j,"ignoreStroke",!1),v.Factory.addGetterSetter(j,"padding",0,(0,w.getNumberValidator)()),v.Factory.addGetterSetter(j,"node"),v.Factory.addGetterSetter(j,"nodes"),v.Factory.addGetterSetter(j,"boundBoxFunc"),v.Factory.addGetterSetter(j,"anchorDragBoundFunc"),v.Factory.addGetterSetter(j,"anchorStyleFunc"),v.Factory.addGetterSetter(j,"shouldOverdrawWholeArea",!1),v.Factory.addGetterSetter(j,"useSingleNodeRotation",!0),v.Factory.backCompat(j,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},2978:(t,e,n)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:String(e)}function a(t,e,n){return e=c(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,s()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(s=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;var u=n(1157),h=n(5762),f=n(9552),d=n(544),p=n(9552),v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e,arguments)}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_sceneFunc",value:function(t){t.beginPath(),t.arc(0,0,this.radius(),0,f.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},{key:"getWidth",value:function(){return 2*this.radius()}},{key:"getHeight",value:function(){return 2*this.radius()}},{key:"setWidth",value:function(t){this.radius(t/2)}},{key:"setHeight",value:function(t){this.radius(t/2)}}])&&i(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(h.Shape);e.Wedge=v,v.prototype.className="Wedge",v.prototype._centroid=!0,v.prototype._attrsAffectingSize=["radius"],(0,p._registerNode)(v),u.Factory.addGetterSetter(v,"radius",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(v,"angle",0,(0,d.getNumberValidator)()),u.Factory.addGetterSetter(v,"clockwise",!1),u.Factory.backCompat(v,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})}}]);